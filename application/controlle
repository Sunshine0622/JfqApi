
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
header('Content-type: application/json');
class Api extends CI_Controller {

	/**
	 * 
	 *
	 */
	function  __construct(){
		parent::__construct();
		$this->load->database();

	
	}
	public function index()
	{
		$this->load->view('home');
	}
	
	//点击接口
	public function aso_source(){
		$rearr = $_GET;
		$cpid = $this->uri->segment(4,0);//此cpid为渠道商和我们之间的唯一值
		$adid = "";
		if(isset($rearr['adid']) && !empty($rearr['adid']) && $rearr['adid'] != $rearr['appid']) {
			$adid = " and cpid = " . $rearr['adid'];
		}
		$sql = "select app_name,cpid,appid,IdfaRepeat_url,submit_url,source_url,advert_url from aso_advert where is_disable='0' and appid = ".$rearr['appid'] . $adid;
		$res = $this->db->query($sql);
		$list = $res->row_array();//查出来的是厂商app的信息
		if(empty($list)){
			echo json_encode(array('code'=>99,'message'=>'Ad Downline'));die;
		}
		$data = array();
		$data['cpid'] = $cpid;//此cpid为我们与厂商之间的唯一值

		if(isset($rearr['device']) && $rearr['device']!=null){
		  $rearr['device']=str_replace(' ','',$rearr['device']);//将设备空格去掉
		}
		foreach($rearr as $k=>$v){
			$data[$k] = $v;
		}
		$sql = "select * from aso_source_cpid where cpid = ".$cpid;//查找渠道信息
		$res = $this->db->query($sql);
		$sour_cpid = $res->row_array(); 

		if(empty($sour_cpid)){
			echo  json_encode(array('code'=>'102','result'=>'cpid error'));
			//如果渠道和我们之间cpid不对返回错误信息
			return false;
		}
		if(empty($data['ip'])){
			echo  json_encode(array('code'=>'102','result'=>'ip noisset'));
			//如果渠道和我们之间cpid不对返回错误信息
			return false;
		}
		if($sour_cpid['key'] !=''){//key不为空的就是带sign,为空的就是渠道不支持sign验证
			if(md5($data['timestamp'].$sour_cpid['key']) != $data['sign']){
				echo  json_encode(array('code'=>'101','result'=>'sign error'));
				//如果我们与渠道商之间的sign错误返回信息
				return false;
			}
		}
		if(!isset($rearr['timestamp'])){
			$data['timestamp'] = time();
		}
		//unset($data['adid']);
		$listarr = array(2,3,4,5,6,7,8,9,10,12,13,14,17,18,11,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,40,41,42,44,45,46,47,48,50,51,52,53,54,56,57,58,59,60,61,62,66,70,71,73,74,88,96,98,99,100,101,102,103,104,105,106,156,157,158,159,160,161,162,191,200,246,248,281,489,341,359,368,969,876,597,788,9656,10010,10012,10013,10014,10015,10016,10017,10021,10022,10023,10024,10025,10026,10027,10028);
		if(in_array($list['cpid'],$listarr)){
			$s ='source_'.$list['cpid'];
			$this->$s($data,$list);
			mysql_close()
			;die;
		}
		// if($list['cpid']==2 or $list['cpid']==3 or $list['cpid']==4 or $list['cpid'] ==5){
		// 	$s ='source_'.$list['cpid'];
		// 	$this->$s($data,$list);
		// 	mysql_close();die;
		// }
		if($list['cpid']==1){//如果厂商的cpid为1，就是我们自己来做排重只对接渠道，不对接厂商，只做排重不回调
			// $sql = "select * from aso_source where appid = ".$rearr['appid']." and idfa='".$data['idfa']."'";
			$sql = "select count(*) as s from aso_submit where appid = ".$rearr['appid']." and idfa='".$data['idfa']."'";
			$res = $this->db->query($sql);
			$result = $res->row_array();
			// 应用雷达涨乐财付通
			if($data['appid'] == 379594830) {
				$url = "http://integralwall.ann9.com/Interface/ServiceiMoney.ashx?"."udid=".$data['idfa'].'&appid='.$data['appid'].'&returnFormat=null&multipleurl=1';
				$file_contents = $this->request_get($url);
				$json = json_decode($file_contents,true);
											
				if($json['success'] == "true"){//点击成功
					// $data['json']=$file_contents;
					$this->db->insert('aso_source',$data);
					echo  json_encode(array('code'=>'0','result'=>'ok'));
					
				}else{//失败 
					$data['json']=$file_contents;
					$this->db->insert('aso_source_log',$data);
					echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				}
				exit;
			}
			if(empty($result['s'])){
				$a = array('code'=>'0','result'=>'ok');
				$file_contents = json_encode($a);
				$id = $this->db->insert('aso_source', $data); 
				$inid = $this->db->insert_id();
				echo  $file_contents;
				mysql_close();
				die;
			}else{
				$file_contents = array('code'=>'102','result'=>'idfa repeat');
				$data['json'] =json_encode($file_contents);
				$id = $this->db->insert('aso_source_log', $data); 
				echo  json_encode($file_contents);
				mysql_close();
				//如果我们与渠道商之间的idfa是重复的就错误返回信息
				die;
			}
		}else{
			$s ='source_'.$rearr['appid'];
			$this->$s($data,$list);
			mysql_close();
			die;
		}
	}
	//回调
	public function aso_advert(){
		$callarr = $_GET;
		//记录到回调日志
		
		$data_al['appid'] = $callarr['appid'];
		$data_al['idfa']  = $callarr['idfa'];
		$data_al['timestamp']    = time();

		if(isset($callarr['sign'])){
			if($callarr['sign'] != md5($callarr['k'].md5('callback'))){
				$data_al['error']  = '{"resultCode":-1,"errorMsg":"sign error"} ';
				$this->db->insert('aso_advert_log', $data_al);
				echo '{"resultCode":-1,"errorMsg":"sign error"} ';die;
			}else{
				$this->db->insert('aso_advert_log', $data_al);
			}
		}
		

		//$sql = "select * from aso_source where id=".$callarr['back_id']." and appid=".$callarr['appid']." and idfa='".$callarr['idfa']."'";//查找渠道的回调地址
		$sql = "select * from aso_source where appid=".$callarr['appid']." and idfa='".$callarr['idfa']."'" . " ORDER BY id DESC LIMIT 1";//
		// echo $sql;die;
		$res = $this->db->query($sql);
		$list = $res->row_array();
		if(empty($list)){
			echo '{"resultCode":-1,"errorMsg":"callback noExist"} ';die;
		}

		$url = $list['callback'];
		$pos = strrpos($list['callback'], "imoney.one");
		if($pos !== 0) {
			$url = str_replace("imoney.one", "eimoney.com", $list['callback']);
		}
		
		// $callback = urldecode(trim($list['callback']));
		$file_contents = $this->request_get($url);
		// $post_data=array(1=>'1');
        // $file_contents = $this->request_post($callback, $post_data);  
       	// $json = json_decode($file_contents,true );
		
		// $file_contents = file_get_contents($callback);
		$json = json_decode($file_contents,true );
		$result = array('cpid'=>$list['cpid'],'appid'=>$callarr['appid'],'idfa'=>$callarr['idfa'],'timestamp'=>time(),'type'=>2);

		// 特殊处理
		if($callarr['appid'] == 1051607862) {
			if($json['success']){//回调值成功，完成任务
				$this->db->insert('aso_submit2',$result);
				echo json_encode(array('status'=>1));

				mysql_close();
				die;
			}else{
				$result['json']=$file_contents;
				$this->db->insert('aso_submit_log',$result);
				mysql_close();
				echo  $file_contents;die;
			}
		}
		//创客 回调相应
		if($callarr['appid'] == 1053098785) {
			if($json['success']){//回调值成功，完成任务
				$this->db->insert('aso_submit2',$result);
				echo json_encode(array('errno'=>1,'msg'=>'success'));

				mysql_close();
				die;
			}else{
				$result['json']=$file_contents;
				$this->db->insert('aso_submit_log',$result);
				mysql_close();
				echo json_encode(array('errno'=>0,'msg'=>'false'));
				die;
			}
		}
		if($list['cpid']==217){
			if(!$json['c']){//回调值成功，完成任务
				$this->db->insert('aso_submit2',$result);
				echo  json_encode(array('success'=>true,'message'=>'ok'));
				mysql_close();
				die;
			}else{
				$result['json']=$file_contents;
				$this->db->insert('aso_submit_log',$result);
				mysql_close();
				echo  json_encode(array('success'=>false,'message'=>'error'));die;
			}
		}
		if($list['cpid']==512){
			if($json['msg'] == "success"){//回调值成功，完成任务
				$this->db->insert('aso_submit2',$result);
				echo  json_encode(array('success'=>true,'message'=>'ok'));
				mysql_close();
				die;
			}else{
				$result['json']=$file_contents;
				$this->db->insert('aso_submit_log',$result);
				mysql_close();
				echo  json_encode(array('success'=>false,'message'=>'error'));die;
			}
		}
		if($list['cpid']==303){
			if($json['status'] == 1){//回调值成功，完成任务
				$this->db->insert('aso_submit2',$result);
				echo  json_encode(array('success'=>true,'message'=>'ok'));
				mysql_close();
				die;
			}else{
				$result['json']=$file_contents;
				$this->db->insert('aso_submit_log',$result);
				mysql_close();
				echo  json_encode(array('success'=>false,'message'=>'error'));die;
			}
		}
		if($list['cpid']==909){
			$this->db->insert('aso_submit2',$result);
				echo  json_encode(array('success'=>true,'message'=>'ok'));
				mysql_close();
				die;
		}
		if($list['cpid']==7166){
			$this->db->insert('aso_submit2',$result);
				echo  json_encode(array('success'=>true,'message'=>'ok'));
				mysql_close();
				die;
		}
		if($list['cpid']==406 && !$json['c']){
			$this->db->insert('aso_submit2',$result);
			echo  json_encode(array('success'=>true,'message'=>'ok'));
			mysql_close();
			die;
		}
		if($list['cpid']==465 && $file_contents == "ok"){
			$this->db->insert('aso_submit2',$result);
			echo  json_encode(array('success'=>true,'message'=>'ok'));
			mysql_close();
			die;
		}
		if($list['cpid']==963 && $json['statusCode'] == 200){
			$this->db->insert('aso_submit2',$result);
			echo  json_encode(array('success'=>true,'message'=>'ok'));
			mysql_close();
			die;
		}
		if($list['cpid']==517 && $json['code'] == 0){
			$this->db->insert('aso_submit2',$result);
			echo  json_encode(array('success'=>true,'message'=>'ok'));
			mysql_close();
			die;
		}
		if($list['cpid']==1356 && $json['status'] == 1){
			$this->db->insert('aso_submit2',$result);
			echo  json_encode(array('success'=>true,'message'=>'ok'));
			mysql_close();
			die;
		}

		if($list['cpid']==10013 && $json['status'] == "success"){
			$this->db->insert('aso_submit2',$result);
			echo  json_encode(array('success'=>true,'message'=>'ok'));
			mysql_close();
			die;
		}

		if(isset($json['success']) && $json['success']){//回调值成功，完成任务
			$this->db->insert('aso_submit2',$result);
			echo $file_contents;

			mysql_close();
			die;
		}else{
			$result['json']=$file_contents;
			$this->db->insert('aso_submit_log',$result);
			mysql_close();
			echo  $file_contents;die;
		}

		// if( $json['errorMsg']='ok'){//回调值成功，修改任务表中的任务状态，完成任务
		// 	$this->db->insert('aso_submit',$result);
		// 	$result['json']=$file_contents;
		// 	$this->db->insert('aso_submit_log',$result);
		// 	echo $file_contents;
		// 	mysql_close();
		// 	die;
		// }else{
		// 	$result['json']=$file_contents;
		// 	$this->db->insert('aso_submit_log',$result);
		// 	mysql_close();
		// 	echo  $file_contents;die;
		// }
		
	}
	public function aso_IdfaRepeat(){

		$rearr =array();
		$cpid = $this->uri->segment(4,0);//此cpid为渠道商和我们之间的唯一值
		if($cpid==622){
			$rearr = $_POST;
			$rearr['ip'] = '';
			
		}else{
			$rearr = $_GET;
			
		}
		$adid = "";
		if(isset($rearr['adid']) && !empty($rearr['adid']) && $rearr['adid'] != $rearr['appid']) {
			$adid = " and cpid = " . $rearr['adid'];
		}
		$sql = "select app_name,cpid,appid,IdfaRepeat_url,submit_url,source_url,advert_url from aso_advert where is_disable='0' and appid = ".$rearr['appid'] . $adid;
		$res = $this->db->query($sql);
		$list = $res->row_array();
		if(empty($list)){
			echo json_encode(array('code'=>99,'message'=>'Ad Downline'));die;
		}
		$data = array();
		// $data['cpid'] = $list['cpid'];//此cpid为我们与应用商之间的唯一值
		$data['cpid'] = $cpid;//此cpid为我们与应用商之间的唯一值
		$sql = "select * from aso_source_cpid where cpid = ".$cpid;
		$res = $this->db->query($sql);
		$sour_cpid = $res->row_array(); 
		
		foreach($rearr as $k=>$v){
			$data[$k] = $v;
		}
		if(empty($list)){
			echo  json_encode(array('code'=>'102','result'=>'appid error'));
			//如果渠道和我们之间cpid不对返回错误信息
			return false;
		}
		if(empty($sour_cpid)){
			echo  json_encode(array('code'=>'102','result'=>'cpid error'));
			//如果渠道和我们之间cpid不对返回错误信息
			return false;
		}
		// if($list['cpid']==2 or $list['cpid']==3 or $list['cpid']==4 or $list['cpid']==6 or $list['cpid']==8){
		// 	$s ='IdfaRepeat_'.$list['cpid'];
		// 	$this->$s($data,$list);
		// 	mysql_close();die;
		// }
		$data['adid'] = isset($data['adid']) ? $data['adid'] : 0;
		$listarr = array(2,3,4,6,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,62,66,69,70,71,73,74,88,94,96,98,99,100,101,102,103,104,105,106,156,157,158,159,160,161,162,191,200,246,248,281,489,341,359,788,969,970,876,597,900,9656,10010,10011,10013,10014,10015,10016,10017,10018,10019,10020,10021,10022,10023,10025,10026,10027,10028);
		if(in_array($list['cpid'],$listarr)){
			$s ='IdfaRepeat_'.$list['cpid'];
			$this->$s($data,$list);
			mysql_close();die;
		}
		if($list['cpid']==1){//如果厂商的cpid为1，就是我们自己来做排重只对接渠道，不对接厂商，只做排重不回调
			// $sql = "select * from aso_source where appid = ".$rearr['appid']." and idfa='".$data['idfa']."'";
			$sql = "select count(*) as s from aso_submit where appid = ".$rearr['appid']." and idfa='".$data['idfa']."'";
			$res = $this->db->query($sql);
			$result = $res->row_array();
			if(empty($result['s'])){
				// $a = array('code'=>'0','result'=>'ok');
				// $file_contents = json_encode($a);
				$a = array($rearr['idfa']=>'1');
				$file_contents = json_encode($a);
				$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
				$this->db->insert('aso_IdfaRepeat_log',$log);
				// $id = $this->db->insert('aso_source', $data); 
				// $inid = $this->db->insert_id();
				// echo  $file_contents;
				
			}else{
				$file_get_contents = array($rearr['idfa']=>'0');
				$file_contents =json_encode($file_get_contents);
				$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
				$this->db->insert('aso_IdfaRepeat_log',$log);
				// echo  $file_contents;
				//如果我们与渠道商之间的idfa是重复的就错误返回信息
				
			}
			// $log=array('cpid'=>$cpid,'appid'=>$rearr['appid'],'idfa'=>$rearr['idfa'],'json'=> $file_contents ,'date'=>time());
			// $this->db->insert('aso_IdfaRepeat_log',$log);
			echo  $file_contents;
			mysql_close();die;
		}else{
			$s ='IdfaRepeat_'.$rearr['appid'];
			$this->$s($data,$list);
			mysql_close();die;
		}
		
	}
	//做完任务上报接口
	public function aso_Submit(){
		$rearr = $_GET;
		$cpid  = $this->uri->segment(4,0);//此cpid为渠道商和我们之间的唯一值
		$adid = "";
		if(isset($rearr['adid']) && !empty($rearr['adid']) && $rearr['adid'] != $rearr['appid']) {
			$adid = " and cpid = " . $rearr['adid'];
		}
		$sql   = "select app_name,cpid,appid,IdfaRepeat_url,submit_url,source_url,advert_url from aso_advert where is_disable='0' and appid = ".$rearr['appid'] . $adid;
		$res   = $this->db->query($sql);
		$list  = $res->row_array();//查出来的是厂商app的信息
		if(empty($list)){
			echo json_encode(array('code'=>99,'message'=>'Ad Downline'));die;
		}
		// $data  = array();
		// $data['cpid'] = $cpid;//此cpid为我们与厂商之间的唯一值
		$sql   = "select * from aso_source_cpid where cpid = ".$cpid;//查找渠道信息
		$res   = $this->db->query($sql);
		$sour_cpid = $res->row_array(); 

		if(empty($sour_cpid)){
			echo  json_encode(array('code'=>'102','result'=>'cpid error'));
			//如果渠道和我们之间cpid不对返回错误信息
			return false;
		}
		if($sour_cpid['key'] !=''){//key不为空的就是带sign,为空的就是渠道不支持sign验证
			if(md5($rearr['timestamp'].$sour_cpid['key']) != $rearr['sign']){
				echo  json_encode(array('code'=>'101','result'=>'sign error'));
				//如果我们与渠道商之间的sign错误返回信息
				return false;
			}
		}
		$listarr = array(2,3,5,10,14,11,16,19,20,21,22,25,27,28,29,9,31,38,39,40,41,43,45,46,47,49,52,53,54,62,66,69,73,100,101,103,12,157,158,159,160,161,191,246,248,281,359,597,697,900,969,970,9656,10013,10016,10018,10021,10022,10023);
		if(in_array($list['cpid'],$listarr)){
			$s ='submit_'.$list['cpid'];
			// $s ='submit_'.$rearr['appid'];
			$rearr['cpid']=$cpid;
			unset($rearr['adid']);
			$this->$s($rearr,$list);
			mysql_close();die;
		}
		// if($rearr['appid']==982437433 or $rearr['appid']==535742398){
		// 	$s ='submit_'.$rearr['appid'];
		// 	$this->$s($rearr,$list);
		// 	mysql_close();die;
		// }
		$sql = "select cpid,idfa,appid from aso_source where cpid=".$cpid." and appid = ".$rearr['appid']." and idfa='".$rearr['idfa']."'";
		$res = $this->db->query($sql);
		$result = $res->row_array();
		$rearr['cpid']=$cpid;
		$rearr['type']=1;
		$rearr['timestamp']=time();

		if($list['cpid']==1 or $list['cpid']==4){
			$sql = "select count(*) as s from aso_submit where appid = ".$rearr['appid']." and idfa='".$rearr['idfa']."'";
			$r = $this->db->query($sql);
			$res = $r->row_array();
			unset($rearr['adid'],$rearr['sign'],$rearr['ip'],$rearr['reqtype'],$rearr['isbreak'],$rearr['device'],$rearr['os'],$rearr['callback']);
			if(!empty($res['s'])){//已经做过任务或者已经提交
				$a = array('code'=>'103','result'=>'idfa Exist');
				$file_contents = json_encode($a);
				$rearr['json']=$file_contents;
				$this->db->insert('aso_submit_log',$rearr);
				echo  $file_contents;
				mysql_close();
				die;

			}
		//如果厂商的cpid为1，就是我们自己来做排重只对接渠道，不对接厂商，只做排重点击上报
			if(empty($result)){//等于空就是没有做任务，返回错误值
				$a = array('code'=>'103','result'=>'idfa noExist');
				$file_contents = json_encode($a);
				$rearr['json']=$file_contents;
				$this->db->insert('aso_submit_log',$rearr);
				echo  $file_contents;
				mysql_close();
				die;

			}else{
				//写入submit
				$result['timestamp'] = time();
				$result['type'] = 1;
				$this->db->insert('aso_submit',$result);
				// $sql = "update aso_source set submit=1 where id =".$result['id'];
				// $this->db->query($sql);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				mysql_close();
				die;
			}
		}else{
			$s ='submit_'.$rearr['appid'];
			unset($rearr['adid']);
			$this->$s($result,$rearr);
			mysql_close();die;
		}
	}
	/**************************************** 接口开始**********************************************/
	//钱咖渠道点击接口
	public function aso_qkClick(){

		if($_SERVER['REQUEST_METHOD']=='GET'){
			echo json_encode(array('code'=>99,'message'=>'request method error'));die;
		}
		if(!isset($_POST['idfa']) || empty($_POST['idfa'])){
			echo json_encode(array('code'=>99,'message'=>'idfa error'));die;
		}

		$data   = $_POST;
		
		$url    = 'http://asoapi.aiyingli.com/api/aso_source/cpid/622/?appid='.$data['appid'].'&idfa='.$data['idfa'].'&ip='.$data['ip'].'&adid=1';
		
		
		$info   = $this->request_get($url);
		echo $info;
		
		
	}
	//钱咖渠道排重接口
	public function aso_qkIdfaRepeat(){

		if($_SERVER['REQUEST_METHOD']=='GET'){
			echo json_encode(array('code'=>99,'message'=>'request method error'));die;
		}
		if(!isset($_POST['idfa']) || empty($_POST['idfa'])){
			echo json_encode(array('code'=>99,'message'=>'idfa error'));die;
		}
		
		$data          = $_POST;
		$data['adid']  = 1;
		$url           = 'http://asoapi.aiyingli.com/api/aso_IdfaRepeat/cpid/622';
		$idfas         = explode(',',$data['idfa']);
		$ReturnIdfa    = array();
		foreach($idfas as $k=>$val){
			$data['idfa']  = $val;

			$info   = $this->request_post($url,$data);
		
			$json   = json_decode($info,true);
			
			if($json[$val]=='1'){
				//echo  json_encode(array($data['idfa']=>'0'));
				$ReturnIdfa[$val]=0;
			}else{
				$ReturnIdfa[$val]=1;
			}

		}
		
		echo json_encode($ReturnIdfa);
		
		
	
	}
	//巴士壹佰 点击 
	/*$data  array() 请求参数
	* $list  array() app信息
	* return json    
	*/
	function source_1008110025($data,$list){
		$key   = 'e6a47e16d1f8a11869f8142ddc8ee9da';
		$time  = time();
		$sign  = md5($time.$key);

		$value = 'appid='.$data['appid'].'&idfa='.$data['idfa'].'&ip='.$data['ip'].'&tamp='.$time.'&sign='.$sign;
		
		$file_contents   = file_get_contents($list['url'].$value);
		
		$json  = json_decode($file_contents,true );
		if($json['result']='ok'){
			$id = $this->db->insert('aso_source', $data); 
			$inid = $this->db->insert_id();
			echo $file_contents;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  $file_contents;
		}

	}
	//巴士壹佰 排重 
	/*$data  array() 请求参数
	* $list  array() app信息
	* return json    
	*/
	function IdfaRepeat_1008110025($data,$list){
		$file_contents = file_get_contents($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true );
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);

		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
				
			}else{
				echo  json_encode(array($data['idfa']=>'0'));
			}
		
	}
	//巴士壹佰 上报null 
	/*$result 未需要上报广告主，只渠道上报我们
	* return json    
	*/
	function  submit_1008110025($result,$rearr){
		if(empty($result)){//等于空就是没有做任务，返回错误值
				$a = array('code'=>'103','result'=>'idfa noExist');
				$file_contents = json_encode($a);
				$rearr['json']=$file_contents;
				$this->db->insert('aso_submit_log',$rearr);
				echo  $file_contents;
			}else{
				$result['timestamp'] = time();
				$result['type'] = 1;
				$this->db->insert('aso_submit',$result);
				// $sql = "update aso_source set submit=1 where id =".$result['id'];
				// $this->db->query($sql);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
			}

	}
	//俄罗斯方块 点击
	function  source_1086911361($data,$list){
		$url ='http://www.p-dragon.com/weshare_wx/adReq.do?srcid=S_APYB&ENCODE_DATA=';
		$key = '390770b3f76ae639';
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback error"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$str='&reqtype=0&appid=BLOCKL&idfa='.$data['idfa'].'&device=no&os=no&isbreak=0&callback='.$callback;
		$r = Crypt::encrypt($key,$str);
		$r = Base64_Encode($r);
		$url=$url.$r;
		$file_contents=file_get_contents($url);
		$json  = json_decode($file_contents,true );
		if($json['errorMsg']='ok' ){
			echo $file_contents;die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  $file_contents;die;
		}
	}
	//中国象棋
	// function  source_1089445559($data,$list){
	// 	$url ='http://www.p-dragon.com/weshare_wx/adReq.do?srcid=S_APYB&ENCODE_DATA=';
	// 	$key = '390770b3f76ae639';
	// 	if(empty($data['callback'])){
	// 		echo'{"resultCode":-1,"errorMsg":"callback error"}'; die;  
	// 	}
	// 	$id = $this->db->insert('aso_source', $data); 
	// 	$inid = $this->db->insert_id();
	// 	$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
	// 	$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
	// 	$callback = urlencode($callback);
	// 	$str='&reqtype=0&appid=1089445559&idfa='.$data['idfa'].'&device=no&os=no&isbreak=0&callback='.$callback;
	// 	$r = Crypt::encrypt($key,$str);
	// 	$r = Base64_Encode($r);
	// 	$url=$url.$r;
	// 	$file_contents=file_get_contents($url);
	// 	$json  = json_decode($file_contents,true );
	// 	if($json['errorMsg']='ok' ){
	// 		echo  json_encode(array('code'=>'0','result'=>'ok'));die;
	// 	}else{
	// 		$data['json'] =$file_contents;
	// 		$this->db->insert('aso_source_log', $data); 
	// 		echo  json_encode(array('code'=>'103','result'=>'false'));die;
	// 	}
	// }
	//趣米点击排重
	function source_5($data,$list){
		$file_contents = file_get_contents($list['source_url']."&idfa=".$data['idfa']."&clientip=".$data['ip']);
		$json = json_decode($file_contents,true );
		
		// echo $file_contents;
		if($json[$data['idfa']]==0 && isset($json[$data['idfa']])){
			$this->db->insert('aso_source',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;//这里返回1代表成功
		}else{
			
			
			$data['json']= $file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));
		}	
	}
	//趣米上报
	function submit_5($data,$list){
		if(!isset($data['ip'])){
			echo  json_encode(array('error'=>'ip error'));die;
		}
		$file_contents = file_get_contents($list['submit_url']."&idfa=".$data['idfa']."&ip=".$data['ip']);
		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		// echo $file_contents;
		if($json['code']==0){//上报成功
				// unset($data['sign']);
				// unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
			}else{//失败 
				// unset($data['sign']);
				// unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			}
	}
	//闯奇分包排重
	function IdfaRepeat_2($data,$list){
		if(!isset($data['ip'])){
			echo  json_encode(array('error'=>'ip error'));die;
		}
		$file_contents = file_get_contents($list['IdfaRepeat_url']."&appid=" . $data['appid'] . "&idfa=".$data['idfa']."&ip=".$data['ip']);
		$json = json_decode($file_contents,true );
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
			}else{
				//成功返回
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
			}
	}
	//闯奇分包上报
	function submit_2($data,$list){
		if(!isset($data['ip'])){
			echo  json_encode(array('error'=>'ip error'));die;
		}

		$file_contents = file_get_contents($list['submit_url']."&appid=" . $data['appid'] . "&idfa=".$data['idfa']."&ip=".$data['ip']);
		$json = json_decode($file_contents,true );
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if($json['success']){//上报成功
				// unset($data['sign']);
				// unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
			}else{//失败 
				// unset($data['sign']);
				// unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			}
	}
	//懒猫分包排重
	function IdfaRepeat_3($data,$list){
		$file_contents = file_get_contents($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true );
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		unset($data['sign']);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
			}else{
				//成功返回
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
			}
	}
	//懒猫分包上报
	function submit_3($data,$list){
		$file_contents = file_get_contents($list['submit_url']."&idfa=".$data['idfa']."&ip=".$data['ip']);
		$json = json_decode($file_contents,true );
		
		// unset($data['sign']);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['status']) && $json['status']==1){//上报成功
				// unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
			}else{//失败 
				// unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			}
	} 
	//懒猫分包点击
	function source_3($data,$list){
		$file_contents = file_get_contents($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&os=".$data['os']);
		$json = json_decode($file_contents,true );
		if(isset($json['status']) && $json['status']==1){//上报成功
				$this->db->insert('aso_source',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
			}else{//失败
				$data['json'] =  $file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			}	
	}
	//应用雷达排重
	function IdfaRepeat_4($data,$list){
		$url = $list['IdfaRepeat_url'];
        $post_data['appid']       = $data['appid'];
        $post_data['idfa']      = $data['idfa'];
        
        $file_contents = $this->request_post($url, $post_data);  
       	$json = json_decode($file_contents,true );
		// echo $file_contents;die;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		unset($data['sign']);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]==0){
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}
	//应用雷达NOW直播注册回调
	function source_57($data,$list){
		$this->source_4($data,$list);
	}
	//应用雷达NOW直播注册回调排重
	function IdfaRepeat_57($data,$list){
		$this->IdfaRepeat_4($data,$list);
	}
	//应用雷达点击请求
	function source_4($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		// echo $callback;die;
		$url = $list['source_url'] ."udid=".$data['idfa'].'&appid='.$data['appid'].'&returnFormat=null&multipleurl='.$callback;
		// $file_contents = file_get_contents("http://integralwall.ann9.com/Interface/ServiceiMoney.ashx?"."&udid=".$data['idfa'].'&appid='.$data['appid'].'&returnFormat=null&multipleurl='.$callback);
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		if($data['appid']==550926736){
			if(isset($json['code'])){//点击成功
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
		}
		if($data['appid']==395096736){
			if($json['status']){//点击成功

				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
		}
		// if($data['appid']==432282960){
		// 	if(isset($json['result']) && $json['result'] && $json['message'] == 200){//点击成功  

		// 		echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
		// 	}else{//失败 
		// 		$data['json']=$file_contents;
		// 		$this->db->insert('aso_source_log',$data);
		// 		echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		// 		die;
		// 	}
		// }
		if(isset($json['success']) && $json['success']){//点击成功

				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			}	
	}

	//相册宝 排重
	function IdfaRepeat_55($data,$list){
		$param         = json_encode(array('appid'=>$data['appid'],'idfa'=>$data['idfa']));
		$file_contents = $this->request_get($list['IdfaRepeat_url']."?param=".$param);
		// print_r($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&ip=".$data["ip"]);exit;
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json[$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}


	//京盟 点击
	function source_58($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		// $id = $this->db->insert('aso_source', $data);
		// $inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url = $list['source_url'] ."&appid=".$data['appid'].'&idfa=' . $data['idfa'] ."&publicIp=".$data['ip']."&devicetype=".$data['device']."&osversion=".$data['os']."&clicktime=".$data['timestamp']."&callback=".$callback;
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		//var_dump($json);
	if(isset($json["success"]) && $json["success"] == "true"){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	//谢总理财分包 赚钱啦 排重
	function IdfaRepeat_6($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&appid=".$data['appid']);
		$json = json_decode($file_contents,true );
		// echo $file_contents;die;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'1');//成功
				$contents = json_encode($a);
				echo  $contents;
				exit;
			}else{
				//成功返回
				echo  json_encode(array($data['idfa']=>'0'));//失败
				exit;
			}
	}

	//赚钱啦 点击回调
	function source_6($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$URL_SIGN = MD5($data['timestamp']."168a66c08da0ba918ce1718b594f5e7d");
		$url=$list['source_url']."?appid=".$data['appid']."&timestamp=".$data['timestamp'].'&idfa='.$data['idfa'].'&ip='.$data['ip']."&sign=".$URL_SIGN.'&callback='.$callback;
		// echo $url;die;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		if(isset($json['code']) && !$json['code']){//点击成功
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	
		// echo $file_contents;die;

	}
	//boss直聘
	function IdfaRepeat_887314963($data,$list){
		$str='';
		$surl ='';
		list($t1, $t2) = explode(' ', microtime());
		$time= $t2 .  ceil( ($t1 * 1000) );
		$arr = array('app_id'=> 4050,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0');
		foreach ($arr as $key => $value) {
			$surl .=$key.'='.$value.'&';
		}
		ksort($arr);
		foreach ($arr as $key => $value) {
			$str.=$key.'='.$value;
		}
		$sig='V2.0' . MD5('/api/integralWall/idfaExist'.$str.'b4c64402a3e858c6d725f05c5a1ca097');
		$url='http://api.bosszhipin.com/api/integralWall/idfaExist?'.$surl.'sig='.$sig;
		$file_contents = $this->request_get($url);
		// echo $file_contents;die;
		$json = json_decode($file_contents,true );
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
		}else{
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}

	}
	function source_887314963($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback error"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$str='';
		list($t1, $t2) = explode(' ', microtime());
		$time= $t2 .  ceil( ($t1 * 1000) );
		$arr = array('app_id'=> 4050,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0','ip'=>$data['ip'],'source'=>'aiyingli','callback'=>$callback,'mac'=>'none','openUdid'=>'none');
		ksort($arr);
		foreach ($arr as $key => $value) {
			$str.=$key.'='.$value;
		}
		$sig='V2.0' . MD5('/api/integralWall/save8090'.$str.'b4c64402a3e858c6d725f05c5a1ca097');
		$arr2 = array('app_id'=> 4050,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0','ip'=>$data['ip'],'source'=>'aiyingli','callback'=>$callback,'mac'=>'none','openUdid'=>'none','sig'=>$sig);
		$url='http://api.bosszhipin.com/api/integralWall/save8090';
		$file_contents = $this->request_post($url,$arr2); 
		$json = json_decode($file_contents,true );
		if(isset($json['status']) && $json['status']==1){//点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
		
		
	}

	//新boss直聘 排重
	function IdfaRepeat_1029883121($data,$list){
		$str='';
		$surl ='';
		list($t1, $t2) = explode(' ', microtime());
		$time= $t2 .  ceil( ($t1 * 1000) );
		$arr = array('app_id'=> 4002,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0');
		foreach ($arr as $key => $value) {
			$surl .=$key.'='.$value.'&';
		}
		ksort($arr);
		foreach ($arr as $key => $value) {
			$str.=$key.'='.$value;
		}
		$sig='V2.0' . MD5('/api/integralWall/idfaExist'.$str.'c1aa014f0f13c35137555ff0d22cc74a');
		$url='http://api.bosszhipin.com/api/integralWall/idfaExist?'.$surl.'sig='.$sig;
		$file_contents = $this->request_get($url);
		// echo $file_contents;die;
		$json = json_decode($file_contents,true );
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
		}else{
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}

	}

	//新boss直聘 点击
	function source_1029883121($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback error"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$str='';
		list($t1, $t2) = explode(' ', microtime());
		$time= $t2 .  ceil( ($t1 * 1000) );
		$arr = array('app_id'=> 4002,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0','ip'=>$data['ip'],'source'=>'aiyingli1','callback'=>$callback,'mac'=>'none','openUdid'=>'none');
		ksort($arr);
		foreach ($arr as $key => $value) {
			$str.=$key.'='.$value;
		}
		$sig='V2.0' . MD5('/api/integralWall/save8090'.$str.'c1aa014f0f13c35137555ff0d22cc74a');
		$arr2 = array('app_id'=> 4002,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0','ip'=>$data['ip'],'source'=>'aiyingli1','callback'=>$callback,'mac'=>'none','openUdid'=>'none','sig'=>$sig);
		$url='http://api.bosszhipin.com/api/integralWall/save8090';
		$file_contents = $this->request_post($url,$arr2); 
		$json = json_decode($file_contents,true );
		if(isset($json['status']) && $json['status']==1){//点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
		
		
	}

	//Boss直聘(高薪版)
	function IdfaRepeat_1150273835($data,$list){
		$str='';
		$surl ='';
		list($t1, $t2) = explode(' ', microtime());
		$time= $t2 .  ceil( ($t1 * 1000) );
		$arr = array('app_id'=> 4002,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0');
		foreach ($arr as $key => $value) {
			$surl .=$key.'='.$value.'&';
		}
		ksort($arr);
		foreach ($arr as $key => $value) {
			$str.=$key.'='.$value;
		}
		$sig='V2.0' . MD5('/api/integralWall/idfaExist'.$str.'c1aa014f0f13c35137555ff0d22cc74a');
		$url='http://api.bosszhipin.com/api/integralWall/idfaExist?'.$surl.'sig='.$sig;
		$file_contents = $this->request_get($url);
		// echo $file_contents;die;
		$json = json_decode($file_contents,true );
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
		}else{
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}

	}

	//Boss直聘(高薪版)
	function source_1150273835($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback error"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$str='';
		list($t1, $t2) = explode(' ', microtime());
		$time= $t2 .  ceil( ($t1 * 1000) );
		$arr = array('app_id'=> 4002,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0','ip'=>$data['ip'],'source'=>'aiyingli','callback'=>$callback,'mac'=>'none','openUdid'=>'none');
		ksort($arr);
		foreach ($arr as $key => $value) {
			$str.=$key.'='.$value;
		}
		$sig='V2.0' . MD5('/api/integralWall/save8090'.$str.'c1aa014f0f13c35137555ff0d22cc74a');
		$arr2 = array('app_id'=> 4002,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0','ip'=>$data['ip'],'source'=>'aiyingli','callback'=>$callback,'mac'=>'none','openUdid'=>'none','sig'=>$sig);
		$url='http://api.bosszhipin.com/api/integralWall/save8090';
		$file_contents = $this->request_post($url,$arr2); 
		$json = json_decode($file_contents,true );
		if(isset($json['status']) && $json['status']==1){//点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
	}

	//点乐 点击回调
	function source_7($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url=$list['source_url'].'&idfa='.$data['idfa'].'&ip='.$data['ip'].'&callbackurl='.$callback;
		// echo $url;die;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		if(isset($json['status']) && $json['status']==1){//点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
		
		// echo $file_contents;die;

	}
	//米迪 排重
	function IdfaRepeat_8($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url'] . "&idfa=".$data['idfa']."&appid=".$data['appid']);
		$json = json_decode($file_contents,true );
		// echo $file_contents;die;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
			}else{
				//成功返回
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
			}
	}
	//米迪点击
	function source_8($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url = $list['source_url'].'&appid='.$data['appid'].'&idfa='.$data['idfa'].'&clientIp='.$data['ip'].'&callback='.$callback;
		// echo $url;
		
		
		$file_contents = $this->GetHttpStatusCode($url);
		// echo $file_contents;die;
		$json = json_decode($file_contents,true );
		if($file_contents==302){//点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
	}
	//免费公牛炒股 排重
	function IdfaRepeat_923209807($data,$list){
		$file_contents = $this->request_get("http://api.miidi.net/cas/exist.bin?source=aipuyoubang"."&idfa=".$data['idfa']."&appid=923209807_cp");
		$json = json_decode($file_contents,true );
		// echo $file_contents;die;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
			}else{
				//成功返回
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
			}
	}
	//免费公牛炒股米迪点击
	function source_923209807($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url="http://api.miidi.net/cas/j.bin?source=aipuyoubang".'&appid=923209807_cp&idfa='.$data['idfa'].'&clientIp='.$data['ip'].'&callback='.$callback;
		 
        $file_contents = $this->GetHttpStatusCode($url);
        // $file_contents = $this->StatusCode($url);
		// echo $file_contents;die;
		$json = json_decode($file_contents,true );
		if($file_contents==302){//点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
	}
	//今日赚排重
	function IdfaRepeat_9($data,$list){
		if(!isset($data['ip'])){
			echo  json_encode(array('error'=>'ip error'));die;
		}
		// $url = "http://idfa.jinrizhuanqian.com:8080/jinrizhuancooper/downstream_check_idfa?source=aiyingli&check=1"."&idfa=".$data['idfa']."&appleid=".$data['appid']."&ip=".$data['ip'];
		$url = $list['IdfaRepeat_url']."&idfas=".$data['idfa']."&ip=".$data['ip'];
		//echo $url;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		//var_dump($json);
		// echo $file_contents;die;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['code'])&&isset($json['data'][$data['idfa']]) && $json['data'][$data['idfa']]==0  && $json['code']==0){
				
				//成功返回
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
				
		}else{
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
		}
	}
	//今日赚点击回调
	
	function source_9($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		//$HeadUrl  = $list['source_url']!=''?$list['source_url']:'http://click.jinrizhuanqian.com:8080/jinrizhuancooper/downstream_click_notice?source=aiyingli&mac=02:00:00:00:00:00';
		$url=$list['source_url'].'&idfa='.$data['idfa'].'&mac=02:00:00:00:00:00&os='.$data['os'].'&ip='.$data['ip'].'&callbackurl='.$callback;
		//echo $url;
		$file_contents = $this->request_get($url);
		// echo $file_contents;die;
		$json = json_decode($file_contents,true );
		if(isset($json['code']) && $json['code']==0){//点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
		
		// echo $file_contents;die;

	}

	//今日赚上报
	function submit_9($data,$list){
		$url = $list['submit_url'] ."&ip=" . $data['ip'] . "&idfa=" . $data['idfa'];
		//echo $url;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
	//var_dump($json);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if($json['code']==0 && isset($json['code'])){//上报成功
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}
	//铜板墙获取广告列表
	function GetAdList(){
			$json   = $this->request_get('http://taskapi.asowind.com/IOS/GetAdList?channelid=4e9fbabb-f18d-4436-b837-b43de3f2c409&idfa=&os=9.3.2&model=ipone&ip=&mac=02:00:00:00:00:00');
			if(isset($_GET['type']) && $_GET['type']==1){

				echo    $json;
				
			}else{
				return  $json;
			}
			
	}
	//铜板墙 排重
	function IdfaRepeat_10($data,$list){

		
		$data_al['channelid']   = '4e9fbabb-f18d-4436-b837-b43de3f2c409';
		$data_al['idfa']        = $data['idfa']; 
		$data_al['appid']       = $data['appid'];
		$data_al['ip']          = $data['ip'];

		$url = $list['IdfaRepeat_url'];
		//var_dump($data_al);
		//echo $url;
		$file_contents = $this->request_post($url,$data_al);
		
		// $file_contents = $this->request_get("http://121.40.57.89:8004/vendor/ioscheck?channelid=61B73D05-57E0-4F13-B7C3-54FB6B0D994F&appid=880988864"."&idfa=".$data['idfa']."&ip=".$data['ip']);
		$json = json_decode($file_contents,true );
		
		// echo $file_contents;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['resState']) && $json['resState']==200){
				//成功返回
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
				
			}else{
				

				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
			}
	}
	//铜板墙 点击
	function source_10($data,$list){
		
		$data_al['channelid']   = '4e9fbabb-f18d-4436-b837-b43de3f2c409';
		$data_al['idfa']        = $data['idfa']; 
		$data_al['appid']       = $data['appid'];
		$data_al['ip']          = $data['ip'];
		
		$data_al['model']       = $data['device'];
		$data_al['os']          = $data['os'];
		$data_al['mac']         = '02:00:00:00:00:00';
	    $data_al['keyword']     = explode('=',explode('?',$list['source_url'])[1])[1];
		$url = $list['source_url'];
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		
		// $url="http://121.40.57.89:8004/vendor/iosclick?channelid=61B73D05-57E0-4F13-B7C3-54FB6B0D994F".'&idfa='.$data['idfa'].'&appleid=880988864&ip='.$data['ip'].'&callbackurl='.$callback;
		// echo $url;die;
		
		$file_contents = $this->request_post($url,$data_al);
		// echo $url;
		$json = json_decode($file_contents,true );
		
		if(isset($json['resState']) && $json['resState']==200){//点击成功
				$this->db->insert('aso_source', $data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
		
		// echo $file_contents;die;

	}

	//铜板墙上报
	function submit_10($data,$list){
		
		$data_al['channelid']   = '4e9fbabb-f18d-4436-b837-b43de3f2c409';
		$data_al['idfa']        = $data['idfa']; 
		$data_al['appid']       = $data['appid'];
		$data_al['ip']          = $data['ip'];
		
		$data_al['model']       = 'iphone';
		$data_al['os']          = '9.3.2';
		$data_al['mac']         = '02:00:00:00:00:00';
		$data_al['keyword']     = explode('=',explode('?',$list['submit_url'])[1])[1];
		$url = $list['submit_url'];
		$file_contents = $this->request_post($url,$data_al);
		$json = json_decode($file_contents,true );
		
		// echo $url;
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if(isset($json['resState']) && $json['resState']==200){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
			}else{//失败 
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			}
	}
    /**************************************** Begin czx add ********************************************************/
	// 甘草医生点击
	// function source_11($data, $list){
	// 	$url ="http://channel.sohouer.com/check_idfa/?"."appid=" . $data['appid'] . "&idfa=" . $data['idfa'] . "&source=aiyingli" . "&uid=99F67FABEEA44808A62074924AA2729D";
	// 	$file_contents = $this -> request_get($url);
	// 	$json = json_decode($file_contents, true);
	// 	if(!isset($json['status']) && $json[$data['idfa']] == 0){ //点击成功
	// 		$this->db->insert('aso_source', $data);
	// 		echo  json_encode(array('code'=>'0', 'result'=>'ok'));
	// 	}else{//失败 
	// 		$data['json'] = $file_contents;
	// 		$this -> db -> insert('aso_source_log', $data);
	// 		echo  json_encode(array('code'=>'103', 'result'=>'false')); //这里返回1代表成功
	// 	}	
	// }

	// 甘草医生 排重
	function IdfaRepeat_11($data, $list){
		$url =$list['IdfaRepeat_url']."&appid=" . $data['appid'] . "&idfa=" . $data['idfa'] .  "&ip=" . $data['ip'];
		$file_contents = $this -> request_get($url);

		$json = json_decode($file_contents, true);
		//写入log
		$log = array('cpid'=>$data['cpid'], 'appid' => $data['appid'],'adid'=>$data['adid'],'idfa' => $data['idfa'], 'json' => $file_contents , 'date'=>time());
		$this -> db -> insert('aso_IdfaRepeat_log',$log);
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 0){ //排重成功
				$a = array($data['idfa']=>'1'); //这里返回1代表成功
				$contents = json_encode($a);
				echo  $contents;
		}else{ //排重失败
				echo  json_encode(array($data['idfa']=>'0'));//我们这里返回0代表失败不可做任务
		}	
	}

	// 甘草医生  点击
	function source_11($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url'] . "&appid=" . $data['appid'] . "&idfa=" . $data['idfa'] . "&ip=" . $data['ip'] . "&callback=".$callback;
		$file_contents = $this->request_get($url);
		// echo $file_contents;
		$json = json_decode($file_contents,true );
		if($json['status']=="true"){//点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
	}
	//甘草医生  上报
	function submit_11($data,$list){
		$url = $list['submit_url'] . "&appid=" . $data['appid'] . "&ip=" . $data['ip'] . "&idfa=" . $data['idfa']."&device=iphone"."&os=9.3.1";
		$file_contents = file_get_contents($url);
		$json = json_decode($file_contents,true );		
		// unset($data['sign']);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if($json['status']=="true"){//上报成功
				// unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
			}else{//失败 
				// unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			}
	} 

	//苏宁易购,美团 排重
	function IdfaRepeat_12($data,$list){
 		// $url = "http://api.v3.9080app.com/RemoveEcho.ashx?adid=3154&appid=3104&idfa=" . $data['idfa'];
		$file_contents = $this->request_get($list['IdfaRepeat_url'] . "&idfa=".$data['idfa']."&ip=".$data['ip']);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(!$json[$data['idfa']]){
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}
	//苏宁易购,美团 点击
	function source_12($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url = $list['source_url'] . "&mac=02:00:00:00:00:00&idfa=".$data['idfa'] . "&ip=" . $data['ip'] . "&callback=" . $callback;

		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );

		//渠道返回：成功返回0  失败返回1
		if($json['success']){
			//成功返回
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}


	//掌上互动 上报
	function submit_12($data,$list){
		$file_contents = $this->request_get($list['submit_url'] . "&mac=02:00:00:00:00:00&osverssion=10.1&ip=".$data['ip']."&idfa=" . $data['idfa']);
		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['status']) && $json['status']==1){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}
	//律律法律咨询  排重
	function IdfaRepeat_1059306480($data,$list){
		
		$file_contents = $this->request_get($list['IdfaRepeat_url'].'?idfa='.$data['idfa'].'&appid='.$data['appid']);
		
		$json = json_decode($file_contents,true );
		// echo $file_contents;die;
		//写入log
	
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]==0){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
			}else{
				//成功返回
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
			}
	}
	//律律法律咨询  点击
	function source_1059306480($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		
		$url = $list['source_url']."?appid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback;
		
		$file_contents = file_get_contents($url);
		
		//$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		
		
		//print_r($file_contents);exit;
		if(isset($json['code']) && $json['code']==0){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	//Hello语音交友 排重
	function IdfaRepeat_88($data,$list){
		
		$file_contents = $this->request_get($list['IdfaRepeat_url'].'?idfa='.$data['idfa']);
		
		$json = json_decode($file_contents,true );
		// echo $file_contents;die;
		//写入log
	
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['data']) && $json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
			}else{
				//成功返回
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
			}
	}
	//Hello语音交友 点击
	function source_88($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		
		$url = $list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback;
		
		$file_contents = file_get_contents($url);
		
		//$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		
		
		//print_r($file_contents);exit;
		if(isset($json['code']) && $json['code']==200){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	//i友钱空空狐,直播吧 排重
	function IdfaRepeat_14($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url'] . "&idfas=".$data['idfa']);
		$json = json_decode($file_contents,true );
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json["code"]==200) {
			if(!$json["result"][$data['idfa']]) {
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
			}else{
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
			}
		}else{
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	// i友钱空空狐 点击回调
	function source_14($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$file_contents = $this->request_get($list['source_url'] . "&idfa=" . $data['idfa'] . "&ip=" . $data['ip'] . "&callback=" . $callback);
		$json = json_decode($file_contents,true );
		if($json['code'] == 200){//点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['json'] = $file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	//i友钱空空狐,直播吧 上报
	function submit_14($data,$list){
		$file_contents = $this->request_get($list['submit_url'] . "&idfa=" . $data['idfa']);
		$json = json_decode($file_contents,true );
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if($json['code']==200){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}

	//知聊 排重
	function IdfaRepeat_15($data,$list){
		//$url = "http://wap.lingqianapp.com/cpa/outer/iMoney/repeatVerify?idfa=" . $data['idfa'] ."&adId=3540185";
		$file_contents = $this->request_get($list['IdfaRepeat_url'] . "&idfa=" . $data['idfa']);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
		}else{
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}
	}

	//鼠宝 排重
	function IdfaRepeat_16($data,$list){
		$file_contents = $this->request_get1($list['IdfaRepeat_url'] . "&idfa=" . $data['idfa'].'&ip='.$data['ip']);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die;//这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}

	//鼠宝 上报
	function submit_16($data,$list){
		$file_contents = $this->request_get1($list['submit_url'] . "&idfa=" . $data['idfa']."&ip=".$data['ip']);
		
		$json = json_decode($file_contents,true );
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['success']) && $json['success']){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}

	//叮当快药 点击接口
	function source_17($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$method = "ddky.promotion.aso.pushidfa";
		$key = "1G42595E43F67D5F2EC79D7G1F4GC1CH9";
		$source = "yunju";
		$t = date("Y-m-d h:i:s");
		$v = "1.0";
		$A = "appid" . $data['appid'] . "idfa" . $data['idfa'] . "method" .$method . "source" . $source . "t" . $t . "v". $v;
		$B = $method . $A . $key;
		$sign = strtoupper(md5($B));

		$file_contents = $this->request_get($list['source_url'] . "?appid=" . $data['appid'] . "&idfa=" . $data['idfa'] ."&source=" . $source . "&t=" . urlencode($t) . "&v=" . $v . "&method=" . $method ."&sign=" . $sign . "&callbackurl=" . $callback . "&callBackOpenUrl=" .$callback);
		$json = json_decode($file_contents,true );
		// unset($data['reqtype'], $data['ip'], $data['isbreak'], $data['device'], $data['os'], $data['sign'], $data['callback']);
		if(!$json['code']){ //点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['json'] = $file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	// 叮当快药 排重
	function IdfaRepeat_17($data,$list){
		$method = "ddky.promotion.aso.check";
		$key = "1G42595E43F67D5F2EC79D7G1F4GC1CH9";
		$t = date("Y-m-d h:i:s");
		$v = "1.0";
		$type = 1;
		$A =  "idfa" . $data['idfa'] . "method" .$method  . "t" . $t . "type" . $type . "v". $v;
		$B = $method . $A . $key;
		$sign = strtoupper(md5($B));
		$url = $list['IdfaRepeat_url'] . "?idfa=". $data['idfa'] . "&method=". $method . "&t=". urlencode($t) . "&type=". $type . "&v=". $v . "&sign=" . $sign;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(!$json['code']){
			//成功返回
			if(!$json['result']['isClick']) {
				$a = array($data['idfa']=>'1');//这里返回1代表成功
				$contents = json_encode($a);
				echo  $contents;
			}else{
				echo  json_encode(array($data['idfa']=>'0'));//我们这里返回0代表失败不可做任务
			}

		}else{

			echo  json_encode(array($data['idfa']=>'0'));//我们这里返回0代表失败不可做任务
		}
	}

	//葡萄生活 排重 
	function IdfaRepeat_1012822439($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."?appid=" .  $data['appid'] . "&idfa=" . $data['idfa']);
		$json = json_decode($file_contents,true );
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);

		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{
			echo  json_encode(array($data['idfa']=>'0'));
		}
		
	}

	//葡萄生活   点击
	function source_1012822439($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url']."?appid=" .  $data['appid'] . "&idfa=" . $data['idfa']."&ip=".$data['ip'] . "&reqtype=0" . "&device=no" . "&os=no&isbreak=0" . "&callback=" . $callback;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		//写入log
		if(!$json['code']){//点击成功
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败 
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
		
	}

	//想学就学 排重 
	function IdfaRepeat_1038335549($data,$list){
		$file_contents = file_get_contents($list['IdfaRepeat_url']."?appId=" .  $data['appid'] . "&idfa=" . $data['idfa']);
		$json = json_decode($file_contents,true );
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);

		if(!$json[$data['idfa']]){
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{
			echo  json_encode(array($data['idfa']=>'0'));
		}
		
	}

	//彩鸿彩票 点击
	function source_929542732($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$key = "3969d590121f5e8a61c1bc05893e7f98";
		$csign = md5($data['timestamp'] . $key);//回调地址的sign;
		$url = $list['source_url']."?appid=" .  $data['appid'] . "&idfa=" . $data['idfa']."&ip=".$data['ip'] . "&timestamp=" . $data['timestamp'] . "&sign=" . $csign . "&callback=" . $callback;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		//写入log

		if(!$json['code']){//点击成功
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败 
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
		
	}

	//彩鸿彩票 排重 
	function IdfaRepeat_929542732($data,$list){
		$url = $list['IdfaRepeat_url']."?appid=" .  $data['appid'] . "&idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);

		if(!$json[$data['idfa']]){
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{
			echo  json_encode(array($data['idfa']=>'0'));
		}
		
	}
	
	//王者之剑2 排重 
	function IdfaRepeat_18($data,$list){
		$url = $list['IdfaRepeat_url'] . "&idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);

		if(!$json[$data['idfa']]){
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{
			echo  json_encode(array($data['idfa']=>'0'));
		}
		
	}

	//王者之剑2 点击
	function source_18($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents = $this->request_get($list['source_url'] .  "&idfa=" . $data['idfa'] ."&ip=" . $data['ip'] . "&callback=" . $callback);
		$json = json_decode($file_contents,true );

		if(!$json['code']){ //点击成功
			$id = $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['json'] = $file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	//唔哩 排重 
	function IdfaRepeat_19($data,$list){
		$url = $list['IdfaRepeat_url'] . "&idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);

		if(!$json[$data['idfa']]){
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{
			echo  json_encode(array($data['idfa']=>'0'));
		}
	}

	// 唔哩 上报
	function submit_19($data,$list){
		$url= $list['submit_url'] . "&idfa=" . $data['idfa'] . "&callback=aipu";
		$file_contents = $this->request_get($url);
		echo  json_encode(array('code'=>'0','result'=>'ok'));
	}

	//熊猫金服 排重 
	function IdfaRepeat_1085425362($data,$list){
		$url = $list['IdfaRepeat_url'] . "appid=" . $data['appid'] . "&idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);

		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 1){ // 1代表成功
			$a = array($data['idfa']=>'1');
			$contents = json_encode($a);
			echo  $contents;
		}else{ // 0代表失败
			echo  json_encode(array($data['idfa']=>'0'));
		}
	}

	//熊猫金服 点击
	function source_1085425362($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$key   = 'xiongmaojinfu2016!@#';
		$timestamp  = time();
		$sign  = md5($timestamp.$key);

		$value = 'appid='.$data['appid'].'&idfa='.$data['idfa'].'&ip='.$data['ip'].'&timestamp='.$timestamp.'&sign='.$sign.'&callback='.$callback;
		$file_contents   = $this->request_get($list['source_url'] . $value);

		$json  = json_decode($file_contents,true );
		if(!$json['code']){
			echo $file_contents;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  $file_contents;
		}
	}
	
	//来撩 点击
	function source_1164033983($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		}
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		

		$value = '?idfa='.$data['idfa'].'&ref=4783843014724802A02C6532B76836F1&callback='.$callback;
		$file_contents   = $this->request_get($list['source_url'] . $value);
		//echo $list['source_url'] . $value;

		$json  = json_decode($file_contents,true );
		
		//var_dump($json);
		if(isset($json['ret']) && $json['ret']==0){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//来撩 排重 
	function IdfaRepeat_1164033983($data,$list){
		$url = $list['IdfaRepeat_url'] . "?idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);

		if(isset($json['ret']) && $json['ret'] == 0){ // 1代表成功
			$a = array($data['idfa']=>'1');
			$contents = json_encode($a);
			echo  $contents;
		}else{ // 0代表失败
			echo  json_encode(array($data['idfa']=>'0'));
		}
	}
	
	
	//王者壁纸 点击
	function source_1241619149($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		}
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		//$callback = urlencode($callback);

		

		$value = '?idfa='.$data['idfa'].'&ref=6730E41C8A6445FF9C3BB2A081919BC0&callback='.$callback;
		 // $value['idfa']   = $data['idfa'];
		 // $value['ref']    = '6730E41C8A6445FF9C3BB2A081919BC0';
		// $value['callback']  = $callback;
		$file_contents   = $this->request_get($list['source_url'].$value);
		
		//echo $list['source_url'].$value;
		//echo $list['source_url'] . $value;

		$json  = json_decode($file_contents,true );
		
		//var_dump($json);
		
		//var_dump($json);
		if($json['ret']==0 && isset($json['ret'])){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}


	//现金贷款王 点击
	
	function source_61($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		}
		 
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url ="http://loan.leying.me/index.php/api/ad/add_user_by_app_store?app=".$data['appid']."&idfa=".$data['idfa']."&os=".$data['os']."&ip=".$data['ip']."&from_channel=xiongmaoshiwan&callback=".$callback;
		

		$file_contents   = $this->request_get($url);

		$info            = explode(':',$file_contents);
		$json  = json_decode($file_contents,true);
	
		
		if(in_array('true}',$info)){
		    $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  $file_contents;
		}
	}


	//纳米盒 点击
	function source_62($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

        $url =$list['source_url']."&imei=".$data['idfa']."&vc=".$data['os']."&ip=".$data['ip'].'&user_id=0&udid=&dev_key=c85904e2ca44abc94c489ae52e059383&mac=02:00:00:00:00:00&callback_url='.$callback;
		

		$file_contents   = $this->request_get($url);

		//$info            = explode(':',$file_contents);
		$json  = json_decode($file_contents,true);
	    //var_dump($json);
		
		if(isset($json['code']) && $json['code']==0){
		    $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  $file_contents;
		}
	}

	//纳米盒  排重 
	function IdfaRepeat_62($data,$list){
		$url = $list['IdfaRepeat_url'] . "&idfa=" . $data['idfa'];
		$file_contents = $this->request_get1($url);
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 0){ // 1代表成功
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{ // 0代表失败
			echo  json_encode(array($data['idfa']=>'0'));
		}
	}

	//纳米盒 上报 
	function submit_62($data,$list){
		$url = $list['submit_url'] . "&imei=" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		
		if(isset($json['code']) && $json['code']==0){//上报成功
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}



	//派派猪理财 排重 
	function IdfaRepeat_1073046545($data,$list){
		$url = $list['IdfaRepeat_url'] . "&idfa=" . $data['idfa'];
		$file_contents = $this->request_get1($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 1){ // 1代表成功
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{ // 0代表失败
			echo  json_encode(array($data['idfa']=>'0'));
		}
	}

	//派派猪理财 点击
	function source_1073046545($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$value = '&ifa='.$data['idfa'].'&callback_url='.$callback;
		$file_contents   = $this->request_get1($list['source_url'] . $value);
		$json  = json_decode($file_contents,true );
		if($json['code'] == 200){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  $file_contents;
		}
	}

	//秒赚大钱快 排重 
	function IdfaRepeat_21($data,$list){
		$arr = $this->convertUrlQuery($list['IdfaRepeat_url']);
		$adid = $arr['adid'];
		$channel= 34108;
		$key = "9b4506365436fdb0237e69af9979064d";
		$sign = md5($adid."|".$channel."|".$key);
		$url = $list['IdfaRepeat_url'] . "&idfa=" . $data['idfa'] . "&channel=" . $channel . "&sign=" . $sign;
		

		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);

		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){ // 1代表成功
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{ // 0代表失败
			echo  json_encode(array($data['idfa']=>'0'));
		}
	}

	//秒赚大钱快 点击 
	function source_21($data,$list){
		$arr = $this->convertUrlQuery($list['source_url']);
		$adid = $arr['adid'];
		$asign   = $sign = md5($data['timestamp'].md5('callback'));
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$asign;
		$callback = urlencode($callback);
		$channel= 34108;
		$key = "9b4506365436fdb0237e69af9979064d";
		$sign = md5($adid."|".$channel."|".$key);

		$value = '&idfa='. $data['idfa'] . "&channel=" . $channel . "&ip=" . $data['ip'] . "&sign=" . $sign.'&callbackurl='.$callback;
		

		$file_contents   = $this->request_get($list['source_url'] . $value);
		$json  = json_decode($file_contents,true);

		if(!$json['code'] && $json['result'] == "ok"){
			$this->db->insert('aso_source', $data); 
			echo $file_contents;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  $file_contents;
		}
	}

	//秒赚大钱快 上报 
	function submit_21($data,$list){
		$arr = $this->convertUrlQuery($list['submit_url']);
		$adid = $arr['adid'];
		$channel= 34108;
		$key = "9b4506365436fdb0237e69af9979064d";
		$sign = md5($adid."|".$channel."|".$key);

		$file_contents = $this->request_get($list['submit_url'] . "&idfa=" . $data['idfa'] . "&channel=" . $channel . "&sign=" . $sign);
		$json = json_decode($file_contents,true );
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(!$json['code'] && $json['result'][$data['idfa']]){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}

	//九派新闻 排重
	function IdfaRepeat_1039821793($data,$list){
		$url = $list['IdfaRepeat_url'] . '&appid='. $data['appid'] .'&idfa=' . $data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['code']) && !$json['code']){//点击成功
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;die;
		}else{ // 0代表失败
			echo  json_encode(array($data['idfa']=>'0'));die;
		}
	}


	//九派新闻 点击回调
	function source_1039821793($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url = $list['source_url'] .'&appid='.$data['appid'].'&idfa='.$data['idfa'].'&ip='.$data['ip'].'&timestamp='.$data['timestamp'].'&callback="'.$callback.'"';
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		if(isset($json['code']) && !$json['code']){//点击成功
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	// //九派新闻 上报 
	// function submit_1039821793($data,$list){
	// 	$url = "http://www.jiupaicn.com/indexapp.php"."?m=checkin&c=index&a=idfa_callback&idfa=".$data['idfa'];
	// 	$file_contents = $this->request_get($url);
	// 	$json = json_decode($file_contents,true);
	// 	unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
	// 	if(isset($json['result']) && $json['result']){//上报成功
	// 		$data['timestamp']=time();
	// 		$data['type'] = 1;
	// 		$this->db->insert('aso_submit2',$data);
	// 		echo  json_encode(array('code'=>'0','result'=>'ok'));
	// 	}else{//失败 
	// 		$data['timestamp']=time();
	// 		$data['type'] = 1;
	// 		$data['json'] =$file_contents;
	// 		$this->db->insert('aso_submit_log',$data);
	// 		echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
	// 	}
	// }

	//帮推客 点击回调
	function source_1066805799($data,$list){	
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$time  = time();
		$key   = "btkaso4ios";
		$sign  = md5($key."&&".$time);
		$url = $list['source_url'] .'idfa='.$data['idfa'].'&appid='.$data['appid'].'&ip='.$data['ip'].'&timestamp='.$time.'&callback='.$callback.'&sign='.$sign;

		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		if(isset($json['code']) && !$json['code']){//点击成功
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	//给你花 排重 
	function IdfaRepeat_1076275012($data,$list){
		$url = "http://tongji.99fenqi.com.cn/home/cpa/check?" . "idfa=" . $data['idfa'] . "&appid=" . $data['appid'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
				$a = array($data['idfa']=>'1'); // 1代表成功
				$contents = json_encode($a);
				echo  $contents;
		}else{ 
			echo  json_encode(array($data['idfa']=>'0'));// 0代表失败
		}
	}

	//给你花 点击回调
	function source_1076275012($data,$list){	
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url = "http://tongji.99fenqi.com.cn/home/cpa/tbadd?" .'idfa='.$data['idfa'].'&appid='.$data['appid'].'&channelid=imoney'.'&callback='.$callback;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		if(isset($json['code']) && !$json['code']){//点击成功
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	//多玩 排重
	function IdfaRepeat_22($data,$list){
		$url = $list['IdfaRepeat_url'] ."&idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{ // 0代表失败
			echo  json_encode(array($data['idfa']=>'0'));
		}
	}

	//多玩 上报 
	function submit_22($data,$list){
		$url = $list['submit_url'] . "&idfa=" . $data['idfa'] . "&mac=02:00:00:00:00:00&ip=" . $data['ip'] . "&callback=1" ;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['success']) && $json['success']){//上报成功
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}



	//多玩 排重
	function IdfaRepeat_52($data,$list){
		$url = $list['IdfaRepeat_url'] ."&idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{ // 0代表失败
			echo  json_encode(array($data['idfa']=>'0'));
		}
	}

	//多玩 点击
	function source_52($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url'] . '&idfa=' . $data['idfa'] . "&ip=" . $data['ip'] .'&callback='.$callback;

		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		if(isset($json["success"]) && $json["success"] && $json["message"] == "ok"){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}


	//多玩 排重
	function IdfaRepeat_489($data,$list){
		$url = $list['IdfaRepeat_url'] ."&idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{ // 0代表失败
			echo  json_encode(array($data['idfa']=>'0'));
		}
	}

	//多玩 点击
	function source_489($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		// $id = $this->db->insert('aso_source', $data); 
		// $inid = $this->db->insert_id();
		// $sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		// $callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		// $callback = urlencode($callback);

		$url = $list['source_url'] . '&idfa=' . $data['idfa'] . "&ip=" . $data['ip'].'&callback=123';

		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		if(isset($json["success"]) && $json["success"] && $json["message"] == "ok"){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}


	//九域 排重
	function IdfaRepeat_26($data,$list){
		$url = $list['IdfaRepeat_url'] ."&appid=". $data['appid'] ."&idfa=" . $data['idfa'] . "&clientip=" . $data['ip'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json["success"]) && $json["success"] == "true"){
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{ // 0代表失败
			echo  json_encode(array($data['idfa']=>'0'));
		}
	}

	//九域 点击
	function source_26($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url'] . "&appid=" . $data['appid'] . '&idfa=' . $data['idfa'] . "&clientip=" . $data['ip'] .'&callback='.$callback;
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		if(isset($json["success"]) && $json["success"]){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//闯奇 点击
	function source_27($data,$list){
		// if(empty($data['callback'])){
			// echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		// $id = $this->db->insert('aso_source', $data); 
		/* $inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback); */

		$url = $list['source_url'] . '&idfa=' . $data['idfa'] . "&ip=" . $data['ip'];
		$file_contents   = $this->request_get($url);
		// echo $url;exit;
		// var_dump($file_contents);exit;
		$json  = json_decode($file_contents,true );
		if(isset($json["success"]) && $json["success"]){
			$id = $this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}	
	
	//闯奇 点击
	// function source_27($data,$list){
	// 	if(empty($data['callback'])){
	// 		echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
	// 	}
	// 	$id = $this->db->insert('aso_source', $data); 
	// 	$inid = $this->db->insert_id();
	// 	$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
	// 	$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
	// 	$callback = urlencode($callback);

	// 	$url = $list['source_url'] . '&idfa=' . $data['idfa'] . "&ip=" . $data['ip'];
	// 	$file_contents   = $this->request_get($url);
	// 	$json  = json_decode($file_contents,true );
	// 	if(isset($json["success"]) && $json["success"]){
	// 		echo  json_encode(array('code'=>'0','result'=>'ok'));die;
	// 	}else{
	// 		$data['json'] =$file_contents;
	// 		$this->db->insert('aso_source_log', $data); 
	// 		echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
	// 	}
	// }

	//闯奇分包排重
	function IdfaRepeat_27($data,$list){
		if(!isset($data['ip'])){
			echo  json_encode(array('error'=>'ip error'));die;
		}
		$file_contents = file_get_contents($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&ip=".$data['ip']);
		$json = json_decode($file_contents,true );
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
			}else{
				//成功返回
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
			}
	}

	//闯奇分包上报
	function submit_27($data,$list){
		if(!isset($data['ip'])){
			echo  json_encode(array('error'=>'ip error'));die;
		}

		$file_contents = $this->request_get($list['submit_url']. "&idfa=".$data['idfa']."&ip=".$data['ip']);
		$json = json_decode($file_contents,true );
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if($json['success']){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
			}else{//失败 
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			}
	}

	//两只老虎理财 排重 
	function IdfaRepeat_939542594($data,$list){
		$url = "https://www.twotiger.com/channel/repeat/aiyingli?" . "appid=" . $data['appid'] . "&idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]){ // 1代表成功
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{ // 0代表失败
			echo  json_encode(array($data['idfa']=>'0'));
		}
	}

	//两只老虎理财 点击
	function source_939542594($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$key   = '042460293a7f991d9c2c6c175d190d33';
		$time  = time();
		$sign  = md5($time.$key);

		$url = "https://www.twotiger.com/channel/repeat/aiyingliClick?" . "appid=" . $data['appid'] ."&sign=" . $sign . '&idfa=' . $data['idfa'] . "&ip=" . $data['ip'] . "&timestamp=" . $time  . '&callback='.$callback;
		$file_contents   = $this->request_get($url);
		$json = json_decode($file_contents,true);
		if(isset($json["code"]) && !$json["code"]){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//柚子众测 排重
	function IdfaRepeat_28($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true );
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//柚子众测 点击
	function source_28($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url'] . '&idfa=' . $data['idfa'] . "&ip=" . $data['ip']."&callback=".$callback;
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		if(isset($json["status"]) && $json["status"]){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//柚子众测 上报
	function submit_28($data,$list){
		$url = $list['submit_url'] .'&idfa='.$data['idfa'];
		//echo $url;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//var_dump($json);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if($data['appid'] == 327313778) {
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);

				$data['json'] = $file_contents;
				$this->db->insert('aso_submit_log',$data);

				echo  json_encode(array('code'=>'0','result'=>'ok'));
				exit;
		}
		if($json['status']){//上报成功
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			}
	}

	//新柚子众测 排重
	function IdfaRepeat_281($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa'].'&ip='.$data['ip']);
		$json = json_decode($file_contents,true );
		//echo $list['IdfaRepeat_url']."&idfa=".$data['idfa'].'&ip='.$data['ip'];
		//var_dump($json);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1

		if(isset($json['data'][$data['idfa']]) && $json['data'][$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}
	//新柚子众测 点击
	function source_281($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url'] . '&idfa=' . $data['idfa'] . "&ip=" . $data['ip']."&callback=".$callback;
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		if(isset($json["status"]) && $json["status"]){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//新柚子众测 上报
	function submit_281($data,$list){
		$url = $list['submit_url'] .'&idfa='.$data['idfa'];
		//echo $url;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		
		//var_dump($json);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if($data['appid'] == 327313778) {
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);

				$data['json'] = $file_contents;
				$this->db->insert('aso_submit_log',$data);

				echo  json_encode(array('code'=>'0','result'=>'ok'));
				exit;
		}
		if(isset($json['status']) && $json['status']){//上报成功
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			}
	}
	
	//9188信用卡管家 排重 
	function IdfaRepeat_1028337053($data,$list){
		$url = "http://iphone.app.huishuaka.com/credit/checkIdfa.go?" . "appid=" . $data['appid'] . "&idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){ // 1代表成功
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{ // 0代表失败
			echo  json_encode(array($data['idfa']=>'0'));
		}
	}

	//快感锁屏 排重
	// function IdfaRepeat_29($data,$list){
	// 	$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&ip=".$data['ip']);
	// 	$json = json_decode($file_contents,true );
	// 	//写入log
	// 	$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
	// 	$this->db->insert('aso_IdfaRepeat_log',$log);
	// 	//渠道返回：成功返回0  失败返回1
	// 	if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
	// 		echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
	// 	}else{
	// 		$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
	// 		$contents = json_encode($a);
	// 		echo  $contents;
	// 	}
	// }
	//快感锁屏 排重
	function IdfaRepeat_29($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&ip=".$data['ip']);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			$sql = "select count(*) as s from aso_IdfaRepeat where appid = ".$data['appid'] . " and ip='".$data['ip']."'";
			$res = $this->db->query($sql);
			$one = $res->row_array();//查出来的是厂商app的信息
			if($one['s'] > 0) {
				$log['ip'] = $data['ip'];
				$this->db->insert('aso_IdfaRepeat',$log);
				echo  json_encode(array($data['idfa']=>'2')); //这里返回1代表成功
			}else{
				$log['ip'] = $data['ip'];
				$this->db->insert('aso_IdfaRepeat',$log);
				echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功	
			}
		}else{
			$this->db->insert('aso_IdfaRepeat_log',$log);
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}
	//快感锁屏 点击
	function source_29($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url'] .'&idfa=' . $data['idfa'] . "&ip=" . $data['ip']."&mac=02:00:00:00:00:00"."&callbackurl=".$callback;
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		if(isset($json["success"]) && $json["success"]){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//快感锁屏 上报
	function submit_29($data,$list){
		$url = $list['submit_url'] .'&idfa='.$data['idfa']."&ip=".$data['ip'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if(isset($json['success']) && $json['success']){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
			}else{//失败 
				unset($list['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			}
	}

	//纷熙移动 上报
	function source_30($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url'] .'&idfa=' . $data['idfa'] ."&callback=" . $callback;
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		if(isset($json["rc"]) && $json["rc"] == 200){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//钱夹 排重
	function IdfaRepeat_31($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&user_ip=".$data['ip']);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		$r = (string)$json["success"];
		//渠道返回：成功返回0  失败返回1
		if(isset($json["success"]) && $r === "true"){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//钱夹 点击
	function source_31($data,$list){
		if($data['appid'] == 1010521665) {
			// echo 1;exit;
			$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&user_ip=".$data['ip']."&iosver=" . $data['os']);
			$json = json_decode($file_contents,true);
			$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
			$this->db->insert('aso_IdfaRepeat_log',$log);
			$r = (string)$json["success"];
			//渠道返回：成功返回0  失败返回1
			if(isset($json["success"]) && $r != "true"){
				echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
			}
		}
		$url = $list['source_url'] .'&idfa=' . $data['idfa'] ."&user_ip=" . $data['ip'];
		$file_contents = $this->request_get($url);
		// $json  = json_decode($file_contents,true );
		$this->db->insert('aso_source', $data); 
		echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		// if(!empty($file_contents)){
		// 	$this->db->insert('aso_source', $data); 
		// 	echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		// }else{
		// 	$data['json'] =$file_contents;
		// 	$this->db->insert('aso_source_log', $data); 
		// 	echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		// }
	}

	//钱夹 上报
	function submit_31($data,$list){
		$url = $list['submit_url'] .'&idfa='.$data['idfa']."&user_ip=".$data['ip'];
		$file_contents = $this->request_get($url);

		// $json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		$data['timestamp']=time();
		$data['type'] = 1;
		$this->db->insert('aso_submit2',$data);
		echo  json_encode(array('code'=>'0','result'=>'ok'));
		// if($json['result'] == 1){//上报成功
		// 		$data['timestamp']=time();
		// 		$data['type'] = 1;
		// 		$this->db->insert('aso_submit2',$data);
		// 		echo  json_encode(array('code'=>'0','result'=>'ok'));
				
		// 	}else{//失败 
		// 		unset($list['ip']);
		// 		$data['timestamp']=time();
		// 		$data['type'] = 1;
		// 		$data['json'] =$file_contents;
		// 		$this->db->insert('aso_submit_log',$data);
		// 		echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		// 	}
	}

	//磨盘 排重
	function IdfaRepeat_32($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//磨盘 点击
	function source_32($data,$list){
		$url = $list['source_url'] .'&idfa=' . $data['idfa'] ."&clientIp=" . $data['ip'];
		$file_contents = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		$this->db->insert('aso_source', $data); 
		echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		// if(!empty($file_contents)){
		// 	$this->db->insert('aso_source', $data); 
		// 	echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		// }else{
		// 	$data['json'] =$file_contents;
		// 	$this->db->insert('aso_source_log', $data); 
		// 	echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		// }
	}

	//姑婆 排重
	function IdfaRepeat_33($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		
		//渠道返回：成功返回0  失败返回1
		if(isset($json['msg']) && $json['msg']==0){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//姑婆 点击
	function source_33($data,$list){

		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;

		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url = $list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&os_version=".$data['os']."&mac=02:00:00:00:00:00&callback_url=".$callback;

		$file_contents = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		
		if($json['status']==1){
			
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}


	// 动信通 排重
	function IdfaRepeat_34($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		
		//渠道返回：成功返回0  失败返回1
		if(isset($json['code']) && $json['code']==1000 && $json['data'][$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//动信通 排重
	function IdfaRepeat_341($data,$list){
		$url = $list['IdfaRepeat_url']. "&idfa=".$data['idfa'];
		$file_contents = $this->request_get($url);
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		//写入log
		
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($data['appid']==1159576400){
			if(isset($json[$data['idfa']]) && $json[$data['idfa']]==0){
			     echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
			}else{
				$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;exit();
			}
		}
		
		if(isset($json['code']) && $json['code'] == 0 && $json['data']['status'][$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//动信通点击
	function source_341($data,$list){
		
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);


		$url = $list['source_url'] ."&idfa=".$data['idfa']."&callback=".$callback;

		// $file_contents = file_get_contents($url);

		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		
		if(isset($json['code']) && $json['code'] == 0){
			 $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}



	// 有鱼记账 排重
	function IdfaRepeat_35($data,$list){
		$res['asoAppid']  = $data['appid'];
		$res['idfa']      = $data['idfa'];
		$res['timestamp'] = time();
		$res['signMsg']   = strtoupper(md5('appid='.$data['appid'].'&idfa='.$data['idfa'].'&timestamp='.time().'&key=youyuidfa?!'));
		$res['key']       = 'youyuidfa?!';
		$file_contents = $this->request_post($list['IdfaRepeat_url'],$res);
		$json = json_decode($file_contents,true);
		//var_dump($json);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		
		//渠道返回：成功返回0  失败返回1
		if(isset($json['code']) && $json['code']==1 && $json['results'][$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}
	// 有鱼记账 点击
	function source_35($data,$list){

		// $id = $this->db->insert('aso_source', $data); 
		// $inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;

		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$res['pburl']            = $callback;
		$res['idfa']             = $data['idfa'];
		$res['asoAppid']         = $data['appid'];
		$res['download_source']  = 'apyb';
		
		
		$file_contents = $this->request_post($list['source_url'],$res);
		
		$json  = json_decode($file_contents,true );
		
		if(isset($json['code']) && $json['code']==1){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}



	

	

	//合拍 排重
	function IdfaRepeat_1063930809($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//合拍 点击
	function source_1063930809($data,$list){
		$url = $list['source_url'] .'&idfa=' . $data['idfa'] ."&ip=" . $data['ip'];
		$file_contents = $this->request_get($url);
		$json  = json_decode($file_contents,true );

		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//合拍 上报
	function submit_1063930809($data,$list){
		$url = "http://api.quhepai.com/ad/task/commit?bid=com.HePai.HePaiiOS&source=aiyingli01" .'&idfa='.$list['idfa']."&ip=".$list['ip'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		unset($list['sign'],$list['ip'],$list['reqtype'],$list['isbreak'],$list['device'],$list['os'],$list['callback']);

		if($json['result'] == 1){//上报成功
				$list['timestamp']=time();
				$list['type'] = 1;
				$this->db->insert('aso_submit2',$list);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($list['ip']);
				$list['timestamp']=time();
				$list['type'] = 1;
				$list['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$list);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	//骑记 排重
	function IdfaRepeat_596677920($data,$list){
		$secret = "1f7f566c0f35547f8f06c1651787be48";
		$app_id = "101000006";
		$headers['Authorization'] = $this->getSignature($secret, $app_id);
		$idfa = json_encode(array($data['idfa']));
		$url = $list['IdfaRepeat_url']."?app_id=".$app_id."&idfas=".$idfa;
		$file_contents = $this->request_get2($url, $headers);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//HIGO 排重
	function IdfaRepeat_938596958($data,$list){
		$req = array("appid"=>$data['appid'], "idfa"=>$data['idfa']);
		$file_contents = $this->request_post($list['IdfaRepeat_url'], $req);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//HIGO 点击
	function source_938596958($data,$list){
		$req = array("appid"=>$data['appid'], "idfa"=>$data['idfa'], "ip"=>$data['ip']);
		$file_contents = $this->request_post($list['source_url'], $req);
		$json  = json_decode($file_contents,true );

		if(isset($json['errno']) && !$json['errno']){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//白送 排重
	function IdfaRepeat_946463073($data,$list){
		$url = $list['IdfaRepeat_url'] . "appid/" .$data['appid'] . "/idfa/" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//白送 上报
	function source_946463073($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url = $list['source_url'] . "&appid=" . $data['appid'] . '&idfa=' . $data['idfa'] ."&callback=" . $callback;
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		if(isset($json["code"]) && !$json["code"]){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//兼客兼职 点击回调
	function source_982754793($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		
		$sign = md5($data['timestamp'].'dc9bd2d04d8003b313edc2581d056db5');//回调地址的sign;
		
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".md5($data['timestamp'].md5('callback'));
		
		$callback = urlencode($callback);

		$url = $list['source_url'] . "?appid=" . $data['appid'] . '&timestamp='.$data['timestamp'].'&idfa=' . $data['idfa'] ."&callback=" . $callback.'&sign='.$sign.'&ip='.$data['ip'];
		
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
	
		if($json["isActivate"]==0 && $json["errCode"]==0){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}
	//兼客兼职 点击回调
	function source_42($data,$list){
		$this->source_982754793($data,$list);
	}

	//58同城 排重
	function IdfaRepeat_480079300($data,$list){
		$url = $list['IdfaRepeat_url'] . "?appid=" . $data['appid'] . "&idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//58同城 点击 老接口
	// function source_480079300($data,$list){
	// 	$url = $list['source_url'] . '&idfa=' . $data['idfa'] ;
	// 	$file_contents   = $this->request_get($url);
	// 	// $json  = json_decode($file_contents,true);
	// 	unset($data['mac']);
	// 	if(isset($file_contents) && $file_contents == "true"){
	// 		$this->db->insert('aso_source', $data); 
	// 		echo  json_encode(array('code'=>'0','result'=>'ok'));die;
	// 	}else{
	// 		$data['json'] =$file_contents;
	// 		$this->db->insert('aso_source_log', $data); 
	// 		echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
	// 	}
	// }
	//58新接口
	function source_480079300($data,$list){
		
		// $id = $this->db->insert('aso_source', $data); 
		// $inid = $this->db->insert_id();
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".md5($data['timestamp'].md5('callback'));
		$res= "[{'ost':3,'uuid':'{$data['idfa']}','osn':'{$data['device']}','osv':'{$data['os']}','ip':'{$data['ip']}','callback':'{$callback}'}]";
		// $res[]['ost']      = 3;
		// $res[]['uuid']     = $data['idfa'];
		// $res[]['osn']      = $data['device'];
		// $res[]['osv']      = $data['os'];
		// $res[]['ip']       = $data['ip'];
		// $res[]['callback'] = $callback;
		
	   list($t1, $t2) = explode(' ', microtime());
       $datetime      = explode('.',$t2 . '.' .  ceil( ($t1 * 1000) ))[0].explode('.',$t2 . '.' .  ceil( ($t1 * 1000) ))[1];

		$data_al['params']  = urlencode($res);
		//var_dump(json_encode($res));
       //$data_al['params']  = json_encode($res);
		$data_al['app']     = 'aipuyoubang';
		$data_al['ts']		= $datetime;
		//模拟get
		
		$file_contents      = $this->request_post('http://appces.58.com/notice',$data_al);

		//var_dump($data_al);
		// echo $data_al['ts'];
		// var_dump($res);
		$json               = json_decode($file_contents,true);
		
		
		if($json['code']==0 && !empty($json['data']) && $json['data'][0]['status']==0){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//58同城 上报
	function submit_480079300($data,$list){
		$url = "http://app.58.com/api/log/api/thirdplat/queryActive?".'&idfa='.$list['idfa'];
		$file_contents = $this->request_get($url);
		// $json = json_decode($file_contents,true);
		unset($list['sign'],$list['ip'],$list['reqtype'],$list['isbreak'],$list['device'],$list['os'],$list['callback']);
		if(isset($file_contents) && (int)$file_contents == 1){//上报成功
			$list['timestamp']=time();
			$list['type'] = 1;
			$this->db->insert('aso_submit2',$list);
			echo  json_encode(array('code'=>'0','result'=>'ok'));				
		}else{//失败 
			unset($list['ip']);
			$list['timestamp']=time();
			$list['type'] = 1;
			$list['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$list);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}

	//掌中二手房 排重
	function IdfaRepeat_1164444550($data,$list){
		$url = $list['IdfaRepeat_url'] . "&idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['code']) && $json['code'] == 200 && !$json['error'] && !$json['data']['status']){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//一伴婚恋 排重
	
	function IdfaRepeat_20($data,$list){
		$time = time();
		if(explode('&',$list['IdfaRepeat_url'])[1]=='idfa_channel=ayl'){
		
			$key = 'idfachannelaylkeytitletimestamp';
		}else{
			$key = 'idfachannelkuchuankeytitletimestamp';
		}
		$joint = "idfa" . str_replace("-","",$data['idfa']) . $key . $time;
		// echo $joint;
	    $a = md5("fidfas" . $joint ."9id8jo90");
		$sign = md5("3i45" . $a . "bffffak");
		$url = $list['IdfaRepeat_url'] . "&idfa=" . $data['idfa'] . "&sign=".$sign."&timestamp=".$time;
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>$time);
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//一伴婚恋 排重
	function submit_20($data,$list){
		$time = time();
		if(explode('&',$list['submit_url'])[1]=='idfa_channel=ayl'){
		
			$key = 'idfachannelaylkeytitletimestamp';
		}else{
			$key = 'idfachannelkuchuankeytitletimestamp';
		}
		
		$joint = "idfa" . str_replace("-","",$data['idfa']) . $key . $time;
	    $a = md5("fidfas" . $joint ."9id8jo90");
		$sign = md5("3i45" . $a . "bffffak");
		$url = $list['submit_url'] .'&idfa='.$data['idfa']."&timestamp=" . $time."&sign=".$sign;
		;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		
		if(isset($json['state']) && $json['state'] == 1){//上报成功
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败 
			unset($data['ip']);
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}


	//樱花婚恋 排重
	function IdfaRepeat_970($data,$list){
		$time = time();
		$joint = "idfa" . str_replace("-","",$data['idfa']) . "idfachannelaylkeytitletimestamp" . $time;
		// echo $joint;
	    $a = md5("fidfas" . $joint ."9id8jo90");
		$sign = md5("3i45" . $a . "bffffak");
		$url = $list['IdfaRepeat_url'] . "&idfa=" . $data['idfa'] . "&sign=".$sign."&timestamp=".$time;
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>$time);
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//樱花婚恋 排重
	function submit_970($data,$list){
		$time = time();
		$joint = "idfa" . str_replace("-","",$data['idfa']) . "idfachannelaylkeytitletimestamp" . $time;
	    $a = md5("fidfas" . $joint ."9id8jo90");
		$sign = md5("3i45" . $a . "bffffak");
		$url = $list['submit_url'] .'&idfa='.$data['idfa']."&idfa_channel=ayl". "&timestamp=" . $time."&sign=".$sign;
		
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if(isset($json['state']) && $json['state'] == 1){//上报成功
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败 
			unset($data['ip']);
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}
	
	//店长直聘 排重
	function IdfaRepeat_1063270170($data,$list){
		$url = "https://dianzhangm.zhipin.com/api/integralWall/v2/exist.json";
		 $tmpArr = array('dzzp#aiyingli^',time());
        sort($tmpArr, SORT_STRING);
        $tmpStr = implode($tmpArr);
        $tmpStr = md5($tmpStr);
		
		$res['idfa']=$data['idfa'];
		$res['ip']=$data['ip'];
		$res['mac']='02:00:00:00:00:00';
		$res['source']='aiyingli';
		$res['timestamp']=time();
		$res['signature']=$tmpStr;
		$file_contents = $this->request_post($url,$res);
		//echo $file_contents;
		$json = json_decode($file_contents,true);
		
		//var_dump($json);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']] && $json['rescode']==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	//店长直聘 点击
	function source_1063270170($data,$list){
		
		$tmpArr = array('dzzp#aiyingli^',$data['timestamp']);
        sort($tmpArr, SORT_STRING);
        $tmpStr = implode($tmpArr);
        $tmpStr = md5($tmpStr);
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		// $url = $list['source_url'].'?idfa='.$data['idfa']."&appid=".$data['appid'].'&ip='.$data['ip']."&callback=".$callback.'&timestamp='.$data['timestamp'].'&source=aiyingli&signature='.$tmpStr.'&sign='.md5($data['timestamp'].'dzzp#aiyingli^');
		$data_al['idfa']      = $data['idfa'];
		$data_al['callback']  = $callback;
		$data_al['source']    = 'aiyingli';
		$data_al['signature'] = $tmpStr;
		$data_al['sign']      = md5($data['timestamp'].'dzzp#aiyingli^');
		$data_al['timestamp'] = $data['timestamp'];
		$file_contents        = $this->request_post($list['source_url'],$data_al);
		$json                 = json_decode($file_contents,true );
		
		if(isset($json["rescode"]) && $json["rescode"]==0){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//你我贷借款快速版 上报
	function source_1002349259($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url = "http://openapi2.niwodai.com/external/landpageByApp.do?pageid=E3000001768103457&mac=&pushType=1&ifa=".$data['idfa']."&callbackUrl=".$callback;
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		if(isset($json["success"]) && $json["success"]){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//集聘 排重
	function IdfaRepeat_1034698888($data,$list){
		$str='';
		$surl ='';
		list($t1, $t2) = explode(' ', microtime());
		$time= $t2 .  ceil( ($t1 * 1000) );
		$arr = array('app_id'=> 4050,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0');
		foreach ($arr as $key => $value) {
			$surl .=$key.'='.$value.'&';
		}
		ksort($arr);
		foreach ($arr as $key => $value) {
			$str.=$key.'='.$value;
		}
		$sig='V2.0' . MD5('/api/integralWall/idfaExist'.$str.'b4c64402a3e858c6d725f05c5a1ca097');
		$url='https://api.bosszhipin.com/api/integralWall/idfaExist?'.$surl.'sig='.$sig;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		if($json[$data['idfa']]==1){
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}else{
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}

	}

	//集聘 点击
	function source_1034698888($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback error"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$str='';
		list($t1, $t2) = explode(' ', microtime());
		$time= $t2 .  ceil( ($t1 * 1000) );
		$arr = array('app_id'=> 4050,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0','ip'=>$data['ip'],'source'=>'aiyingli1','callback'=>$callback,'mac'=>'none','openUdid'=>'none');
		ksort($arr);
		foreach ($arr as $key => $value) {
			$str.=$key.'='.$value;
		}
		$sig='V2.0' . MD5('/api/integralWall/save8090'.$str.'b4c64402a3e858c6d725f05c5a1ca097');
		$arr2 = array('app_id'=> 4050,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0','ip'=>$data['ip'],'source'=>'aiyingli1','callback'=>$callback,'mac'=>'none','openUdid'=>'none','sig'=>$sig);
		$url='https://api.bosszhipin.com/api/integralWall/save8090';
		$file_contents = $this->request_post($url,$arr2);
		$json = json_decode($file_contents,true );
		if(isset($json['status']) && $json['status']==1){//点击成功
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	//茄客 排重
	function IdfaRepeat_40($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&appid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']);
		$json = json_decode($file_contents,true);
		// print_r($file_contents);exit;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']] && !$json['errno']){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//茄客 点击
	function source_40($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		// $inid = $this->db->insert_id();
		// $sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		// $callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		// $callback = urlencode($callback);

		$url = $list['source_url'] . "&appid=".$data['appid'].'&idfa=' . $data['idfa'] . "&ip=" . $data['ip']; //"&callback=".$callback
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		if(isset($json["errno"]) && !$json["errno"]){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//茄客 上报
	function submit_40($data,$list){
		$url = $list['submit_url'] ."&appid=".$data['appid'].'&idfa=' . $data['idfa'] . "&ip=" . $data['ip'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json["errno"]) && !$json["errno"]){//上报成功
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			}
	}

	//今日影视大全 排重
	function IdfaRepeat_41($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."appid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']);
		$json = json_decode($file_contents,true);
		// print_r($file_contents);exit;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 1){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//今日影视大全 点击
	function source_41($data,$list){
		$url = $list['source_url'] . "&appid=".$data['appid'].'&idfa=' . $data['idfa'] . "&ip=" . $data['ip']; 
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		if(isset($json["code"]) && !$json["code"]){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//今日影视大全 激活
	function submit_41($data,$list){
		$url = $list['submit_url'] ."appid=".$data['appid'].'&idfa=' . $data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json["active"]) && $json["active"] == 1){//上报成功
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}

	//彩票123 排重
	function IdfaRepeat_1170417552($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//花生票号 排重
	function IdfaRepeat_1175896983($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."appid=".$data['appid']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);
		// print_r($list['IdfaRepeat_url']."appid=".$data['appid']."&idfa=".$data['idfa']);exit;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 1){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//花生票号 点击
	function source_1175896983($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$key = "06fecdea213b40aa231ca49c2fea9bf4";
		$request_sign = md5($data['timestamp'] . $key);
		$url = $list['source_url'] . "appid=".$data['appid'].'&idfa=' . $data['idfa'] . "&ip=" . $data['ip']."&timestamp=" . $data['timestamp'] . "&sign=" . $request_sign . "&callback=".$callback;

		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		if(isset($json['code']) && !$json['code']){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//boss直聘极速版 排重
	function IdfaRepeat_1035209386($data,$list){
		$str='';
		$surl ='';
		list($t1, $t2) = explode(' ', microtime());
		$time= $t2 .  ceil( ($t1 * 1000) );
		$arr = array('app_id'=> 4053,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0');
		foreach ($arr as $key => $value) {
			$surl .=$key.'='.$value.'&';
		}
		ksort($arr);
		foreach ($arr as $key => $value) {
			$str.=$key.'='.$value;
		}
		$sig='V2.0' . MD5('/api/integralWall/idfaExist'.$str.'b4c64402a3e858c6d725f05c5a1ca097');
		$url='https://api.bosszhipin.com/api/integralWall/idfaExist?'.$surl.'sig='.$sig;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
		}else{
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}

	}

	//boss直聘极速版 点击
	function source_1035209386($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback error"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$str='';
		list($t1, $t2) = explode(' ', microtime());
		$time= $t2 .  ceil( ($t1 * 1000) );
		$arr = array('app_id'=> 4053,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0','ip'=>$data['ip'],'source'=>'aiyingli1','callback'=>$callback,'mac'=>'none','openUdid'=>'none');
		ksort($arr);
		foreach ($arr as $key => $value) {
			$str.=$key.'='.$value;
		}
		$sig='V2.0' . MD5('/api/integralWall/save8090'.$str.'b4c64402a3e858c6d725f05c5a1ca097');
		$arr2 = array('app_id'=> 4053,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0','ip'=>$data['ip'],'source'=>'aiyingli1','callback'=>$callback,'mac'=>'none','openUdid'=>'none','sig'=>$sig);
		$url='https://api.bosszhipin.com/api/integralWall/save8090';
		$file_contents = $this->request_post($url,$arr2);
		$json = json_decode($file_contents,true );
		if(isset($json['status']) && $json['status']==1){//点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
		
		
	}


	//boss名企直聘 排重
	function IdfaRepeat_1036059009($data,$list){
		$str='';
		$surl ='';
		list($t1, $t2) = explode(' ', microtime());
		$time= $t2 .  ceil( ($t1 * 1000) );
		$arr = array('app_id'=> 4060,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0');
		foreach ($arr as $key => $value) {
			$surl .=$key.'='.$value.'&';
		}
		ksort($arr);
		foreach ($arr as $key => $value) {
			$str.=$key.'='.$value;
		}
		$sig='V2.0' . MD5('/api/integralWall/idfaExist'.$str.'b4c64402a3e858c6d725f05c5a1ca097');
		$url='https://api.bosszhipin.com/api/integralWall/idfaExist?'.$surl.'sig='.$sig;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
		}else{
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}

	}

	//boss名企直聘 点击
	function source_1036059009($data,$list){
		if(empty($data['callback'])){
			echo'{"resultCode":-1,"errorMsg":"callback error"}'; die;  
		}
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$str='';
		list($t1, $t2) = explode(' ', microtime());
		$time= $t2 .  ceil( ($t1 * 1000) );
		$arr = array('app_id'=> 4060,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0','ip'=>$data['ip'],'source'=>'aiyingli1','callback'=>$callback,'mac'=>'none','openUdid'=>'none');
		ksort($arr);
		foreach ($arr as $key => $value) {
			$str.=$key.'='.$value;
		}
		$sig='V2.0' . MD5('/api/integralWall/save8090'.$str.'b4c64402a3e858c6d725f05c5a1ca097');
		$arr2 = array('app_id'=> 4060,'req_time'=>$time,'uniqid'=>'9080app','idfa'=>$data['idfa'],'v'=>'2.0','ip'=>$data['ip'],'source'=>'aiyingli1','callback'=>$callback,'mac'=>'none','openUdid'=>'none','sig'=>$sig);
		$url='https://api.bosszhipin.com/api/integralWall/save8090';
		$file_contents = $this->request_post($url,$arr2);
		$json = json_decode($file_contents,true );
		if(isset($json['status']) && $json['status']==1){//点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
		
		
	}
	
	//腰果公考 排重
	function IdfaRepeat_849590697($data,$list){
		$file_contents = $this->request_get("http://spark.appublisher.com/plain/aso_filter?sign=be469353d12a682f1ce73e3b9e1dff73"."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 1){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//中海金融交易 排重
	function IdfaRepeat_42($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."?appid=".$data['appid']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//禅大师 排重
	function IdfaRepeat_43($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&appid=".$data['appid']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//禅大师 激活
	function submit_43($data,$list){
		$url = $list['submit_url'] ."&appid=".$data['appid'].'&idfa=' . $data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json["success"]) && $json["success"]){//上报成功
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}
	//快友 点击回调
	function source_44($data,$list){
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&idfa=".$data['idfa']."&mac=02:00:00:00:00:00&ip=".$data['ip']."&callback=".$callback.'&os='.$data['os']."&useragent=&skip=0&openudid=");
		//echo $list['source_url']."&idfa=".$data['idfa']."&mac=02:00:00:00:00:00&ip=".$data['ip']."&callback=".$callback.'&os='.$data['os']."&useragent=&skip=0&openudid=";
		 
		$json  = json_decode($file_contents,true );

		if(isset($json['res']) && $json['res'] == 1){
			// $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	//快友 排重
	function IdfaRepeat_44($data,$list){
		$res['idfa']   = $data['idfa'];
		$res['appid']  = $data['appid'];
		$file_contents = $this->request_post($list['IdfaRepeat_url'],$res);
		
		$json = json_decode($file_contents,true);

		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//饿了么 点击
	function source_507161324($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$res['idfa']       = $data['idfa'];
		$res['os']         = $data['os'];
		$res['ip']         = $data['ip'];
		$res['token']      = 'ImFpeWluZ2xpIg.IyoAzP4pqFLOOV0e-Vh1Xi6YWq0';
		$res['come_from']  = 'aiyingli';

		$file_contents   = $this->request_post($list['source_url'],$res);
		// print_r($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback);exit;
		$json  = json_decode($file_contents,true );
		//var_dump($json);
		if(isset($json['message']) && $json['message'] == 'ok'){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//饿了么 排重
	function IdfaRepeat_507161324($data,$list){
		
		
		$res['idfa']       = $data['idfa'];
		
		$res['token']      = 'ImFpeWluZ2xpIg.IyoAzP4pqFLOOV0e-Vh1Xi6YWq0';
		$res['come_from']  = 'aiyingli';

		$file_contents   = $this->request_post($list['IdfaRepeat_url'],$res);
		// print_r($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback);exit;
		$json  = json_decode($file_contents,true );
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//var_dump($json);
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 0){
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}
	// 悦动圈 排重
	function IdfaRepeat_872341407($data,$list)
	{
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//悦动圈 点击
	function source_872341407($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url'] . '&idfa=' . $data['idfa'] . "&callback=".$callback;
// print_r($url);exit;
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		if(isset($json['code']) && !$json['code']){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//触金 排重
	function IdfaRepeat_45($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&ip=".$data['ip']);
		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}

	//触金 点击
	function source_45($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url'] .'&idfa=' . $data['idfa'] ."&ip=".$data['ip']."&returnUrl=" . $callback;
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		if(isset($json["Error"]) && !$json["Error"]){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//触金 激活
	function submit_45($data,$list){
		$url = $list['submit_url'] .'&idfa=' . $data['idfa'] ."&ip=".$data['ip'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json["Error"]) && !$json["Error"]){ //上报成功
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;//这里返回1代表成功
		}
	}

	// 星觅 排重
	function IdfaRepeat_1156387816($data,$list)
	{
		$param = array();
		$param['appleid'] = $data['appid'];
		$param['idfa'] = $data['idfa'];
		$param['source'] = "aiyingli";
		$file_contents = $this->request_post($list['IdfaRepeat_url'], $param);
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json["status"] && !$json["idfa"]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}

	//星觅 点击
	function source_1156387816($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		// $callback = urlencode($callback);

		$param = array();
		$param['appleid'] = $data['appid'];
		$param['idfa'] = $data['idfa'];
		$param['callback'] = $callback;
		$param['source'] = "aiyingli";
		$url = $list['source_url'];

		$file_contents   = $this->request_post($list['source_url'], $param);

		$json  = json_decode($file_contents,true);

		if(isset($json['status']) && !$json['status']){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] = $file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	

	

	// 赶集 排重
	function IdfaRepeat_388932995($data,$list)
	{
		$params = array();
		$params['appid'] = $data['appid'];
		$params['idfa'] = $data['idfa'];
		$params['source'] = "aiyingli";
		$params['customer_id'] = 705;
		// print_r($params);
		// $signature = $this->getSign($params,"6R8VToJVOr76!2HnP7V4sStM8imwY9");
		$secretKey = "6R8VToJVOr76!2HnP7V4sStM8imwY9";
		$paramStr = $this->buildParamStr( $params );
		$sign = base64_encode( hash_hmac( 'sha1', $paramStr, $secretKey) );

		$url = "http://app.ganji.com/openapi/Apptask?action=query&source=aiyingli&customer_id=705"."&appid=".$data['appid']."&idfa=".$data['idfa']."&signature=".$sign;
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json["data"] && !$json["data"][$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}


	//赶集 点击
	function source_388932995($data,$list){
		$params = array();
		$params['appid'] = $data['appid'];
		$params['idfa'] = $data['idfa'];
		$params['source'] = "aiyingli";
		$params['customer_id'] = 705;

		$secretKey = "6R8VToJVOr76!2HnP7V4sStM8imwY9";
		$paramStr = $this->buildParamStr( $params );
		$sign = base64_encode( hash_hmac( 'sha1', $paramStr, $secretKey) );

		$url = "http://app.ganji.com/openapi/Apptask?action=download&source=aiyingli&customer_id=705"."&appid=".$data['appid']."&idfa=".$data['idfa']."&signature=".$sign;
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true);

		if(isset($json['data']) && $json['data'][$data['idfa']]){
			$id = $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] = $file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//赶集 排重
	function submit_388932995($data,$list){
		$params = array();
		$params['appid'] = $list['appid'];
		$params['idfa'] = $list['idfa'];
		$params['source'] = "aiyingli";
		$params['customer_id'] = 705;
		// print_r($params);
		// $signature = $this->getSign($params,"6R8VToJVOr76!2HnP7V4sStM8imwY9");
		$secretKey = "6R8VToJVOr76!2HnP7V4sStM8imwY9";
		$paramStr = $this->buildParamStr( $params );
		$sign = base64_encode( hash_hmac( 'sha1', $paramStr, $secretKey) );

		$url = "http://app.ganji.com/openapi/Apptask?action=query&source=aiyingli&customer_id=705"."&appid=".$list['appid']."&idfa=".$list['idfa']."&signature=".$sign;
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true);

		unset($list['sign'],$list['ip'],$list['reqtype'],$list['isbreak'],$list['device'],$list['os'],$list['callback']);
		
		if($json["data"] && $json["data"][$list['idfa']] == 2){
			$list['timestamp']=time();
			$list['type'] = 1;
			$this->db->insert('aso_submit2',$list);
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败 
			unset($list['ip']);
			$list['timestamp']=time();
			$list['type'] = 1;
			$list['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$list);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}

	//点鑫 排重
	function IdfaRepeat_46($data,$list){
		$arr = $this->convertUrlQuery($list['IdfaRepeat_url']);
		$param = array();
		$param['adid'] = $arr['adid'];
		$param['idfas'] = $data['idfa'];
		
		$file_contents = $this->request_post("http://api.23dx.cn/ios/echo", $param);
		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}
	//点鑫 点击
	function source_46($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url = $list['source_url'] .'&idfa=' . $data['idfa'] ."&ip=".$data['ip']."&callback=" . $callback;
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );

		if(isset($json["Status"]) && $json["Status"] && !$json["Code"]){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//点鑫 激活
	function submit_46($data,$list){
		$arr = $this->convertUrlQuery($list['submit_url']);
		$param = array();
		$param['adid'] = $arr['adid'];
		$param['idfa'] = $data['idfa'];
		$param['appid'] = $arr['appid'];
		$param['ip'] = $data['ip'];

		$sign = md5(self::buildParamStr($param));
		$url = $list['submit_url'] .'&idfa=' . $data['idfa'] ."&ip=".$data['ip']."&key=".$sign;
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json["Status"]) && $json["Status"] && !$json["Code"]){
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;//这里返回1代表成功
		}
	}

	//脚印网络 排重
	function IdfaRepeat_47($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&appid=".$data['appid']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}

	//脚印网络 点击
	function source_47($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url = $list['source_url'] ."&appid=".$data['appid'].'&idfa=' . $data['idfa'] ."&ip=".$data['ip']."&callback=".$callback;
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );

	if(isset($json["success"]) && $json["success"] == "true"){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//脚印网络 激活
	function submit_47($data,$list){
		$url = $list['submit_url'] ."&appid=".$data['appid'].'&idfa=' . $data['idfa'] ."&ip=".$data['ip'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json["message"]) && $json["message"] == "success" && $json["success"]){
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;//这里返回1代表成功
		}
	}



	//热云 排重
	function IdfaRepeat_56($data,$list){
		$url = $list['IdfaRepeat_url'];

		$data['idfa']  = $data['idfa'];
		$data['appid'] = $data['appid'];
		
		$file_contents = $this->request_post($url,$data);
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}

	//热云 点击
	function source_56($data,$list){
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url = $list['source_url']."?idfa=".$data['idfa'].'&ip='.$data['ip'].'&noredirect=true'.'&callback='.$callback;
	
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		
		
		if(isset($json['status']) && $json['status']==0){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//酷传啡哈健身 排重
	function IdfaRepeat_1096499036($data,$list){
		$url = "http://www.fithub.cc/api/device/task/accept?"."idfa=".$data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//酷传啡哈健身 上报
	function submit_1096499036($data,$list){
		$url = "http://www.fithub.cc/api/device/task/commit?"."idfa=".$list['idfa']."&source=爱盈利";
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		unset($list['sign'],$list['ip'],$list['reqtype'],$list['isbreak'],$list['device'],$list['os'],$list['callback']);

		if($json['result'] == 1 && $json['message'] == "OK"){//上报成功
				$list['timestamp']=time();
				$list['type'] = 1;
				$this->db->insert('aso_submit2',$list);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($list['ip']);
				$list['timestamp']=time();
				$list['type'] = 1;
				$list['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$list);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	//酷传 排重
	function IdfaRepeat_23($data,$list){
		
		$sign              = md5(time().'d15d5fa40c274ba089c40bfa239a0127');
		//$file_contents = $this->request_post($list['IdfaRepeat_url'], $req);
		
		$url               = $list['IdfaRepeat_url']."&appid=".$data['appid']."&idfa=".$data['idfa']."&sign=".$sign."&timestamp=".time()."&name=aiyingli";
	
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json['status']==200 && $json['data']==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//酷传 点击
	function source_23($data,$list){
		// if(empty($data['callback'])){
		//  	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		//  }
		 $id = $this->db->insert('aso_source', $data); 
		 $inid = $this->db->insert_id();
		 $sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		 $callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		 $callback = urlencode($callback);
		$url = $list['source_url']."&idfa=".$data['idfa']."&appid=".$data['appid']."&name=aiyingli&ip=".$data['ip']."&systemVersion=".$data['os']."&timestamp=".time()."&sign=".md5(time().'d15d5fa40c274ba089c40bfa239a0127')."&callback=".$callback;

		
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		
		if($json["status"]==200 && $json["data"] == 0){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	//应用猎人 排重
	function IdfaRepeat_24($data,$list){
		
	
		//$file_contents = $this->request_post($list['IdfaRepeat_url'], $req);
		
		$url               = $list['IdfaRepeat_url']."&appid=".$data['appid']."&idfa=".$data['idfa'];
		
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json[$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//应用猎人 点击
	function source_24($data,$list){
		// if(empty($data['callback'])){
		//  	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		//  }
		 $id = $this->db->insert('aso_source', $data); 
		 $inid = $this->db->insert_id();
		 $sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		 $callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		 $callback = urlencode($callback);
		$url = $list['source_url']."&idfa=".$data['idfa']."&appid=".$data['appid']."&ip=".$data['ip']."&callback=".$callback;

	
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );

		if(isset($json["status"]) && $json["status"] == 1){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	//酷传博金贷APP 排重
	function IdfaRepeat_1062769577($data,$list){
		$url = "https://m.bjdp2p.com/thirdparty/aso?appid=".$data['appid']."&idfa=".$data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['code']) && !$json['code']){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//酷传博金贷APP 上报
	function submit_1062769577($data,$list){
		$url = "https://m.bjdp2p.com/thirdparty/aso?appid=".$list['appid']."&idfa=".$list['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		unset($list['sign'],$list['ip'],$list['reqtype'],$list['isbreak'],$list['device'],$list['os'],$list['callback']);

		if(isset($json['code']) && $json['code'] == 1){//上报成功
				$list['timestamp']=time();
				$list['type'] = 1;
				$this->db->insert('aso_submit2',$list);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($list['ip']);
				$list['timestamp']=time();
				$list['type'] = 1;
				$list['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$list);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	//驾校一点通 排重
	function IdfaRepeat_1204724021($data,$list){
		$url = "http://partner.jxedt.com/u/isDownload?idfa=".$data['idfa']."&appid=".$data['appid'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//驾校一点通 点击
	function source_1204724021($data,$list){
		// if(empty($data['callback'])){
		//  	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		//  }
		 $id = $this->db->insert('aso_source', $data); 
		 $inid = $this->db->insert_id();
		 $sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		 $callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		 $callback = urlencode($callback);
		$url = "http://api.jxedt.com/thirdplat/clicknotice?idfa=".$data['idfa']."&appid=".$data['appid']."&source=aiyingli"."&callback=".$callback;
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );

		if(isset($json["status"]) && $json["status"] == 1){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//酷传手狼 排重
	function IdfaRepeat_1193144605($data,$list){
		$url = "http://langren.51shousha.com/WereWolfService/GetIdfa?idfa=".$data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//熊猫排重
	function IdfaRepeat_25($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&appid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']);
		 $list['IdfaRepeat_url']."&appid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip'];
		$json = json_decode($file_contents,true);

		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	//熊猫上报
	function submit_25($data,$list){
		$url = $list['submit_url'] ."&appid=".$data['appid'].'&idfa=' . $data['idfa'] ."&ip=".$data['ip'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json["status"]) && $json["status"] == 1){
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;//这里返回1代表成功
		}
	}


	//熊猫回调
	function source_25($data,$list){
		// if(empty($data['callback'])){
		//  	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		//  }
		 $id = $this->db->insert('aso_source', $data); 
		 $inid = $this->db->insert_id();
		 $sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		 $callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;

		 $callback = urlencode($callback);
		$url = $list['source_url']."&idfa=".$data['idfa']."&appid=".$data['appid']."&ip=".$data['ip']."&callBackUrl=".$callback.'&os='.$data['os'];

	
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );

		if(isset($json["status"]) && $json["status"] == 1){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	
	
	
	//梦西游 点击
	function source_1227622665($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		//$id = $this->db->insert('aso_source', $data); 
		//$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = 'http://gametask.umipay.com/gt?server=0&appid=267&chnid=10021&subchnid=0&adver=aso&tracking=1&idfa='.$data['idfa']."&ip=".$data['ip']."&callback=".$callback;
		//echo md5('mengxiyou1227622665');
		
		//echo $url;
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		//var_dump($json);
		// print_r($file_contents);exit;
		if(isset($json['code']) && $json['code'] == 0){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	
	//闲时 点击
	function source_1271181880($data,$list){
		$data['timestamp'] = time();
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;

		$callback = urlencode($callback);

		$url='https://xs.im-ee.com/cloud/aylaso?appid='.$data['appid'].'&ip='.$data['ip'].'&timestamp='.$data['timestamp'].'&idfa='.$data['idfa'].'&sign='.md5($data['timestamp'].'^@%&4g254(#$@%Jfa').'&callback='.$callback;
		
        $file_contents = $this->request_get($url);
        //echo $file_contents;
        // $file_contents = $this->StatusCode($url);
		$json = json_decode($file_contents,true);
		
 		//$pos = strpos($file_contents, "true");
        if (isset($json['success']) && $json['success']){
            $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
			// $data['json']=$file_contents;
			// $this->db->insert('aso_source_log',$data);
		}else{//失败 
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	
	
	
	//创榜 排重
	function IdfaRepeat_900($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."&appleid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']);
		
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		//echo $list['IdfaRepeat_url']."&appleid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip'];
		
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	

	//创榜 上报
	function submit_900($data,$list){

		$file_contents = $this->request_get($list['submit_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&appleid=".$data['appid']);
		//echo $list['submit_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&appleid=".$data['appid'];
		$json = json_decode($file_contents,true);
		//var_dump($json);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if(isset($json['status']) && $json['status'] == 'true' && $json['message']=='success'){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	//酷传手狼 上报
	function submit_1193144605($data,$list){
		$url = "http://langren.51shousha.com/WereWolfService/GetIdfa?idfa=".$list['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		unset($list['sign'],$list['ip'],$list['reqtype'],$list['isbreak'],$list['device'],$list['os'],$list['callback']);

		if(isset($json) && $json == 1){//上报成功
				$list['timestamp']=time();
				$list['type'] = 1;
				$this->db->insert('aso_submit2',$list);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($list['ip']);
				$list['timestamp']=time();
				$list['type'] = 1;
				$list['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$list);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	//酷传唐小僧理财专业版 排重
	function IdfaRepeat_1168520400($data,$list){
		$url = "https://service.txslicai.com/Idfa/IdfaLogCallback.ashx?idfa=".$data['idfa']."&appid=".$data['appid'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[0]['code']) && !$json[0]['code']){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//酷传唐小僧理财通用版 排重
	function IdfaRepeat_1192206643($data,$list){
		$url = "https://service.txslicai.com/Idfa/IdfaLogCallback.ashx?idfa=".$data['idfa']."&appid=".$data['appid'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[0]['code']) && !$json[0]['code']){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//战鼓之魂 排重
	function IdfaRepeat_49($data,$list){
		$url = "http://staging.smartcrows.com:4099/validateIDFA?idfa=".$data['idfa']."&ip=".$data['ip'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['Code']) && $json['Code'] == 200){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//战鼓之魂 激活
	function submit_49($data,$list){
		$url = "http://staging.smartcrows.com:3005/checkIDFAActivalion?idfa=" . $data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['code']) && $json['code'] == 200){
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;//这里返回1代表成功
		}
	}

	//凡卓 排重
	function IdfaRepeat_50($data,$list){
		if($data['appid']==847334708){
			$data['appid']=8473347080;
		}else if($data['appid']==1147426399){
			$data['appid'] = '1147426399-fz';
		}
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&apple_id=".$data['appid']."&idfas=".$data['idfa']);
		
		$json = json_decode($file_contents,true);
		// print_r($list['IdfaRepeat_url']."&apple_id=".$data['appid']."&idfas=".$data['idfa']);exit;

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json["errno"]) && !$json["errno"] && !$json['data']['idfas'][$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}

	//凡卓 点击
	function source_50($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		// $id = $this->db->insert('aso_source', $data); 
		// $inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url'] .'&idfa=' . $data['idfa'] ."&ip=".$data['ip']."&click_time=".$data['timestamp']."&notify_url=".$callback;
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true);
		if(isset($json["errno"]) && !$json["errno"]){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//CN 排重
	function IdfaRepeat_51($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."?appid=".$data['appid']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}

	//CN 点击
	//CN 点击
	function source_51($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		$callback = urlencode($callback);

		 $url = $list['source_url'] ."&appid=".$data['appid']."&idfa=".$data['idfa']."&mac=02:00:00:00:00:00&ip=".$data['ip']."&callback=".$callback;
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		
		if($json["error"]==0){
			// $this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//CN 回调系统排重
	function IdfaRepeat_70($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}

	//试玩大师 点击
	function IdfaRepeat_71($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa'].'&appid='.$data['appid']);
		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}
	//试玩大师 点击
	function source_71($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		$callback = urlencode($callback);

		 $url = $list['source_url'] ."&appid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback;
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		
		if(isset($json['code']) && $json["code"]==0){
			 $this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//试用宝 排重
	function IdfaRepeat_73($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa'].'&app_id='.$data['appid'].'&ip='.$data['ip']);
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['status']) && $json['status']==0){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}

	//试用宝 点击
	function source_73($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		$callback = urlencode($callback);

		 $url = $list['source_url'] ."&idfa=".$data['idfa'].'&app_id='.$data['appid'].'&ip='.$data['ip']."&callback_url=".$callback;
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		
		if(isset($json['status']) && $json['status']==0){
			 $this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	//试用宝 上报
	function submit_73($data,$list){
		$url = $list['submit_url']."&app_id=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip'];
		
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//var_dump($json);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['status']) && $json['status']==0){
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//新CN排重对接接口
	function IdfaRepeat_53($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."?appid=".$data['appid']."&idfa=".$data['idfa'].'&ip='.$data['ip']);
		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}

	//新CN点击对接接口
	function source_53($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		$callback = urlencode($callback);

		 $url = $list['source_url'] ."&appid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback;
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		
		if($json["code"]==1){
			// $this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	//新CN激活对接接口 激活
	function submit_53($data,$list){
		$url = $list['submit_url']."&idfa=".$data['idfa']."&ip=".$data['ip'];
		
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['code']) && $json['code'] == 1){
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	//行者天下 京东金融 appid=jingdongjinrong
	function IdfaRepeat_105($data,$list){
		$this -> IdfaRepeat_359($data, $list);
	}

	function source_105($data,$list){
		$this -> source_359($data, $list);
	}

	//新CN
	function IdfaRepeat_969($data,$list){
		$this -> IdfaRepeat_53($data, $list);
	}

	function source_969($data,$list){
		$this -> source_53($data, $list);
	}

	function submit_969($data,$list){
		$this -> submit_53($data, $list);
	}

	//猎豆点击
	function source_54($data,$list){
		$nsign          = md5("appBaseId=".$data['appid']."&channelId=20015&idfa=".$data['idfa']."slims267(envied");
		$cparam		   = "{'source':'liedou','appBaseId':{$data['appid']},'sign':{$nsign}}";
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		$callback = urlencode($callback);

		 $url = $list['source_url'] ."&appid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']."&userid=waifang&osver=".$data['os']."&cparam=".$cparam."&ctype=1&mac=02:00:00:00:00:00&callback=".$callback;
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		
		if(isset($json['code']) && $json['code']==0){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}


	//猎豆排重
	function IdfaRepeat_54($data,$list){
		$sign          = md5("appBaseId=".$data['appid']."&channelId=20015&idfa=".$data['idfa']."slims267(envied");
		$cparam		   = "{'source':'liedou','appBaseId':{$data['appid']},'sign':{$sign}}";
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&appBaseId=".$data['appid']."&idfa=".$data['idfa'].'&sign='.$sign.'&cparam='.$cparam);
		
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		

		
		//渠道返回：成功返回0  失败返回1
		if($json['code']==0 && $json['data']['result']==1){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}

	//猎豆 激活
	function submit_54($data,$list){
		
		$sign          = md5("appBaseId=".$data['appid']."&channelId=20015&idfa=".$data['idfa']."slims267(envied");

		$cparam		   = "{'source':'liedou','appBaseId':{$data['appid']},'sign':{$sign}}";	
		$file_contents = $this->request_get($list['submit_url']."&appBaseId=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']."&sign=".$sign.'&cparam='.$cparam.'&mac=02:00:00:00:00:00');

		//echo $list['submit_url']."&appBaseId=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']."&sign=".$sign.'&cparam='.$cparam.'&mac=02:00:00:00:00:00';
	    $json = json_decode($file_contents,true);
	
		
		//echo $list['submit_url']."?uuid=".$data['idfa']."&appid=".$data['appid']."&deviceName=ipone4&deviceVersion=4.0.0&idfa=".$data['idfa']."&ip=".$data['ip']."&deviceMac=02:00:00:00:00:00&network=wifi&secretKey=NQiMpTaKdMp6cFSdWHoqvY7tPzU0t58f";
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if($json['message']== 'success' && $json['code']==0){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	//巨掌排重 
	function IdfaRepeat_246($data,$list){
		
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa'].'&ip='.$data['ip'].'&mac=02:00:00:00:00:00');
		
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		

		
		//渠道返回：成功返回0  失败返回1
		if($json[$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}
	//巨掌点击 
	function source_246($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		
		if($data['device']=='iPhone 5s'){
			$data['device']=str_replace(' ','',$data['device']);
		}
		$url = $list['source_url'] ."&idfa=".$data['idfa']."&ip=".$data['ip'].'&devicemodel='.$data['device'];
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		
		if($json["State"]==100){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	//巨掌上报 
	function submit_246($data,$list){
		$url = $list['submit_url']."&idfa=".$data['idfa']."&ip=".$data['ip'];
		
		$file_contents = $this->request_get($url);
		
		$json = json_decode($file_contents,true);
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['State']) && $json['State'] == 100){
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	
	
	
	//36氪 排重
	function IdfaRepeat_593394038($data,$list){
		
		$file_contents = $this->request_get($list['IdfaRepeat_url']."?idfa=".$data['idfa'].'&appid='.$data['appid']);
		
		$json = json_decode($file_contents,true);
		//var_dump($json);
		//var_dump($json);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		

		
		//渠道返回：成功返回0  失败返回1
		if($json[$data['idfa']]==1){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}
	//36氪 点击回调
	function source_593394038($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		$callback = urlencode($callback);

		$url = $list['source_url'] ."?idfa=".$data['idfa']."&callback=".$callback.'&appid='.$data['appid'].'&ip='.$data['ip'].'&timestamp='.$data['timestamp'].'&sign='.md5($data['timestamp'].'21e6022915a46283741cdb686693d83ab40d9692');
		
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		
		if(isset($json['code']) && $json['code']==0){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	

	//每日优鲜排重
	function IdfaRepeat_36($data,$list){
		
		$file_contents = $this->request_get("https://as-vip.missfresh.cn/web20/statistic/center/idfa/filter/aiyingli?appid=".$data['appid']."&idfa=".$data['idfa']);
		

		$json = json_decode($file_contents,true);
		//print_r($json);die;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}
	//每日优鲜点击回调
	function source_36($data,$list){
	     $id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		$callback = urlencode($callback);

		 $url = "https://as-vip.missfresh.cn/web20/statistic/center/idfa/report/aiyingli?appid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback."&os=".$data['os']."&mac=02:00:00:00:00:00";
		
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		
		if($json["code"]==00){
			// $this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//拍拍贷 排重
	function IdfaRepeat_37($data,$list){
		
		date_default_timezone_set('Asia/Shanghai');
		$appid                  = explode('=',explode('&',$list['source_url'])[0])[1];
		//echo $appid;
		$res['AppId']           = explode('=',explode('&',$list['source_url'])[1])[1];
		//echo $res['AppId'];
		$res['Idfas'][0]['Idfa'] = $data['idfa'];
		$res['Source']          = explode('=',explode('&',$list['source_url'])[2])[1];
		$json_string            = json_encode($res);
		
        $url       = 'http://gw.open.ppdai.com/marketing/AdvertiseService/CheckAdvertise';
        
		$file_contents = $this->SendRequest($url,$json_string,$appid,$data['appid']);
		

		$json = json_decode($file_contents,true);
		//var_dump($json);
		//print_r($json);die;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['Result']) && $json['Result']==0 && $json['Content']['CheckIdfaResults'][0]['IsActive']==1){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}
	
	//拍拍贷 点击
	function source_37($data,$list){
	    date_default_timezone_set('Asia/Shanghai');
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		//$callback = urlencode($callback);
		$appid                  = explode('=',explode('&',$list['source_url'])[0])[1];
		$res['AppId']           = explode('=',explode('&',$list['source_url'])[1])[1];
		$res['Idfa']            = $data['idfa'];
		$res['CallBackUrl']     = $callback;
		$res['DeviceId']        = '';
		$res['Source']          = explode('=',explode('&',$list['source_url'])[2])[1];
		$res['Mac']             = '';
		$json_string            = json_encode($res);
		//echo $json_string;
		$url                    = 'http://gw.open.ppdai.com/marketing/AdvertiseService/SaveAdvertise';
		
		$file_contents = $this->SendRequest($url,$json_string,$appid,$data['appid']);
		
		//$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		//var_dump($json);
		if(isset($json['Result']) && $json['Result']==0 && $json['Content']['IsActive']==1){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	
	//谁是卧底排重
	function IdfaRepeat_1239267559($data,$list){
		$req = array("appid"=>$data['appid'], "idfa"=>$data['idfa']);
		$file_contents = $this->request_post($list['IdfaRepeat_url'], $req);
		$url=$list['IdfaRepeat_url']."?appid=".$data['appid']."&idfa=".$data['idfa'];
		//print_r($url);
		$json = json_decode($file_contents,true);
		//print_r($json);die;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//手狼排重
	function IdfaRepeat_1303342510($data,$list){
		$req = array("appid"=>$data['appid'], "idfa"=>$data['idfa']);
		$file_contents = $this->request_post($list['IdfaRepeat_url'], $req);
		$url=$list['IdfaRepeat_url']."?appid=".$data['appid']."&idfa=".$data['idfa'];
		//print_r($url);
		//$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//print_r($json);die;
		//写入log
		
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1')); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}


	//向上金服 排重
	function IdfaRepeat_38($data,$list){
		$data_al['allidfa']  = $data['idfa'];
		$url = $list['IdfaRepeat_url'];
		$file_contents = $this->request_post($url,$data_al);

		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == '0'){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//向上金服 上报
	function submit_38($data,$list){
		$url = $list['submit_url'] .'&idfa=' . $data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json["status"]) && $json["status"]){ //上报成功
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;//这里返回1代表成功
		}
	}


	//隆驰兴润 排重
	function IdfaRepeat_39($data,$list){
		
		$file_contents = $this->request_get($list['IdfaRepeat_url'].'&idfa='.$data['idfa']);

		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == '0'){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//隆驰兴润 上报
	function submit_39($data,$list){
		$file_contents = $this->request_get($list['submit_url'].'&idfa='.$data['idfa']);
		
		$json = json_decode($file_contents,true);
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]=='0'){ //上报成功
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;//这里返回1代表成功
		}
	}

	//CN 回调系统点击
	function source_70($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url'] ."&mac=02:00:00:00:00:00".'&idfa=' . $data['idfa']."&ip=".$data['ip']."&callback=" . $callback;
		$file_contents   = $this->request_get($url);
		// $json  = json_decode($file_contents,true);

		if(isset($file_contents) && $file_contents == 1){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//谢总对面 排重
	function IdfaRepeat_99($data,$list){
		$url = $list['IdfaRepeat_url'];
		$timestamp = time();
		$re = array();
		if($data['appid']==1228060341){
			$re['source'] = 'yyykuchuan';
		}else if($data['appid']==574152539){
			$re['source'] = 'kuchuan';
		}
		$re['appid'] = $data['appid'];
		$re['time'] = $timestamp;
		$re['sign'] = MD5($re['source'].$re['time']);
		$re['idfa'] = $data['idfa'];
		$file_contents = $this->request_post($url, $re);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>$timestamp);
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] ==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//谢总对面 点击
	function source_99($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		if($data['appid']==1228060341){
			$source = 'yyykuchuan';
		}else if($data['appid']==574152539){
			$source = 'kuchuan';
		}
		$url = $list['source_url']."idfa=".$data['idfa']."&source=".$source."&mac="."&callback=".$callback;
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		// print_r($json);exit;
		if(isset($json["success"]) && $json["success"] == "true"){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	
	
	//钱大师 点击
	function source_100($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		
		$url = $list['source_url']."&idfa=".$data['idfa'];
		//echo $url;
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		
		
		//print_r($json);exit;
		if($json['data']==1 && $json['status']==1){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	
	
	//钱大师 排重
	function IdfaRepeat_100($data,$list){
		$url = $list['IdfaRepeat_url'].'&idfa='.$data['idfa'];
		
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//var_dump($json);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}
	
	function submit_100($data,$list){
		$url = $list['submit_url']."&idfa=".$data['idfa'].'&ip='.$data['ip'];
		
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['status']) && $json['status'] == 1){
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//战鼓之魂 排重
	function IdfaRepeat_69($data,$list){
		$url = "http://staging.smartcrows.com:3005/checkIDFAActivalion?channel=vd10101&idfa=".$data['idfa']."&ip=".$data['ip'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['code']) && $json['code'] == 500){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//战鼓之魂 激活
	function submit_69($data,$list){
		$url = "http://staging.smartcrows.com:3005/checkIDFAActivalion?channel=vd10101&idfa=" . $data['idfa']."&ip=".$data['ip'];;
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['code']) && $json['code'] == 200){
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//仙剑诀 排重
	function IdfaRepeat_1207147728($data,$list){
		$url = "http://recharge.tqyouxi.com/sd_idfa_repeat.xl?appid=" .$data['appid']. "&idfa=".$data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 1){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}


	//钱时代理财尊享版 排重对接接口
	function IdfaRepeat_200($data,$list){
		$file_contents = $this->request_get("http://www.qsdjf.com/api/generalize/idfaRepeat?appid=".$data['appid']."&idfa=".$data['idfa']);
		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}
	//钱时代理财尊享版 点击对接接口
	function source_200($data,$list){
		

		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		$callback = urlencode($callback);

		 $url = "http://www.qsdjf.com/api/generalize/click?appid=".$data['appid']."&channel=172&idfa=".$data['idfa']."&ip=".$data['ip']."&timestamp=".$data['timestamp']."&sign=".md5($data['timestamp'].'c5824bb722c24b11bd3ab09ca3398a95')."&callback=".$callback;
		$file_contents   = $this->request_get($url);
		
		
		$json  = json_decode($file_contents,true);
		
		if($json["code"]==0){
			 $this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	
	
	//飞蛙聘聘 排重
	function IdfaRepeat_1269555259($data,$list){
		
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
		
		$json = json_decode($file_contents,true);
		//var_dump($json);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		

		
		//渠道返回：成功返回0  失败返回1
		if(isset($json['code']) && $json['code']==1){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}
	//飞蛙聘聘 点击回调
	function source_1269555259($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		$callback = urlencode($callback);

		$url = $list['source_url'] ."&idfa=".$data['idfa']."&callback=".$callback;
		
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		
		if(isset($json['error']) && $json["error"]==0){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//奋斗大讲堂 排重
	function IdfaRepeat_1183166197($data,$list){
		$url = "http://video.fendoumba.com/mobile/Down/index/idfa/" .$data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	/*览益股市  上报*/
	function submit_697($data,$list){
		$data_al['appid']    = $data['appid'];
		$data_al['idfa']      = $data['idfa'];
		$file_contents = $this->request_post($list['submit_url'],$data_al);

	    $json = json_decode($file_contents,true);
	
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
	
		if(isset($json['code']) && ($json['code']==200 || $json['code']==400)){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}


	//艺龙 排重
	function IdfaRepeat_96($data,$list){
		$url = $list['IdfaRepeat_url'] . "?appid=".$data['appid']."&idfa=".$data['idfa']."&channel=ttlxasoiphone";
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	
	
	//钞市官方版 排重
	function IdfaRepeat_1253345977($data,$list){
		$key='356058973e054935fc94dfdb37714c03';
		$sign  = md5($key.'aiyingli'.$data['idfa'].time().$key);
		
		$url=$list['IdfaRepeat_url'];
		$res['idfa']=$data['idfa'];
		$res['chcode']='aiyingli';
		$res['time']=time();
		$res['sign']=$sign;
		
		$file_contents = $this->request_post($url,$res);
		
		$json = json_decode($file_contents,true);
		
		//var_dump($json);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		

		
		//渠道返回：成功返回0  失败返回1
		if($json['isExist']==0){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}

	//钞市官方版 点击
	function source_1253345977($data,$list){
		$key   ='ro3s0vqvcaoYuBbl';
		$nsign  = md5($data['timestamp'].$key);
		
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url']."?appid=". $data['appid'] ."&idfa=".$data['idfa']."&callback=".$callback.'&sign='.$nsign.'&ip='.$data['ip'].'&timestamp='.$data['timestamp'];
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true );
		
		// print_r($file_contents);exit;
		if(isset($json["code"]) && $json["code"]==0){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//有惠手机购物   排重
	function IdfaRepeat_1173380760($data,$list){
		
		$file_contents = $this->request_get($list['IdfaRepeat_url'].'?idfa='.$data['idfa'].'&appid='.$data['appid']);
		
		$json = json_decode($file_contents,true );
		// echo $file_contents;die;
		//写入log
		
	
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]==0){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
			}else{
				//成功返回
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
			}
	}
	//有惠手机购物   点击
	function source_1173380760($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$nsign    = md5($data['timestamp'].'2ihijVARY3QAGfT8');
		
		$url = $list['source_url']."?appid=".$data['appid']."&timestamp=".$data['timestamp']."&sign=".$nsign."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback;
		
		$file_contents = file_get_contents($url);
		
		//$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		
		
		//print_r($file_contents);exit;
		if(isset($json['code']) && $json['code']=='0'){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}


	//云端金融理财 点击
	function source_788($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url']."?appid=". $data['appid'] ."&idfa=".$data['idfa']."&callback_url=".$callback."&source=imoney";
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true );
		
		// print_r($file_contents);exit;
		if(isset($json["code"]) && $json["code"]==0){

			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//云端金融理财 排重
	function IdfaRepeat_788($data,$list){
		
		$file_contents = $this->request_get($list['IdfaRepeat_url'].'?idfa='.$data['idfa']);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}


	//艺龙 点击
	function source_96($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url']."&appid=". $data['appid'] ."&idfa=".$data['idfa']."&callbackurl=".$callback;
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		// print_r($file_contents);exit;
		if(isset($json["success"]) && $json["success"]){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}

	//悦美 排重
	function IdfaRepeat_94($data,$list){
		$url = "http://www.yuemei.com/api/distinct.php";
		$data['bundleid'] = "com.yuemei.kw";
		$data['idfa_list'] = $data['idfa'];
		$file_contents = $this->request_post($url, $data);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//财经 排重
	function IdfaRepeat_1051607862($data,$list){
		$url = $list['IdfaRepeat_url']."&mac=02:00:00:00:00:00&idfa=".$data['idfa']."&source=aiyingli";
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//财经 点击
	function source_1051607862($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url = $list['source_url']."&mac=02:00:00:00:00:00&idfa=".$data['idfa']."&source=aiyingli"."&callback=".$callback;
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		// print_r($file_contents);exit;
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 1){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	
	
	//钱时代金服 点击
	function source_104($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$key = "c5824bb722c24b11bd3ab09ca3398a95";
		$csign = md5($data['timestamp'] . $key);//回调地址的sign;
		$url = $list['source_url']."&appid=" .  $data['appid'] . "&idfa=" . $data['idfa']."&ip=".$data['ip'] . "&timestamp=" . $data['timestamp'] . "&sign=" . $csign . "&callback=" . $callback;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		//var_dump($json);
		//写入log

		if(!$json['code'] && isset($json['code'])){//点击成功
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败 
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
		
	}

	//钱时代金服 排重 
	function IdfaRepeat_104($data,$list){
		$url = $list['IdfaRepeat_url']."?appid=". $data['appid'] . "&idfa=" . $data['idfa'];
		
		$file_contents = $this->request_get($url);
		
		$json = json_decode($file_contents,true );
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);

		if($json[$data['idfa']]){
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{
			echo  json_encode(array($data['idfa']=>'0'));
		}
		
	}


	//触金 点击
	function source_106($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		
		$url = $list['source_url']."&idfa=" . $data['idfa']."&osVersion=".$data['os'] . "&ip=" . $data['ip'] . "&returnUrl=" . $callback;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );

		
		
		//写入log

		if($json['Error']==0 && isset($json['Error'])){//点击成功
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败 
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
		
	}

	//触金 排重 
	function IdfaRepeat_106($data,$list){
		$url = $list['IdfaRepeat_url']."&idfa=" . $data['idfa']."&ip=". $data['ip'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);

		if(!$json[$data['idfa']]){
				$a = array($data['idfa']=>'1');
				$contents = json_encode($a);
				echo  $contents;
		}else{
			echo  json_encode(array($data['idfa']=>'0'));
		}
		
	}


	//人才蛙 排重
	function IdfaRepeat_1211936110($data,$list){
		$timestamp = time();
		$sign = md5($timestamp . "bc051d1b7c6d2e0d2788d434191b3b32");
		$url = "https://api.rencaiwa.com/api/device/checkDevice?appid=".$data['appid']."&idfa=".$data['idfa']."&timestamp=".$timestamp."&sign=".$sign;
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 1){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//人才蛙 点击
	function source_1211936110($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$timestamp = time();
		$sign = md5($timestamp ."bc051d1b7c6d2e0d2788d434191b3b32");

		$url = "https://api.rencaiwa.com/api/device/adClick?apiversion=2.0.1&appid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']."&timestamp=".$timestamp."&callback=".$callback."&sign=".$sign;
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		// print_r($file_contents);exit;
		if(isset($json['code']) && $json['code'] == 0){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	//布丁小贷 点击
	function source_1112886625($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$timestamp = time() * 1000;
		$appkey = "IDFA_3ef2ca378f512b613ae5ccbbc02eaa59";
		$appSecret = "f75f95106aca8e86f9e6fb590f12f3a7";
		$sign = md5($appkey . $timestamp . $appSecret);

		$url = $list['source_url']."&idfa=".$data['idfa']."&appKey=".$appkey."&signTime=".$timestamp."&callbackUrl=".$callback."&sign=".$sign;
		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		// print_r($file_contents);exit;
		if(isset($json['code']) && $json['code'] == 1){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	//牛交所理财师版 点击
	function source_1134483213($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }
		// echo 1;exit;
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$timestamp = time();
		$sign=md5($timestamp."6486238742934745");
		$url = $list['source_url']."?idfa=".$data['idfa']."&callback=".$callback."&sign=".$sign."&appid=".$data['appid']."&timestamp=".$timestamp."&ip=".$data['ip'];
		$file_contents = file_get_contents($url);
		//$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		//print_r($file_contents);exit;
		if(isset($json['code']) && !$json['code']){
			// $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//牛交所理财师版 排重
	function IdfaRepeat_1134483213($data,$list){
		$url = $list['IdfaRepeat_url']."?appid=".$data['appid']."&idfa=".$data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 1){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	
	//正经事 点击
	function source_1076478894($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }
		// echo 1;exit;
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$udid="02:00:00:00:00:00";
		$isskip=0;
		$url="http://api.adsofts.cn/ios/api/notice?s=lxUEGN2Tj3z2PZdqTJXqLdktNIGDbaAUq81AntAS5zBce5XJOVkROQ=="."&isSkip=".$isskip."&os=".$data['os']."&udid=".$udid."&idfa=".$data['idfa']."&openudid=".null."&callbackurl=".$callback."&clientip=".$data['ip'];
		//$url ="https://tgcw.feifeipark.com/index.php/Api/AppStore/click"."?idfa=".$data['idfa']."&callback=".$callback."&sign=".$sign."&appid=".$data['appid']."&timestamp=".$timestamp."&ip=".$data['ip'];
		//$file_contents = file_get_contents($url);

		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );//print_r($json);exit;
		//print_r($file_contents);exit;
		if(isset($json['success']) && $json['message']=="成功"){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//财视 点击
	function source_98($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }

		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$udid="02:00:00:00:00:00";
		$isskip=0;
		$url="http://api.adsofts.cn/ios/api/notice?s=gE0LD3eZhw3LY4/rCHjDTZOQW3z++RUNmi/4EkOCujFBLzX9Ne9m3w=="."&isSkip=".$isskip."&os=".$data['os']."&udid=".$udid."&idfa=".$data['idfa']."&openudid=".null."&callbackurl=".$callback."&clientip=".$data['ip'];

		//$file_contents = file_get_contents($url);

		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );//print_r($json);exit;
		//print_r($file_contents);exit;
		if(isset($json['success']) && $json['message']=="成功"){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	//财视 排重
	function IdfaRepeat_98($data,$list){
		$source="wanpu";
		$mac="02:00:00:00:00:00";
		//$url = "https://tgcw.feifeipark.com/index.php/Api/AppStore/check"."?appid=".$data['appid']."&idfa=".$data['idfa'];
		$url="http://chai.api.3g.cnfol.com/index.php?r=Version/RepeatActivate"."&mac=".$mac."&idfa=".$data['idfa']."&source=".$source;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 1){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	// 友邦金储宝理财 点击
	function source_103($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }
		// $id = $this->db->insert('aso_source', $data);
		// $inid = $this->db->insert_id();
		if(!isset($data['os'])){
			$data['os']='';
		}
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		//$url="http://106.15.36.23:8080/YouBang/SyncServer?type=ClickSync&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback."&adid=".$addid."&channel=".$channelid."&clickKeyword=".$clickKeyword;
		//$file_contents = file_get_contents($url);
		$url=$list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback."&os=".$data['os'];
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		//print_r($url);die;
		//print_r($json);exit;
		//print_r($file_contents);exit;
		//var_dump($json);
		if(isset($json['resultCode']) && $json['resultCode']==1000){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	// 友邦 排重
	function IdfaRepeat_103($data,$list){
		$url=$list['IdfaRepeat_url']."&idfa=".$data['idfa']."&ip=".$data['ip'];
		$file_contents = $this->request_get($url);
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		// print_r($file_contents);die;
		//渠道返回：成功返回0  失败返回1
		//idfa 已存在标识为 1，不存在标识为 0。

		if(isset($json['data']) && $json['data'] == 1) {
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}elseif(isset($json["msg"]) && $json["msg"] == 0) {
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}elseif(isset($json["success"]) && $json["success"] && $json["exist"] == 0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}elseif(isset($json["data"]) && !$json["error_code"] && !$json["data"][$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}elseif(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	
	//友邦 上报
	function submit_103($data,$list){
		$url = $list['submit_url'] . "&idfa=" . $data['idfa'] . "&ip=" . $data['ip'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['resultCode']) && $json['resultCode']==1000){//上报成功
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));
		}else{//失败
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}

	// JC 排重
	function IdfaRepeat_48($data,$list){

		$url = $list['IdfaRepeat_url']."&idfa=".$data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		//idfa 已存在标识为 1，不存在标识为 0。
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){

			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{

			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	// JCpopstar 点击
	function source_48($data,$list)
	{
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'] . md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=" . $inid . "&k=" . $data['timestamp'] . "&idfa=" . $data['idfa'] . "&appid=" . $data['appid'] . "&sign=" . $sign;
		$callback = urlencode($callback);

		$url = $list['source_url'] . "&idfa=" . $data['idfa'] . "&callback=" . $callback;
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents, true);
		//print_r($file_contents);exit;
		if (isset($json['success']) && $json['success']) {
			$this->db->insert('aso_source', $data);
			echo json_encode(array('code' => '0', 'result' => 'ok'));
			die; //这里返回0代表成功
		} else {
			$data['json'] = $file_contents;
			$this->db->insert('aso_source_log', $data);
			echo json_encode(array('code' => '103', 'result' => 'false'));
			die;
		}
	}
	//有米友商 点击
	function source_101($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$goto=0;
		$mac=null;
		$url = $list['source_url']."&ifa=".$data['idfa']."&mac=".$mac."&ip=".$data['ip']."&goto=".$goto."&callback_url=".$callback;
		//print_r($url);
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true);
		//print_r($file_contents);exit;
		if(isset($json['c']) && !$json['c']){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	///有米友商 排重
	function IdfaRepeat_101($data,$list){
		$req = array("appid"=>$data['appid'], "idfa"=>$data['idfa']);
		$file_contents = $this->request_post($list['IdfaRepeat_url'], $req);
		$json = json_decode($file_contents,true);
		//print_r($json);die;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();

		}
	}
	//有米友商 上报
	function submit_101($data,$list){
		$s="bd6b335329HYycCU2Ti8Nt6Ex_q5Hy99_7f";
		$timestamp=time();
		$url=$list['submit_url'] . "?ifa=" . $data['idfa']."&s=".$s."&timestamp=".$timestamp;
		//print_r($url);die;
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true );
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if($json['c']==0){//上报成功
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));

		}else{//失败
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
		}
	}


	//中华英才网 排重
	function IdfaRepeat_647145486($data,$list){
		$req = array("appid"=>$data['appid'], "idfa"=>$data['idfa']);
		$file_contents = $this->request_post($list['IdfaRepeat_url'], $req);
		$url=$list['IdfaRepeat_url']."?appid=".$data['appid']."&idfa=".$data['idfa'];
		//print_r($url);
		$json = json_decode($file_contents,true);
		//print_r($json);die;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['data']) && $json['msg']=="成功"){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();

		}
	}
	//中华英才网 点击
	function source_647145486($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$source = "ayl";
		$url = $list['source_url']."?idfa=".$data['idfa']."&callback=".$callback."&source=".$source."&appid=".$data['appid'];
		$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );
		//print_r($file_contents);exit;
		if(isset($json['data']) && $json['msg']=="成功"){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}



	//优信二手车排重
	function IdfaRepeat_102($data,$list){
		$url = $list['IdfaRepeat_url']."?appid=".$data['appid']."&idfa=".$data['idfa'];
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);

		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
    //优信二手车点击
	function source_102($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$channel = "ayl";
		$url = $list['source_url']."?appid=".$data['appid']."&idfa=".$data['idfa']."&callback=".$callback."&channel=".$channel;
	                                     	$file_contents   = $this->request_get($url);
		$json  = json_decode($file_contents,true );

		if(isset($json['code']) && $json['code']){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//紫微大師 排重
	function IdfaRepeat_903246967($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url'] . "&idfa=" .$data['idfa']);
		$json = json_decode($file_contents,true);
		//print_r($json);die;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();

		}
	}

	//快乐购 点击
	function source_477429872($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }

		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$sign = md5($data['timestamp'].$data['idfa'].$data['appid']."ztwl");
		$url = $list['source_url'] ."?appid=".$data['appid']."&IDFA=".$data['idfa']."&eventtime=".$data['timestamp']."&source=ztwl&callback=".$callback."&sign=".$sign;

		//$file_contents = file_get_contents($url);

		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );

		if(isset($json['ret']) && !$json['ret']){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	
	//快乐购 排重
	function IdfaRepeat_477429872($data,$list){
		$url = $list['IdfaRepeat_url']. "?IDFA=".$data['idfa'];
		$file_contents = $this->request_get($url);
		// print_r($file_contents);exit;
		// $json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($file_contents == 1){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//百度地图 排重
	function IdfaRepeat_156($data,$list){
		$url = $list['IdfaRepeat_url']. "&idfa=".$data['idfa'];
		$file_contents = $this->request_get($url);
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['msg']) && $json['msg'] == 0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//快乐购 点击
	function source_156($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }

		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);


		$url = $list['source_url'] ."&idfa=".$data['idfa']."&ip=".$data['ip']."&os_version=" .$data['os']. "&mac=020000000000&callback_url=".$callback;

		// $file_contents = file_get_contents($url);

		$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );

		if(isset($json['status']) && $json['status'] == 1){
			// $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}


	//奇客 排重
	function IdfaRepeat_157($data,$list){
		$data['timestamp'] = time();
		$params['user_id'] = "Q0001";
		$params['atime'] = $data['timestamp'];
		$params['appid'] = $data['appid'];
		$params['idfas'] = $data['idfa'];
		// PHP 版本 生成方法
		// 合作方 partner_key， 注意不是 partner
		$partner_key = "XKBP1Oqut0r2LiGV";
		// UNIX TIMESTAMP 最小单位为秒
		$atime = $data['timestamp'];
		// 第三方用户唯一标识，可以为字母与数字组合的字符串。
		$user_id = "Q0001";
		// 生成签名 5afda19c5d65a7a7
		$sign = substr(md5($partner_key.$atime.$user_id), 8, 16);
		$params['sign'] = $sign;
		$file_contents = $this->request_post($list['IdfaRepeat_url'], $params);
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['success']) && $json['success'] && !$json['success']['data'][$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//奇客 点击
	function source_157($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		// $callback = urlencode($callback);

		$data['timestamp'] = time();
		$params['user_id'] = "Q0001";
		$params['atime'] = $data['timestamp'];
		$params['appid'] = $data['appid'];
		$params['idfa'] = $data['idfa'];
		$params['ip'] = $data['ip'];
		$params['click_time'] = $data['timestamp'];
		$params['callback'] = $callback;
		// PHP 版本 生成方法
		// 合作方 partner_key， 注意不是 partner
		$partner_key = "XKBP1Oqut0r2LiGV";
		// UNIX TIMESTAMP 最小单位为秒
		$atime = $data['timestamp'];
		// 第三方用户唯一标识，可以为字母与数字组合的字符串。
		$user_id = "Q0001";
		// 生成签名 5afda19c5d65a7a7
		$sign = substr(md5($partner_key.$atime.$user_id), 8, 16);
		$params['sign'] = $sign;
		$file_contents   = $this->request_post($list['source_url'], $params);
		$json  = json_decode($file_contents,true );

		if(isset($json['success']) && $json['success'] == true){
			// $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//奇客 上报
	function submit_157($data,$list){
		$data['timestamp'] = time();
		$params['appid'] = $data['appid'];
		$params['idfa'] = $data['idfa'];
		$params['active_time'] = $data['timestamp'];

		$file_contents = $this->request_post($list['submit_url'], $params);

		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if(isset($json['success']) && $json['success']  == true){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	//酷传触手 点击
	function source_1193109717($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }

		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		// $callback = urlencode($callback);

		$params['idfa']     = $data['idfa'];
		$params['sourceId'] = 2;
		$params['callback'] = $callback;

		$file_contents   = $this->request_post("https://open.chushou.tv/xapi/idfa/accept.htm", $params);
		$json  = json_decode($file_contents,true );
		if(isset($json['code']) && !$json['code']){
			// $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//聚点 排重
	function IdfaRepeat_158($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."?adid=217&idfa=".$data['idfa']);
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//聚点 点击
	function source_158($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }

		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&idfa=".$data['idfa']."&mac=02:00:00:00:00:00&ip=".$data['ip']."&callback=".$callback);
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );

		if(isset($json['status']) && $json['status'] == 1){
			// $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}


	//聚点 上报
	function submit_158($data,$list){
		$file_contents = $this->request_get($list['submit_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&mac=02:00:00:00:00:00");

		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if(isset($json['status']) && $json['status'] == 1){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}


	//肥牛试玩 排重
	function IdfaRepeat_159($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."?idfa=".$data['idfa']."&IP=".$data["ip"]."&MAC=02:00:00:00:00:00");
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json["status"]) && !$json["status"]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//肥牛试玩 点击
	function source_159($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }

		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."?idfa=".$data['idfa']."&MAC=02:00:00:00:00:00&IP=".$data['ip']."&callback_url=".$callback);
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );

		if(isset($json['status']) && $json['status'] == 1){
			// $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}


	//肥牛试玩 上报
	function submit_159($data,$list){
		$file_contents = $this->request_get($list['submit_url']."?idfa=".$data['idfa']);

		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if(isset($json['status']) && $json['status'] == 1){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	//酷传环球智投 排重
	function IdfaRepeat_1249210280($data,$list){

		$file_contents = $this->request_get("http://m.gb186.com/api/getUserByIdfa.ashx"."?idfa=".$data['idfa']."&appid=hqzt");

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//大树互娱 点击
	function source_59($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		//$callback = urlencode($callback);
		$data_al['source']  = 'apyb';
		$data_al['cip']     = $data['ip'];
		$data_al['ifa']     = $data['idfa'];
		if($data['appid']==1180004118){
			$data_al['media']   = 9737;
			$data_al['adname']  = '最强NBA';
			$data_al['adid']    = 10;
			$data_al['adgameid'] = 107424;
		}else if($data['appid']==1208410827){
			$data_al['media']   = 9721;
			$data_al['adname']  = '三国群英传';
			$data_al['adid']    = 11;
			$data_al['adgameid'] = 107421;
		}
		$data_al['callback'] = $callback;
		
		$url = $list['source_url'];
		
		$file_contents   = $this->request_post($url,$data_al);
		$json  = json_decode($file_contents,true );
		
		if(isset($json['IsSuccess']) && $json['IsSuccess']){
			$this->db->insert('aso_source',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; //这里返回1代表成功
		}
	}

	//来赚 排重
	function IdfaRepeat_191($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&ip=".$data["ip"]);
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json["status"]) && !$json["status"]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//来赚 点击
	function source_191($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }

		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback);
		// print_r($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback);exit;
		$json  = json_decode($file_contents,true );

		if(isset($json['success']) && $json['success'] == 1){
			// $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//来赚 上报
	function submit_191($data,$list){
		$file_contents = $this->request_get($list['submit_url']."&idfa=".$data['idfa']."&ip=".$data['ip']);
	
		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		
		if(isset($json['errorMsg']) && $json['errorMsg'] == "{\"success\":true}"){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	/*久韵积分墙 及贷  点击*/
	function source_160($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;

		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&mac=02:00:00:00:00:00&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback);

		$json = json_decode($file_contents,true);
		if($data['appid']==1298557871){
			if(isset($json['code']) && $json['code']==200){
				$this->db->insert('aso_source', $data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
			}else{
				$data['json'] =$file_contents;
				$this->db->insert('aso_source_log', $data);
				echo  json_encode(array('code'=>'103','result'=>'false'));die;
			}
		}
		if($file_contents== 1){
			// $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	/*久韵积分墙 及贷  排重*/
	function IdfaRepeat_160($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&ip=".$data["ip"]);
		//print_r($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&ip=".$data["ip"]);exit;
		$json = json_decode($file_contents,true);
		//写入log
		
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		if($data['appid']==871095743){
			//渠道返回：成功返回0  失败返回1
			if(isset($json['data'][$data['idfa']]) && $json['data'][$data['idfa']]==0){
				echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
			}else{
				$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;exit();
			} 


		}
		if($data['appid']==1298557871){
			//渠道返回：成功返回0  失败返回1
			if(isset($json['data'][0]['isUse']) && !$json['data'][0]['isUse']){
				echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
			}else{
				$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;exit();
			} 


		}
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	/*久韵积分墙  及贷 上报*/
	function submit_160($data,$list){
		$file_contents = $this->request_get($list['submit_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&mac='02:00:00:00:00:00'");

		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if( $file_contents== 1){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}
	/*久韵积分墙  点击*/
	function source_161($data,$list){
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;

		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&appid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callbackurl=".$callback);
		$json     = json_decode($file_contents,true);
		// print_r($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback);exit;
		
//echo $callback;
		if($json['code']==0000){
			// $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	/*久韵房多多  排重*/
	function IdfaRepeat_161($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."?idfa=".$data['idfa']."&appid=".$data["appid"]."&secretKey=NQiMpTaKdMp6cFSdWHoqvY7tPzU0t58f");
		
		// print_r($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&ip=".$data["ip"]);exit;
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json["code"]) && isset($json["data"][$data['idfa']])){
			if(($json["code"]==0000) && $json["data"][$data['idfa']]==0){
				echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
			}else{
				$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;exit();
			}
		}else{
			if($json[$data['idfa']]==0){
				echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
			}else{
				$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;exit();
			}
		}
	}
	/*久韵房多多  上报*/
	function submit_161($data,$list){
		$file_contents = $this->request_get($list['submit_url']."?uuid=".$data['idfa']."&appid=".$data['appid']."&deviceName=&deviceVersion=&idfa=".$data['idfa']."&ip=".$data['ip']."&deviceMac=02:00:00:00:00:00&network=&secretKey=NQiMpTaKdMp6cFSdWHoqvY7tPzU0t58f");
	    $json = json_decode($file_contents,true);
	
		
		//echo $list['submit_url']."?uuid=".$data['idfa']."&appid=".$data['appid']."&deviceName=ipone4&deviceVersion=4.0.0&idfa=".$data['idfa']."&ip=".$data['ip']."&deviceMac=02:00:00:00:00:00&network=wifi&secretKey=NQiMpTaKdMp6cFSdWHoqvY7tPzU0t58f";
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if($json['message']== 0000){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	//创客 点击
	function source_162($data,$list){
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."?source=aiyingli&idfa=".$data['idfa']."&callback=".$callback."&appid=".$data['appid']);
		
		// print_r($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callback=".$callback);exit;
		$json          = json_decode($file_contents,true);
		
//echo $callback;
		if($json['code']== 0){
			// $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	//创客 排重
	function IdfaRepeat_162($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."?idfa=".$data['idfa']."&appid=".$data["appid"]);
		// print_r($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&ip=".$data["ip"]);exit;
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json[$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	//铃声大全 排重
	function IdfaRepeat_1188586091($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url'] . "&idfa=".$data['idfa']."&appid=".$data['appid']);
		$json = json_decode($file_contents,true );
		// echo $file_contents;die;
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json[$data['idfa']]==1){
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
				
			}else{
				//成功返回
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
			}
	}

	//猎豆 九秀直播 排重
	 function IdfaRepeat_717804271($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&appid=".$data['appid']."&cparam=%7B%22source%22%3A%22liedou%22%2C%22appid%22%3A%22717804271%22%2C%22sign%22%3A%22sign%22%7D%20");
		
		//echo $file_contents;die;
		//写入log
		$json   = json_decode($file_contents,true);
		
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if($json['uniq']==1 && $json['msg']=='success'){
				
				//成功返回
				echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
			}else{
				$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
				$contents = json_encode($a);
				echo  $contents;
			}
	}
	//猎豆 九秀直播 激活
	function submit_717804271($data,$list){
		
		$sign          = md5("appBaseId=".$list['appid']."&channelId=20015&idfa=".$list['idfa']."slims267(envied");
		$file_contents = $this->request_get("http://m.liedou.com/batman/external/v2/activeClick?channelId=20015&cparam=%7B%22source%22%3A%22liedou%22%2C%22appid%22%3A%22717804271%22%2C%22sign%22%3A%22sign%22%7D&cpCid=30011&mac=02:00:00:00:00:00&appBaseId=".$list['appid']."&idfa=".$list['idfa']."&ip=".$list['ip']."&sign=".$sign);
	    $json = json_decode($file_contents,true);
	
		
		//echo $list['submit_url']."?uuid=".$data['idfa']."&appid=".$data['appid']."&deviceName=ipone4&deviceVersion=4.0.0&idfa=".$data['idfa']."&ip=".$data['ip']."&deviceMac=02:00:00:00:00:00&network=wifi&secretKey=NQiMpTaKdMp6cFSdWHoqvY7tPzU0t58f";
		unset($list['sign'],$list['ip'],$list['reqtype'],$list['isbreak'],$list['device'],$list['os'],$list['callback']);

		if($json['message']== 'success' && $json['code']==0){//上报成功
				$list['timestamp']=time();
				$list['type'] = 1;
				$this->db->insert('aso_submit2',$list);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				
				$list['timestamp']=time();
				$list['type'] = 1;
				$list['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$list);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}
	//小额极速贷款 点击回调
	function source_1269510704($data,$list){
		$id = $this->db->insert('aso_source', $data); 
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url="http://ejie.iparky.com/api/common/aylcallback".'?appid='.$data['appid'].'&idfa='.$data['idfa'].'&ip='.$data['ip'].'&timestamp='.$data['timestamp'].'&callback='.$callback;
		
        $file_contents = $this->request_get($url);
        // $file_contents = $this->StatusCode($url);
		// echo $file_contents;die;
		$json = json_decode($file_contents,true);

		if($json['code']==0){//点击成功
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
	}

	function source_368($data,$list){
		// $id = $this->db->insert('aso_source', $data); 
		// $inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);
		$url="http://ejie.iparky.com/api/common/aylcallback".'?appid='.$data['appid'].'&idfa='.$data['idfa'].'&ip='.$data['ip'].'&timestamp='.$data['timestamp'].'&callback='.$callback;
		
        $file_contents = $this->request_get($url);
        // $file_contents = $this->StatusCode($url);
		// echo $file_contents;die;
		$json = json_decode($file_contents,true);

		if($json['code']==0){//点击成功
				$this->db->insert('aso_source', $data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
	}
	//钱客 排重
	function IdfaRepeat_248($data,$list){

		$url = $list['IdfaRepeat_url']."&idfas=".$data['idfa']."&ip=".$data['ip'];
		
		$file_contents = $this->request_get($url);
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['data'][$data['idfa']]) && !$json['data'][$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//钱客 点击
	function source_248($data,$list){
		
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$url=$list['source_url'].'&idfa='.$data['idfa'].'&mac=02:00:00:00:00:00'.'&ip='.$data['ip'].'&os='.$data['os'].'&callbackurl='.$callback;
		//echo $url;
        $file_contents = $this->request_get($url);
        // $file_contents = $this->StatusCode($url);
		
		$json = json_decode($file_contents,true);
		//var_dump($json);
		if(isset($json['code']) && $json['code']==0){//点击成功
				$this->db->insert('aso_source', $data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));die;
				
			}else{//失败 
				$data['json']=$file_contents;
				$this->db->insert('aso_source_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
				die;
			}
	}


	//钱客 激活
	function submit_248($data,$list){
		$url = $list['submit_url'] . "&appleid=".$data['appid']."&idfa=".$data['idfa']."&ip=".$data['ip'];;
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['status']) && $json['status'] == "true"){
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	/*行者天下  点击*/
	function source_359($data,$list){
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
	
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&idfa=".$data['idfa']."&client_ip=".$data['ip']."&callback=".$callback);
			//echo $list['source_url']."&idfa=".$data['idfa']."&client_ip=".$data['ip']."&callback=".$callback;
		$json     = json_decode($file_contents,true);
		
		if($json['success']){
			// $this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	/*行者天下  排重*/
	function IdfaRepeat_359($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
		
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	/*行者天下  上报*/
	function submit_359($data,$list){
		$file_contents = $this->request_get($list['submit_url']."&idfa=".$data['idfa']."&client_ip=".$data['ip']);

	    $json = json_decode($file_contents,true);
	
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if($json['result']== 1){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}


	//唔哩 点击
	function source_876($data,$list){
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;

		$callback = urlencode($callback);

		$url=$list['source_url'].'&idfa='.$data['idfa'].'&callback='.$callback;
		
        $file_contents = $this->request_get($url);
        // $file_contents = $this->StatusCode($url);
		
		$json = json_decode($file_contents,true);
	
		if($file_contents=="success"){//点击成功
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
			// $data['json']=$file_contents;
			// $this->db->insert('aso_source_log',$data);
		}else{//失败 
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	/*唔哩  排重*/
	function IdfaRepeat_876($data,$list){
		$file_contents = $this->request_get($list['IdfaRepeat_url']."idfa=".$data['idfa']);
		//echo $list['IdfaRepeat_url']."&idfa=".$data['idfa'];
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		//var_dump($json);
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}


	//好享受 点击
	function source_1119860302($data,$list){
		$data['timestamp'] = time();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;

		$callback = urlencode($callback);

		$url=$list['source_url'].'&unique='.$data['idfa'].'&mac=02:00:00:00:00:00&utime='.$data['timestamp'].'&token='.md5('b9d8a6a8d82f95dc8c5bf775c8ff04bd'.$data['timestamp']).'&url_callback='.$callback;
		
        $file_contents = $this->request_get($url);
        // $file_contents = $this->StatusCode($url);
		// print_r($file_contents);exit;
		
		$json = json_decode($file_contents,true);
		
		if(isset($json['code']) && $json['code'] == 200){//点击成功
			$this->db->insert('aso_source',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
			// $data['json']=$file_contents;
			// $this->db->insert('aso_source_log',$data);
		}else{//失败 
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	/*好享受  排重*/
	function IdfaRepeat_1119860302($data,$list){
		$data['timestamp'] = time();
		$file_contents = $this->request_get($list['IdfaRepeat_url'].'&unique='.$data['idfa'].'&utime='.$data['timestamp'].'&token='.md5('b9d8a6a8d82f95dc8c5bf775c8ff04bd'.$data['timestamp']));
		//echo $list['IdfaRepeat_url']."&idfa=".$data['idfa'];
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['code']) && $json['code'] == 200){
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//卓泰点击
	function source_60($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		$callback = urlencode($callback);

		 $url = $list['source_url'] ."?mid=20031&appid=".$data['appid']."&idfa=".$data['idfa']."&clkip=".$data['ip']."&idfamd5=".md5($data['idfa'])."&clktime=".$data['timestamp']."&callbackurl=".$callback;
		
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		
		if($json["code"]==200){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	//卓泰排重
	function IdfaRepeat_60($data,$list){
		//$data['timestamp'] = time();
		$res['idfa']       = $data['idfa'];
		$res['appid']      = $data['appid'];
		$file_contents = $this->request_post($list['IdfaRepeat_url'],$res);
		//echo $list['IdfaRepeat_url']."&idfa=".$data['idfa'];
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		//var_dump($json);
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//有为互动 排重
	function IdfaRepeat_66($data,$list){
		
		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa'].'&appid='.$data['appid']);
		
		$json = json_decode($file_contents,true);
		//var_dump($json);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		

		
		//渠道返回：成功返回0  失败返回1
		if(isset($json['status']) && $json['status']==20000 && $json['result']['allowed']){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}
	//有为互动 点击
	function source_66($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		$callback = urlencode($callback);

		 $url = $list['source_url']."&appid=".$data['appid']."&model=".$data['device']."&idfa=".$data['idfa']."&ip=".$data['ip']."&sysVer=".$data['os']."&word=".urlencode('新闻')."&callbackUrl=".$callback;
		
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		
		if(isset($json['status']) && $json['status']==20000 && $json['result']['success']){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}
	//有为互动 上报
	function submit_66($data,$list){
		$url = $list['submit_url']."&idfa=".$data['idfa']."&appid=".$data['appid'].'&mac=02:00:00:00:00:00&ip='.$data['ip'];
		//echo $url;
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//var_dump($json);
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if(isset($json['status']) && $json['status']==20000 && $json['result']['success']){
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	

	//现金借钱花 点击
	function source_1273508487($data,$list){
		$data['timestamp'] = time();
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;

		$callback = urlencode($callback);

		$url=$list['source_url'].'?app=1273508487&os=10.1&ip='.$data['ip'].'&from_channel=xiongmaoshiwan&idfa='.$data['idfa'].'&callback='.$callback;
		
        $file_contents = $this->request_get($url);
        // $file_contents = $this->StatusCode($url);
		$json = json_decode($file_contents,true);

 		$pos = strpos($file_contents, "true");
        if ($pos !== false){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
			// $data['json']=$file_contents;
			// $this->db->insert('aso_source_log',$data);
		}else{//失败 
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	//指还王 排重
	function IdfaRepeat_74($data,$list){
		
		$file_contents = $this->request_get($list['IdfaRepeat_url']."?idfa=".$data['idfa']);
		
		$json = json_decode($file_contents,true);
		
		//var_dump($json);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		

		
		//渠道返回：成功返回0  失败返回1
		if($json[$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));die; //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;die;
		}
	}
	//指还王 注册回调
	function source_74($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;  
		// }
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		
		$callback = urlencode($callback);

		$url = $list['source_url'] ."&idfa=".$data['idfa']."&callbackUrl=".$callback;
		
		$file_contents   = $this->request_get($url);
		
		$json  = json_decode($file_contents,true);
		
		if(isset($json['returnCode']) && $json['returnCode']=='success'){
			$this->db->insert('aso_source', $data); 
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data); 
			echo  json_encode(array('code'=>'103','result'=>'false'));die; 
		}
	}


	/*掌贝网易新闻  排重*/
	function IdfaRepeat_597($data,$list){
		$file_contents = file_get_contents($list['IdfaRepeat_url'].'&idfa='.$data['idfa']."&ip=".$data['ip']);
		// print_r($file_contents);exit;
		// $json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		//var_dump($json);
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
 		$pos = strpos($file_contents, "0");
        if ($pos !== false){
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//掌贝网易新闻 点击
	function source_597($data,$list){
		$data['timestamp'] = time();
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;

		$callback = urlencode($callback);

		$url=$list['source_url'].'&clientip='.$data['ip'].'&IDFA='.$data['idfa'].'&callback_url='.$callback;
		
        $file_contents = file_get_contents($url);
        // $file_contents = $this->StatusCode($url);
		// $json = json_decode($file_contents,true);

 		$pos = strpos($file_contents, "1");
        if ($pos !== false){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
			// $data['json']=$file_contents;
			// $this->db->insert('aso_source_log',$data);
		}else{//失败 
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	//掌贝网易新闻 激活上报
	function submit_597($data,$list){
		$url = $list['submit_url']."&idfa=".$data['idfa'];
		
		$file_contents = $this->request_get($url);
		
		$json =explode('|',$file_contents);
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		if($json[0]=='1'){
			$data['timestamp']=time();
			$data['type'] = 1;
			$this->db->insert('aso_submit2',$data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
		}else{//失败 
			$data['timestamp']=time();
			$data['type'] = 1;
			$data['json'] =$file_contents;
			$this->db->insert('aso_submit_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	/*freebao微鸟英语  排重*/
	function IdfaRepeat_508367765($data,$list){
		$url = "http://m.freebao.com/freebao-mobile/ex/fetchIdfaInfo.html?"."appid=".$data['appid']."&idfa=".$data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		//var_dump($json);
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1

        if (isset($json[$data['idfa']]) && $json[$data['idfa']] == 0){
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//freebao微鸟英语 点击
	function source_508367765($data,$list){
		$data['timestamp'] = time();
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;

		$callback = urlencode($callback);

		$url = "http://m.freebao.com/freebao-mobile/ex/click.html?";
		$m['appid'] = $data['appid'];
		$m['source'] = 1;
		$m['idfa'] = $data['idfa'];
		$m['callback'] = $data['callback'];
		// $url="http://m.freebao.com/freebao-mobile/ex/click.html?"."appid=".$data['appid'].'&source=1'.'&idfa='.$data['idfa'].'&callback ='.$callback;
        $file_contents = $this->request_post($url,$m);

        // $file_contents = $this->StatusCode($url);
		$json = json_decode($file_contents,true);

        if (isset($json['code']) && $json['code'] == 0){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
			// $data['json']=$file_contents;
			// $this->db->insert('aso_source_log',$data);
		}else{//失败 
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	/*聚鹏  排重*/
	function IdfaRepeat_9656($data,$list){
		$url = $list['IdfaRepeat_url']."&idfa=".$data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		//var_dump($json);
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1

        if (isset($json[$data['idfa']]) && $json[$data['idfa']] == 0){
			//成功返回
			echo  json_encode(array($data['idfa']=>'1'));//这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0');//我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;
		}
	}

	//聚鹏 点击
	function source_9656($data,$list){
		$data['timestamp'] = time();
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;

		$callback = urlencode($callback);

		$url = $list['source_url']."&clientip=".$data['ip']."&idfa=".$data['idfa'];

        $file_contents = $this->request_get($url);
// print_r($file_contents);exit;
        // $file_contents = $this->StatusCode($url);
		$json = json_decode($file_contents,true);

        if (isset($json['success']) && $json['success']){
			echo  json_encode(array('code'=>'0','result'=>'ok'));die;
			// $data['json']=$file_contents;
			// $this->db->insert('aso_source_log',$data);
		}else{//失败 
			$data['json']=$file_contents;
			$this->db->insert('aso_source_log',$data);
			echo  json_encode(array('code'=>'103','result'=>'false'));//这里返回1代表成功
			die;
		}
	}

	/*聚鹏  上报*/
	function submit_9656($data,$list){
		$file_contents = $this->request_get($list['submit_url']."&idfa=".$data['idfa']."&clientIp=".$data['ip']);

	    $json = json_decode($file_contents,true);
	
		
		//echo $list['submit_url']."?uuid=".$data['idfa']."&appid=".$data['appid']."&deviceName=ipone4&deviceVersion=4.0.0&idfa=".$data['idfa']."&ip=".$data['ip']."&deviceMac=02:00:00:00:00:00&network=wifi&secretKey=NQiMpTaKdMp6cFSdWHoqvY7tPzU0t58f";
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if(isset($json['success']) &&  $json['success']){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	//米连科技 排重
	function IdfaRepeat_10010($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."?appid=".$data['appid']."&idfa=".$data['idfa']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//米连科技 点击
	function source_10010($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."?idfa=".$data['idfa']."&appid=".$data['appid']."&timestamp=".$data['timestamp']."ip=".$data['ip']."&callback=".$callback);
		
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );
		
		if(isset($json['code']) && $json['code'] == 0){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}


	//中华万年历  排重
	function IdfaRepeat_10011($data,$list){

		$data_al['app_key']   = 99817882;
		$data_al['devices'][] = $data['idfa'];

		$fields               = json_encode($data_al);
	

		$file_contents = $this->request_post2($list['IdfaRepeat_url'],$fields);
		$json = json_decode($file_contents,true );
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['data'][0]) && $json['data'][0] == $data['idfa']){
				echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//钱庄理财 
	function source_10012($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

	     $this->request_get($list['source_url']."&idfa=".$data['idfa']."&appid=".$data['appid']."&source=apyb&devicename=".$data['device']."&sysversion=".$data['os']."&clickip=".$data['ip']."&callback=".$callback);

	
		$this->db->insert('aso_source', $data);
		echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		
	}

	//nice  排重
	function IdfaRepeat_10013($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url'].'?appid='.$data['appid'].'&idfa='.$data['idfa']);
		$json = json_decode($file_contents,true );
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 1){
				echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//nice  点击
	function source_10013($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."?idfa=".$data['idfa']."&appid=".$data['appid']."&timestamp=".$data['timestamp']."&ip=".$data['ip']."&callback=".$callback);
		
		
		$json  = json_decode($file_contents,true );
		
		if(isset($json['code']) && $json['code'] == 0){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//nice  上报
	function submit_10013($data,$list){
		$file_contents = $this->request_get($list['submit_url']."?idfa=".$data['idfa']."&appid=".$data['appid']);

	    $json = json_decode($file_contents,true);
	
		
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if(isset($json['result']) &&  $json['result']){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}


	//龙域映客 排重
	function IdfaRepeat_10014($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."?idfa=".$data['idfa']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['data'][$data['idfa']]) && !$json['data'][$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//龙域映客 点击
	function source_10014($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']);
		
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );
	
		
		if(isset($json['code']) && $json['code'] == 0){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}


	//车位 排重
	function IdfaRepeat_10015($data,$list){
		$url = "https://tgcw.feifeipark.com/index.php/Api/AppStore/check"."?appid=".$data['appid']."&idfa=".$data['idfa'];
		$file_contents = $this->request_get($url);

		$json = json_decode($file_contents,true);
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());

		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']] == 1){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	//车位 点击
	function source_10015($data,$list){
		// if(empty($data['callback'])){
		// 	echo'{"resultCode":-1,"errorMsg":"callback empty"}'; die;
		// }
		// echo 1;exit;
		$id = $this->db->insert('aso_source', $data);
		$inid = $this->db->insert_id();
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?back_id=".$inid."&k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$timestamp = time();
		$sign=md5($timestamp."f18500b0e62a32e491c59ccd053c546d");
		$url ="https://tgcw.feifeipark.com/index.php/Api/AppStore/click"."?idfa=".$data['idfa']."&callback=".$callback."&sign=".$sign."&appid=".$data['appid']."&timestamp=".$timestamp."&ip=".$data['ip'];
		$file_contents = file_get_contents($url);
		//$file_contents   = $this->request_get($url);

		$json  = json_decode($file_contents,true );
		//print_r($file_contents);exit;
		if(isset($json['code']) && !$json['code']){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//摩邑诚 排重
	function IdfaRepeat_10016($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."?idfa=".$data['idfa'].'&app_id='.$data['appid']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['status']) && $json['status']==200 && $json['code']==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}


	//摩邑诚 点击
	function source_10016($data,$list){

		$file_contents   = $this->request_get($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip'].'&click_time='.$data['timestamp'].'&app_id='.$data['appid']);
		
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );
		
		
		if(isset($json['status']) && $json['status']==200 && $json['code']==0){
			$data['session_id']   = $json['data']['token'];
			$this->db->insert('aso_source_myc', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}
	//摩邑诚 回调接口
	function MycAdvert(){
		
       if(!isset($_GET['session_id'])){echo json_encode(array('code'=>99,'message'=>'session_id error'));die;}
      

       $session_id             = intval($_GET['session_id']);

       $sql   = "select callback,appid,cpid,idfa from aso_source_myc where session_id = ".$session_id;

	   $res   = $this->db->query($sql);

	   $list  = $res->row_array();//查出来的是厂商app的信息

	   if(empty($list)){
	   		echo json_encode(array('code'=>99,'message'=>'session_id not exist'));die;
	   }

	   $result['appid']       = $list['appid'];
	   $result['idfa']        = $list['idfa'];
	   $result['cpid']        = $list['cpid'];
	   $result['timestamp']   = time();
	   $result['type']        = 2;

	   $url = $list['callback'];
	   $pos = strrpos($list['callback'], "imoney.one");
		if($pos !== 0) {
			$url = str_replace("imoney.one", "eimoney.com", $list['callback']);
		}
		
		
		$file_contents = $this->request_get($url);
		
		$json = json_decode($file_contents,true );


		if(isset($json['success']) && $json['success']){//回调值成功，完成任务
			$this->db->insert('aso_submit2',$result);
			echo $file_contents;

			mysql_close();
			die;
		}else{
			$result['json']=$file_contents;
			$this->db->insert('aso_submit_log',$result);
			mysql_close();
			echo  $file_contents;die;
		}
		
	}

	//摩邑诚 激活上报
	function submit_10016($data,$list){
		$appid  = $data['appid'];
		$idfa   = $data['idfa'];
		$sql = "select session_id from aso_source_myc where appid=$appid  and idfa='$idfa' order by id desc limit 0,1";
		
		$res = $this->db->query($sql);
		$info = $res->row_array();//查出来的是厂商app的信息
		if(empty($info)){
	   		echo json_encode(array('code'=>99,'message'=>'session_id not exist'));die;
	   }
	
		$file_contents = $this->request_get($list['submit_url']."&app_id=".$data['appid']."&idfa=".$data['idfa'].'&token='.$info['session_id']);

	    $json = json_decode($file_contents,true);
		
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if(isset($json['status']) &&  $json['status']==200){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	//对面 排重
	function IdfaRepeat_10017($data,$list){

		$data_al['appid'] = $data['appid'];
		$data_al['source'] = 'imoney';
		$data_al['time']   = time();
		$data_al['idfa']   = $data['idfa'];

		

		$file_contents = $this->request_get($list['IdfaRepeat_url']."?idfa=".$data['idfa']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && !$json[$data['idfa']]){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//对面 点击
	function source_10017($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&idfa=".$data['idfa']."&app=".$data['appid']."&mac=02:00:00:00:00:00&callback=".$callback);
		
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );
	
		
		if(isset($json['success']) && $json['success']=="true"){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//塔防 排重
	function IdfaRepeat_10018($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."?idfa=".$data['idfa'].'&appid='.$data['appid']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['result'][$data['idfa']]) && $json['result'][$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	//塔防 上报
	function submit_10018($data,$list){

		$data_al['appid']  = $data['appid'];
		$data_al['idfa']   = $data['idfa'];
		$data_al['source'] = 'aipuyoubang';
		$data_al['sign']   = md5('aipuyoubang|'.$data['appid'].'|'.$data['idfa'].'|'.'m5f5nohv4mk5gz2pa7h9hr5qrd9mv14b');


		$json_data         = json_encode($data_al);
		$file_contents = $this->request_post2($list['submit_url'],$json_data);

	    $json = json_decode($file_contents,true);
	
		
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);

		if(isset($json['err_code']) &&  $json['err_code']==0){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}

	//健康猫
	function IdfaRepeat_10019($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."?idfa=".$data['idfa']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['code']) && $json['code']==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//猎聘 排重
	function IdfaRepeat_10020($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']."&appid=".$data['appid']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
	
		//渠道返回：成功返回0  失败返回1
		
		if(isset($json['data'][$data['idfa']]) && $json['data'][$data['idfa']]=='0'){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}

	//应用猿 排重
	function IdfaRepeat_10021($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa'].'&ip='.$data['ip']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	//应用猿 点击
	function source_10021($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&callbackurl=".$callback);
		
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );
	
	
		if(isset($json['code']) && $json['code']==0){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//应用猿 上报
	function submit_10021($data,$list){
		$file_contents = $this->request_get($list['submit_url']."&idfa=".$data['idfa']."&appid=".$data['appid'].'&ip='.$data['ip'].'&device=iphone');

	    $json = json_decode($file_contents,true);
	
	
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		
		if(isset($json['code']) &&  $json['code']==0){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}


	//点点时代 排重
	function IdfaRepeat_10022($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	//点点时代 排重 点击
	function source_10022($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&mac=&os=".$data['os']."&devicemodel=".$data['device']."&callback=".$callback);
		
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );
	
		
		if(isset($json['success']) && $json['success']==1){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//点点时代 排重 上报
	function submit_10022($data,$list){
		$file_contents = $this->request_get($list['submit_url']."&idfa=".$data['idfa']."&mac=&ip=".$data['ip'].'&os=iphone');

	    $json = json_decode($file_contents,true);
	
	
		
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		
		if(isset($json['success']) && $json['success']==1){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}


	//易服数创 排重
	function IdfaRepeat_10023($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	//易服数创 排重 点击
	function source_10023($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip'].'&callback='.$callback);
		
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );
	
	
		if(isset($json['success']) && $json['success']==1){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//易服数创 排重 上报
	function submit_10023($data,$list){
		$file_contents = $this->request_get($list['submit_url']."&idfa=".$data['idfa']."&ip=".$data['ip']);

	    $json = json_decode($file_contents,true);
	
	
	
		unset($data['sign'],$data['ip'],$data['reqtype'],$data['isbreak'],$data['device'],$data['os'],$data['callback']);
		
		if(isset($json['success']) && $json['success']==1){//上报成功
				$data['timestamp']=time();
				$data['type'] = 1;
				$this->db->insert('aso_submit2',$data);
				echo  json_encode(array('code'=>'0','result'=>'ok'));exit();
				
			}else{//失败 
				unset($data['ip']);
				$data['timestamp']=time();
				$data['type'] = 1;
				$data['json'] =$file_contents;
				$this->db->insert('aso_submit_log',$data);
				echo  json_encode(array('code'=>'103','result'=>'false'));exit();//这里返回1代表成功
			}
	}


	//你我贷理财 点击回调
	function source_10024($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&appid=".$data['appid']."&client_ip=".$data['ip'].'&idfa='.$data['idfa'].'&mac=02:00:00:00:00:00&callback='.$callback);
		
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );
	
		
		if(isset($json['code']) && $json['code']==200){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}


	//掘金股票 排重
	function IdfaRepeat_10025($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."?appId=".$data['appid']."&idfa=".$data['idfa']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]==1){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	//掘金股票
	function source_10025($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."?appId=".$data['appid']."&ip=".$data['ip'].'&idfa='.$data['idfa'].'&callback='.$callback);
		
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );
	
	
		if(isset($json['code']) && $json['code']==0){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}


	//天天快报 排重
	function IdfaRepeat_10026($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."?appId=".$data['appid']."&idfa=".$data['idfa']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json[$data['idfa']]) && $json[$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	
	//天天快报 点击
	function source_10026($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&appid=".$data['appid']."&ip=".$data['ip'].'&idfa='.$data['idfa']."&report_type=1click_time=".$data['timestamp'].'&callback='.$callback);
		
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );
	
	
		if(isset($json['ret']) && $json['ret']==0){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	//人人贷借款  排重
	function IdfaRepeat_10027($data,$list){

		$file_contents = $this->request_get($list['IdfaRepeat_url']."&apple_id=".$data['appid']."&idfas=".$data['idfa']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if(isset($json['data']['idfas']) && $json['data']['idfas'][$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	
	//人人贷借款  点击
	function source_10027($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&ip=".$data['ip'].'&idfa='.$data['idfa']."&click_time=".$data['timestamp'].'&notify_url='.$callback);
		
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );
	
		
		if(isset($json['errno']) && $json['errno']==0){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}


	//最美应用 排重
	function IdfaRepeat_10028($data,$list){


		$file_contents = $this->request_get($list['IdfaRepeat_url']."&idfa=".$data['idfa'].'&app_id='.$data['appid']);
	
		// print_r($file_contents);exit;
		$json = json_decode($file_contents,true);
		
		
		//写入log
		$log=array('cpid'=>$data['cpid'],'appid'=>$data['appid'],'adid'=>$data['adid'],'idfa'=>$data['idfa'],'json'=>$file_contents ,'date'=>time());
		
		$this->db->insert('aso_IdfaRepeat_log',$log);
		//渠道返回：成功返回0  失败返回1
		if( $json['result'] && $json['data'][$data['idfa']]==0){
			echo  json_encode(array($data['idfa']=>'1'));exit(); //这里返回1代表成功
		}else{
			$a = array($data['idfa']=>'0'); //我们这里返回0代表失败不可做任务
			$contents = json_encode($a);
			echo  $contents;exit();
		}
	}
	//最美应用 点击
	function source_10028($data,$list){
		
		$sign = md5($data['timestamp'].md5('callback'));//回调地址的sign;
		$callback = "http://asoapi.aiyingli.com/api/aso_advert/?k=".$data['timestamp']."&idfa=".$data['idfa']."&appid=".$data['appid']."&sign=".$sign;
		$callback = urlencode($callback);

		$file_contents   = $this->request_get($list['source_url']."&idfa=".$data['idfa']."&ip=".$data['ip']."&app_id=".$data['appid']."&callback=".$callback);
		
		// print_r($file_contents);exit;
		$json  = json_decode($file_contents,true );
	
		
		if(isset($json['result']) && $json['result']==1){
			$this->db->insert('aso_source', $data);
			echo  json_encode(array('code'=>'0','result'=>'ok'));die; //这里返回0代表成功
		}else{
			$data['json'] =$file_contents;
			$this->db->insert('aso_source_log', $data);
			echo  json_encode(array('code'=>'103','result'=>'false'));die;
		}
	}

	/**************************************** 接口结束**********************************************/
	/********************************** 自定义函数开始*********************************************/
	/**
     * 赶集构成加密串
     * @param  array $params 参数
     * @return string
     */
    static function buildParamStr( $params ) {
        ksort( $params );
        $paramStr = '';
        foreach ( $params as $key => $value ) {
            if ( $key == 'signature' ) {
                continue;
            }
            $paramStr .= sprintf( '%s=%s&', $key, $value );
        }

        return rtrim( $paramStr, '&' );
	}

	/**
     * 模拟post进行url请求
     * @param string $url
     * @param array $post_data
     */
    function request_post($url = '', $post_data = array()) {
        if (empty($url) || empty($post_data)) {
            return false;
        }
        
        $o = "";
        foreach ( $post_data as $k => $v ) 
        { 
            $o.= "$k=" . urlencode( $v ). "&" ;
        }
        $post_data = substr($o,0,-1);

        $postUrl = $url;
        $curlPost = $post_data;
        $ch = curl_init();//初始化curl
        curl_setopt($ch, CURLOPT_URL,$postUrl);//抓取指定网页
        curl_setopt($ch, CURLOPT_HEADER, 0);//设置header
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);//要求结果为字符串且输出到屏幕上
        curl_setopt($ch, CURLOPT_POST, 1);//post提交方式
        curl_setopt($ch, CURLOPT_POSTFIELDS, $curlPost);
        $data = curl_exec($ch);//运行curl
        curl_close($ch);
        return $data;
    }

     /**
     * 模拟post进行url请求
     * @param string $url
     * @param 以json流传递
     */
    function request_post2($url = '', $post_data = '') {
       
        $ch = curl_init($url);
		curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
		curl_setopt($ch, CURLOPT_POSTFIELDS,$post_data);
		curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
		curl_setopt($ch, CURLOPT_HTTPHEADER, array(
		    'Content-Type: application/json;charset=utf-8',
		    'Content-Length: ' . strlen($post_data))
		);
 
		$result = curl_exec($ch);
        curl_close($ch);
        return $result;
    }
    
    function request_get($url,$info=array()){

    	// 创建一个cURL资源
		$ch  =  curl_init ();

		// 设置URL和相应的选项
		curl_setopt ( $ch ,  CURLOPT_URL ,$url );
		curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
		curl_setopt ( $ch ,  CURLOPT_HEADER ,  0 );
		curl_setopt($ch, CURLOPT_NOSIGNAL, 1);
		curl_setopt($ch, CURLOPT_TIMEOUT_MS,5000);
		//curl_setopt($ch, CURLOPT_TIMEOUT,1); 
		
		// 抓取URL并把它传递给浏览器
		$data = curl_exec($ch);//运行curl

		$curl_errno = curl_errno($ch);  
        $curl_error = curl_error($ch);


	    curl_close($ch);
	 
	   //判断是否请求超时 允许最大请求时间2秒
	    if($curl_errno >0){  
	    		//记录超时日志 并输出错误
	    		if($url!=''){
    					$info['url']      = $url;
	    		        $info['message']  = $curl_error;
	    		        $info['date']     = gmdate('Y-m-d H:i:s',time());
    					$this->db->insert('aso_timeout_log',$info);
    			}
	    		
               echo $data = json_encode(array("code"=>99,"message"=>$curl_error)); die;
        }
	     return $data;
		// 关闭cURL资源，并且释放系统资源
		// curl_close ( $ch );

    }
    function request_get1($url){
    	// 创建一个cURL资源
		$ch  =  curl_init ();

		// 设置URL和相应的选项
		curl_setopt ( $ch ,  CURLOPT_URL ,$url );
		curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
		curl_setopt ( $ch ,  CURLOPT_HEADER ,  0 );
		curl_setopt( $ch ,CURLOPT_USERAGENT,$_SERVER['HTTP_USER_AGENT']); // 模拟浏览器请求
		// 抓取URL并把它传递给浏览器
		$data = curl_exec($ch);//运行curl
	    curl_close($ch);
	     return $data;

		// 关闭cURL资源，并且释放系统资源
		// curl_close ( $ch );

    }

    function request_get2($url, $headers){
    	// 创建一个cURL资源
		$ch  =  curl_init ();
		$headerArr = array(); 
		foreach( $headers as $n => $v ) { 
		    $headerArr[] = $n .':' . $v;  
		}
		// 设置URL和相应的选项
		curl_setopt ( $ch ,  CURLOPT_URL ,$url );
		curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
		curl_setopt($ch, CURLOPT_HEADER, false);
		curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120);
		curl_setopt($ch, CURLOPT_HTTPHEADER, $headerArr);
		// 抓取URL并把它传递给浏览器
		$data = curl_exec($ch);//运行curl
	    curl_close($ch);
	     return $data;

		// 关闭cURL资源，并且释放系统资源
		// curl_close ( $ch );

    }

    	/**
	 * RSA私钥签名
	 * 
	 * @param $signdata: 待签名字符串      	     	
	 */
	function sign($signdata,$AppStoreId){
	if($AppStoreId==1176078944){
	  $appPrivateKey="-----BEGIN PRIVATE KEY-----
MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAOJmBoc5nidFw2rH
Gxljo5bCsKMA5yksj2lb9pykxwXgy7Jgeow8yIKF9ZO7TvDWdvYWYYqejZRPmFcD
siYtC+aSGmDuXjimIEYAuaXRpg/eySqVkB7e/bCGwRqXI5jen2vsXSZIQsfOgIYw
A2IIbLNEluMlicse1ClbcDaiq30zAgMBAAECgYBIad24ruM5KIVCyACQ9F/Evu0E
litZ7hjI2FNe8w19gdNlcJqB9IclyHcuE4FCYzaVq77zOZeLUpIlctcugsYFFb63
17/KbUrqKIdI3P++0b4kzeOGu8B7F4/hpS/9Y43aXFQzHpn+/7XBHRCScs5mpmAQ
CLjQn6AAdkJE5gCfUQJBAPMQoHyBGMyyUyl77/CPhs0w1mVTk/Lr5FaIKTHzFmcT
Rm5887GSLu16IiwQQFTUQEhIXtRjmw3qUZH02gRfXN8CQQDuclhjT5QZjbU/Usv7
BSWdoxf6409bpzhqamnfGZE/8M20mw6G/sl21vJtsKb/R1cCYT7240uWfKlTxKXE
sxYtAkBczzx4TdLqVizq6ifz8tnF/5/dkMwtNWU6pUMVj3w+X13FUnC6nNbOVpQ1
vv7RZTomX3vWHTJXXeFHmfalNMSBAkEA5Z65nVE59m2vd7587ktjkO1JH3Kcrk9X
FatKLu0JIgD7pwuWrstXKRkPNjBicPy7PnB1WP1DgjSkPyXk2In5NQJBANIuQKAX
N+P8I2P9usBgQzwGubaxcZFNuXoi0xWTp20/2FT35g8U9ziCIcmw2tq08/B3dmZT
RiZIVKcD0VZknZc=
-----END PRIVATE KEY-----";
	}else if($AppStoreId==1104239394){
		  $appPrivateKey="-----BEGIN PRIVATE KEY----- 
MIICdQIBADANBgkqhkiG9w0BAQEFAASCAl8wggJbAgEAAoGBAIeBa1z6EeL3dkTC6Y
81VaiNK59Rqq7vJQLAKlzVBRKNWNX0OsP4fnU9Qukg9LNdfSejfz6iSIFbsRJfs3HO
Rds153+/fQmoDelaCkjbj0jiwdyFQE03tfUWXZMIJToSBBr8U5uzMD/s1Ef3gdUL9Y
EPUHo+k6kf2+qB9pyMTbRjAgMBAAECgYBTohQiuZFKlVNgkzBWHCP3ONJArcX73Evq
i7JZw3wy/BxlSSzwATIDqEDg5F9DSSNS0L1bagv4EyCR55E4X4iLIO0APfceVCGtLP
V2PfCHTflgXN7JXEYWEYhhrT9FyEL2D4frBu1thezCPQ1kGspFiwPXcgjvs0lJO0Tk
YOfbMQJBANKrX6eDNCfciQ/CCZ/2I25sjXJi5CBpuYb9do2zEaxnpShf6uuDpwSo01
VN65JI6pYqHzHrDSeI4Xm5AuI4ZrsCQQCkqa2160nGV89YwKQ4sDhbGGp1IJjmSjLq
yB64mlpSm2A/2R44pkjTCro/O56j+xpMGq0CnlUsQoatbpUQhBJ5AkB7pj6UkXvRUa
3Y4+jGTK/rJie3VbfUFnngc3BcJxhees8DbZjy9ujW4Uh5LyzvRYD69mos4GtuIvdE
fITmxnf1AkBSC9Xpcm6VLMW9FGf/cxbxlQ3ehLqK7OfIAqUEGKzuwkrIJZggZAKfXZ
YF0eAvFvw4dYZFar1Hy3It0o7l5tkJAkADcbrKca2QyJlUq/q7oIgzM1bR/dZvOfj/
P2r71Gzx9fMr06xK92FhKR5mQe511C7IezP5IUoB4b0y0xQmOZQ/
-----END PRIVATE KEY-----";
	}
	  // $aaaa=preg_replace("/\s/", ' ', $appPrivateKey);
	    if(openssl_sign($signdata,$sign,$appPrivateKey));
	        $sign = base64_encode($sign);
	        //echo $appPrivateKey;
	    return $sign;
	}
		/**
	 * 排序Request至待签名字符串
	 *
	 * @param $request: json格式Request
	 */
	function sortToSign($request){
	    $obj = json_decode($request);
	    $arr = array();
	    foreach ($obj as $key=>$value){
	        if(is_array($value)){
	            continue;
	        }else{
	            $arr[$key] = $value;
	        }
	    }
	    ksort($arr);
	    $str = "";
	    foreach ($arr as $key => $value){
	        $str = $str.strtolower($key).$value;
	    }
	    //$str = strtolower($str);
	    return $str;
	}

	
	// 包装好的发送请求函数
	function SendRequest($url,$request,$appId,$AppStoreId){
		$curl = curl_init ($url);
		
		$timestamp = gmdate ( "Y-m-d H:i:s", time ()); // UTC format
		$timestap_sign = $this->sign($appId. $timestamp,$AppStoreId);
		$requestSignStr = $this->sortToSign($request);
		$request_sign = $this->sign($requestSignStr,$AppStoreId);
		//echo $requestSignStr;
		$header = array ();
		$header [] = 'Content-Type:application/json;charset=UTF-8';
		$header [] = 'X-PPD-TIMESTAMP:' . $timestamp;
		$header [] = 'X-PPD-TIMESTAMP-SIGN:' . $timestap_sign;
		$header [] = 'X-PPD-APPID:' . $appId;
		$header [] = 'X-PPD-SIGN:' . $request_sign;
		
		curl_setopt ( $curl, CURLOPT_HTTPHEADER, $header );
		curl_setopt ( $curl, CURLOPT_POST, 1 );
		curl_setopt ( $curl, CURLOPT_POSTFIELDS, $request );
		curl_setopt ( $curl, CURLOPT_RETURNTRANSFER, 1 );
		$result = curl_exec ( $curl );
		curl_close ( $curl );
	//         $j = json_decode ( $result, true );
		//var_dump($result);
		return $result;
	}

	function getSignature($str, $key) {  
	    $signature = "";  
	    if (function_exists('hash_hmac')) {  
	        $signature = base64_encode(hash_hmac("sha1", $str, $key, true));  
	    } else {  
	        $blocksize = 64;  
	        $hashfunc = 'sha1';  
	        if (strlen($key) > $blocksize) {  
	            $key = pack('H*', $hashfunc($key));  
	        }  
	        $key = str_pad($key, $blocksize, chr(0x00));  
	        $ipad = str_repeat(chr(0x36), $blocksize);  
	        $opad = str_repeat(chr(0x5c), $blocksize);  
	        $hmac = pack(  
	                'H*', $hashfunc(  
	                        ($key ^ $opad) . pack(  
	                                'H*', $hashfunc(  
	                                        ($key ^ $ipad) . $str  
	                                )  
	                        )  
	                )  
	        );  
	        $signature = base64_encode($hmac);  
	    }  
	    return $signature;  
   }
   
    function GetHttpStatusCode($url){   
        $curl = curl_init();  
        curl_setopt($curl,CURLOPT_URL,$url);//获取内容url  
        curl_setopt($curl,CURLOPT_HEADER,1);//获取http头信息  
        curl_setopt($curl,CURLOPT_NOBODY,1);//不返回html的body信息  
        curl_setopt($curl,CURLOPT_RETURNTRANSFER,1);//返回数据流，不直接输出  
        curl_setopt($curl,CURLOPT_TIMEOUT,30); //超时时长，单位秒 
        curl_setopt($curl,CURLOPT_USERAGENT,"Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.134 Safari/537.36"); 
        curl_exec($curl);  
        $rtn= curl_getinfo($curl,CURLINFO_HTTP_CODE);  
        curl_close($curl);  
        return  $rtn;  
    }
    function StatusCode($url){   
        $curl = curl_init();  
        curl_setopt($curl,CURLOPT_URL,$url);//获取内容url  
        curl_setopt($curl,CURLOPT_HEADER,1);//获取http头信息 
        // curl_setopt($curl,CURLOPT_FOLLOWLOCATION,1); 
      
        curl_setopt($curl,CURLOPT_NOBODY,1);//不返回html的body信息  
        curl_setopt($curl,CURLOPT_RETURNTRANSFER,1);//返回数据流，不直接输出  
        curl_setopt($curl,CURLOPT_TIMEOUT,30); //超时时长，单位秒  
        curl_setopt($curl,CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.134 Safari/537.36");
        // curl_setopt($curl,CURLOPT_USERAGENT,"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)");
        // curl_setopt($curl,CURLOPT_FOLLOWLOCATION,1); 
        $a=curl_exec($curl); 
        echo $a;die; 
        // $rtn= curl_getinfo($curl,CURLINFO_HTTP_CODE);  //获取http状态码
        $rtn= curl_getinfo($curl,CURLINFO_EFFECTIVE_URL);  //获取http状态码
        curl_close($curl);  
        return  $rtn;  
    }


   

	/** 
	 *  将URL中的参数取出来放到数组里
	 * 
	 * @param    string    query 
	 * @return    array    params 
	 */ 
	function convertUrlQuery($url)
	{ 
		$arr = parse_url($url);
		$query = $arr['query'];
	    $queryParts = explode('&', $query); 
	    
	    $params = array(); 
	    foreach ($queryParts as $param) 
		{ 
	        $item = explode('=', $param); 
	        $params[$item[0]] = $item[1]; 
	    } 
	    
	    return $params; 
	}
}
/********************************** 自定义函数结束*********************************************/
Class Crypt{
	const CIPHER = MCRYPT_RIJNDAEL_128;//算法
	const MODE = MCRYPT_MODE_CBC;//模式
	//俄罗斯方块
	/**
	* 加密 默认为 AES 128 CBC
	* @param string $key 密钥
	* @param string $plaintext 需加密的字符串
	* @param string $cipher 算法
	* @param string $mode 模式
	* @return binary
	*/
	static  public  function encrypt($key, $plaintext, $cipher = self::CIPHER, $mode = self::MODE ) {
		$iv = mcrypt_create_iv(mcrypt_get_iv_size(self::CIPHER, self::MODE),MCRYPT_RAND);
		$padding = 16 - (strlen($plaintext) % 16);
		$plaintext .= str_repeat(chr($padding), $padding);
		$ciphertext = mcrypt_encrypt(self::CIPHER, $key, $plaintext, self::MODE, $iv);
		$ciphertext = $iv . $ciphertext;
		return $ciphertext;
	}
}
